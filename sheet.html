<input type="hidden" name="attr_bond_query" value="(0)[Other Bond]">
<input type="hidden" name="attr_statmod_query" value="?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]|Навык,(@{skill})[skill]|Репутация,(@{reputation})[reputation]|Благосостояние,(@{money})[money]|Что-нибудь,(?{Value&#124 0 &#125) }">

<div class="container">

    <div class="header-container">
        <img class="logo" src="https://github.com/khtd/roll20_eotv/blob/master/EotV_Logotype_3.png?raw=true">

        <div class="name-container">
            <span class="name-label">Имя</span>
            <input type="text" class="name-input" name="attr_character_name">
        </div>

        <div class="class-container">
            <span class="class-label">Класс</span>
            <input type="hidden" name="attr_comp_name">
            <input type="hidden" name="attr_comp_classmoves">
            <span class="class-span" name="attr_character_class"></span>
            <button type='action' class='change-button class-change-button' name='act_changeclass'>Изменить</button>
        </div>

        <div class="exp-container">
            <strong class="exp-label">EXP.</strong>
            <input type="checkbox" class="exp-box exp-box0" name="attr_exp" value="0" checked="checked">
            <input type="checkbox" class="exp-box exp-box1" name="attr_exp" value="1"><span class="exp-box1"></span>
            <input type="checkbox" class="exp-box exp-box2" name="attr_exp" value="2"><span class="exp-box2"></span>
            <input type="checkbox" class="exp-box exp-box3" name="attr_exp" value="3"><span class="exp-box3"></span>
            <input type="checkbox" class="exp-box exp-box4" name="attr_exp" value="4"><span class="exp-box4"></span>
            <strong class="exp-up-label">Уровень</strong>
            <input type="checkbox" class="exp-box exp-box5" name="attr_exp" value="5"><span class="exp-box5"></span>
         </div>
    </div>

    <div class="navigation-container">
        <div class="nav-tabs">
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page1" checked="checked">
                <span>лист 1</span>
            </label>
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page2">
                <span>лист 2</span>
            </label>
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page3">
                <span>ходы</span>
            </label>
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page4">
                <span>опции</span>
            </label>
        </div>

        <div class="roll-bonus">
            <div class="toggler">
                <input type="text" name="attr_hold" value="+0" />
                <label>
                    <input type="checkbox" class="roll-query" name="attr_bonus" value="@{hold}"><span>К броску</span>
                </label>

            </div>
        </div>
    </div>
    <input type='hidden' class='tabstoggle' name='attr_sheetTab'  value='page1'/>


    <div class="page page1">
        <div class='description'>
            <input type="checkbox" class="change-description-hidden" name="attr_changing_desciption" value="1" checked="true">
            <div class="title">
                <h3><span>ОПИСАНИЕ</span></h3>
                <button type='action' class='change-descriprion' name='act_changedesciption'>
                    <span class='change'>p</span>
                    <span class='save'>3</span>
                </button>
            </div>
            <textarea class="description-input-text" name="attr_description"></textarea>
            <textarea class="description-saved-text" name="attr_description" readonly="true"></textarea>
        </div>

        <input type="checkbox" class="is-raelith-fn-flag" name="attr_isRaelithFunction">
        <div class="background">
            <div class="title">
                <h3><span>ПРОИСХОЖДЕНИЕ</span></h3>
                <button type='action' class='change-button' name='act_changebackground'>p</button>
            </div>

            <input type="checkbox" class="is-cyborg-bg-flag" name="attr_isCyborgBackground">
            <div class="additional-background cyborg-additional">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outAddBackground' value="&{template:info} {{name=@{character_name}}} {{type=Тао Прайм}} {{item=Происхождение}} {{description=Ты родился на Тао. С рождения твоё тело модифицировали кибер-имплантами. Когда общаешься с выходцем с Тао, можешь говорить так, что гайдзины вас не поймут.}}">w</button>
                <div><span><strong>Тао Прайм:</strong> Ты родился на Тао. С рождения твоё тело модифицировали кибер-имплантами. Когда общаешься с выходцем с Тао, можешь говорить так, что гайдзины вас не поймут.</span></div>
            </div>

            <input type="checkbox" class="is-shadow-bg-flag" name="attr_isShadowBackground">
            <div class="additional-background shadow-additional">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outAddBackground' value="&{template:info} {{name=@{character_name}}} {{type=Тао (Клоака)}} {{item=Происхождение}} {{description=Ты принадлежишь синдикату Ледяного Дракона. У тебя тоже есть кодекс чести, просто он внутренний — это то, что другие кланы так и не смогли принять. Ты — человек вне системы. Но ты не в одиночестве—иногда ты можешь получить задание. Это значит, что кто-то скоро умрёт.}}">w</button>
                <div><span><strong>Тао (Клоака):</strong> Ты принадлежишь синдикату Ледяного Дракона. У тебя тоже есть кодекс чести, просто он внутренний — это то, что другие кланы так и не смогли принять. Ты — человек вне системы. Но ты не в одиночестве—иногда ты можешь получить задание. Это значит, что кто-то скоро умрёт.</span></div>
            </div>
            
            <div class="background-text">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outBackground' value="&{template:info} {{name=@{character_name}}} {{type=@{backgroundtype}}} {{item=Происхождение}} {{description=@{backgroundtext}}}">w</button>
                <div><strong><span name="attr_backgroundtype"></span>:</strong><span name="attr_backgroundtext"></span></div>
            </div>

           
            <input type="checkbox" class="background-show-flag" name="attr_background_show_flag" value="1">
            <div class='background-select'>
                <span class='emptiable' name="attr_pre_background"></span>
                <fieldset class='repeating_background'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>

        </div>

        <input type="checkbox" class="is-cyborg-path-flag" name="attr_isCyborgPath">
        <div class='cyborg-additional cyborg-path'>
            <div class="title">
                <h3><span>ПУТЬ</span></h3>
                <button type='action' class='change-button' name='act_changecyborgPath'>p</button><br>
            </div>


            <div class="cyborgPath">
                <button type='roll' class="cyborgPathOutput infoOutput" name='roll_outCyborgPath' value="&{template:info} {{name=@{character_name}}} {{type=@{cyborgPathtype}}} {{item=Путь}} {{description=@{cyborgPathtext}}}">w</button>
                <div><strong><span name="attr_cyborgPathtype"></span>:</strong><span name="attr_cyborgPathtext"></span></div>
            </div>

            <input type="checkbox" class="cyborgPath-show-flag" name="attr_cyborgPath_show_flag">
            <div class="cyborgPath-select">
                <span>Выбери мотив, который вынуждает тебя путешествовать:</span>
                <fieldset class='repeating_cyborgPath'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-stranger-spec-flag" name="attr_isStrangerSpec">
        <div class='stranger-additional stranger-specialization'>
            <div class="title">
                <h3><span>Специализация</span></h3>
                <button type='action' class='change-button' name='act_changestrangerSpecialization'>p</button><br>
            </div>
            
            <div class="strangerSpecialization">
                <button type='roll' class="strangerSpecializationOutput infoOutput" name='roll_outStrangerSpecialization' value="&{template:info} {{name=@{character_name}}} {{type=@{strangerSpecializationtype}}} {{item=Специализация}} {{description=@{strangerSpecializationtext}}}">w</button>
                <div><strong><span name="attr_strangerSpecializationtype"></span>:</strong><span name="attr_strangerSpecializationtext"></span></div>
            </div>

            <input type="checkbox" class="strangerSpecialization-show-flag" name="attr_strangerSpecialization_show_flag">
            <div class="strangerSpecialization-select">
                <span>Это то, чем ты занимаешься в иерархии странников. Выбери 1:</span>
                <fieldset class='repeating_strangerSpecialization'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-juggernaut-craft-flag" name="attr_isJuggernautHandicraft">
        <div class='juggernaut-additional juggernaut-handicraft'>
            <div class="title">
                <h3><span>Ремесло</span></h3>
                <button type='action' class='change-button' name='act_changejuggernautHandicraft'>p</button><br>
            </div>
            
            <div class="juggernautHandicraft">
                <button type='roll' class="juggernautHandicraftOutput infoOutput" name='roll_outJuggernautHandicraft' value="&{template:info} {{name=@{character_name}}} {{type=@{juggernautHandicrafttype}}} {{item=Ремесло}} {{description=@{juggernautHandicrafttext}}}">w</button>
                <div><strong><span name="attr_juggernautHandicrafttype"></span>:</strong><span name="attr_juggernautHandicrafttext"></span></div>
            </div>

            <input type="checkbox" class="juggernautHandicraft-show-flag" name="attr_juggernautHandicraft_show_flag">
            <div class="juggernautHandicraft-select">
                <span>Какова была твоя роль в племени? Ты можешь брать Усиления только своего Ремесла. Выбери 1:</span>
                <fieldset class='repeating_juggernautHandicraft'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-raelith-fn-flag" name="attr_isRaelithFunction">
        <div class='raelith-additional raelith-function'>
            <div class="title">
                <h3><span>Функция</span></h3>
                <button type='action' class='change-button' name='act_changeraelithFunction'>p</button><br>
            </div>

            <div>
                <span>Машина создавала тебя для определённых задач, и это влияет на твоё поведение. Машина ждёт, что ты будешь исполнять свою функцию. Иногда Машина может напрямую указать, что ей важно. В иных случаях ты можешь строить предположения самостоятельно. </span>
            </div>
            
            <div class="raelithFunction">
                <button type='roll' class="raelithFunctionOutput infoOutput" name='roll_outStrangerFunction' value="&{template:info} {{name=@{character_name}}} {{type=@{raelithFunctiontype}}} {{item=Функция}} {{description=@{raelithFunctiontext}}}">w</button>
                <div><strong><span name="attr_raelithFunctiontype"></span>:</strong><span name="attr_raelithFunctiontext"></span></div>
            </div>

            <input type="checkbox" class="raelithFunction-show-flag" name="attr_raelithFunction_show_flag">
            <div class="raelithFunction-select">
                <span>Выбери один вариант:</span>
                <fieldset class='repeating_raelithFunction'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="look">
            <input type="checkbox" class="expand-hidden" name="attr_expand_look" value="1" checked="true">
            <div class="sheet-title">
                <h3><span>ВНЕШНИЙ ВИД</span></h3>
                <button type="action" name="act_expand_look" class="expand-look">
                    <span class="expanded">▼</span>
                    <span class="notexpanded">◀</span>
                </button>
            </div>
            <textarea class="look-example" name="attr_look_example" readonly="true"></textarea>
            <textarea class="look-input" name='attr_look'></textarea>
        </div>

        <div class='start-gear'>
            <div class="title">
                <h3><span>СТАРТОВОЕ СНАРЯЖЕНИЕ</span></h3>
            </div>
            <span name="attr_startgear_note_text"></span><br>
            <span name="attr_startgear_choose_text"></span><br>
            <fieldset class='repeating_startgear'>
                <input type="hidden" name="attr_type"></input>
                <!-- <input type="hidden" class="toggle" name="attr_get_flag" /> -->
                <button type="action" name="act_get" class="toggle">
                    <span class="checked">+</span>
                </button>
                <div>
                    <span class='name' name="attr_name"></span>:
                    <span class='detail' name="attr_details"></span>
                </div>
            </fieldset>
        </div>
    </div>

    <div class="page page2">
        <div class="attributes">
            <div class='main-attributes'>
                <div class='furry attribute-container'>
                        <button type='roll' class="roll_attr attribute-name" name='roll_attr' value="&{template:move} {{charname=@{character_name}}} {{movename=Проверка: Ярость}} {{doroll=[[1]]}} {{result=[[2d6 + (@{furry}) + (@{bonus})[bonus]]]}} ">Ярость</button>
                    <input class='attribute-input' name='attr_furry' type='number'>
                </div>
                <div class='controll attribute-container'>
                    <button type='roll' class="roll_attr attribute-name" name='roll_attr' value="&{template:move} {{charname=@{character_name}}} {{movename=Проверка: Контроль}} {{doroll=[[1]]}} {{result=[[2d6 + (@{controll}) + (@{bonus})[bonus]]]}} ">Контроль</button>
                    <input class='attribute-input' name='attr_controll' type='number'>
                </div>
                <div class='skill attribute-container'>
                    <button type='roll' class="roll_attr attribute-name" name='roll_attr' value="&{template:move} {{charname=@{character_name}}} {{movename=Проверка: Навык}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill}) + (@{bonus})[bonus]]]}} ">Навык</button>
                    <input class='attribute-input' name='attr_skill' type='number'>
                </div>
                <div class='reputation attribute-container'>
                    <button type='roll' class="roll_attr attribute-name" name='roll_attr' value="&{template:move} {{charname=@{character_name}}} {{movename=Проверка: Репутация}} {{doroll=[[1]]}} {{result=[[2d6 + (@{reputation})  + (@{bonus})[bonus]]]}} ">Репутация</button>
                    <input class='attribute-input' name='attr_reputation' type='number'>
                </div>
            </div>

            <div class='sub-attributes'>
                <div class='atack sub-attribute-container'>
                    <span class='atack-lbl'>Урон</span>
                    <input type="checkbox" class="atack-box atack-box0" name="attr_atack" value="0" checked="checked">
                    <input type="checkbox" class="atack-box atack-box1" name="attr_atack" value="1"><span class="atack-box1"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="1">
                    <input type="checkbox" class="atack-box atack-box2" name="attr_atack" value="2"><span class="atack-box2"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="2">
                    <input type="checkbox" class="atack-box atack-box3" name="attr_atack" value="3"><span class="atack-box3"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="3">
                    <input type="checkbox" class="atack-box atack-box4" name="attr_atack" value="4"><span class="atack-box4"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="4">
                    <input type="checkbox" class="atack-box atack-box5" name="attr_atack" value="5"><span class="atack-box5"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="5">
                    <button type="action" class="addatackbutton" name='act_addmaxatack'>&</button>
                    <button type="action" class="sbstrctatackbutton" name='act_subtractmaxatack'>_</button>
                </div>

                <div class='armor sub-attribute-container'>
                    <span class='armor-lbl'>Защита</span>
                    <input type="checkbox" class="armor-box armor-box0" name="attr_armor" value="0" checked="checked">
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="0">
                    <input type="checkbox" class="armor-box armor-box1" name="attr_armor" value="1"><span class="armor-box1"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="1">
                    <input type="checkbox" class="armor-box armor-box2" name="attr_armor" value="2"><span class="armor-box2"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="2">
                    <input type="checkbox" class="armor-box armor-box3" name="attr_armor" value="3"><span class="armor-box3"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="3">
                    <input type="checkbox" class="armor-box armor-box4" name="attr_armor" value="4"><span class="armor-box4"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="4">
                    <input type="checkbox" class="armor-box armor-box5" name="attr_armor" value="5"><span class="armor-box5"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="5">
                    <button type="action" class="addarmorbutton" name='act_addmaxarmor'>&</button>
                    <button type="action" class="sbstrctarmorbutton" name='act_subtractmaxarmor'>_</button>
                </div>

                <div class='hp sub-attribute-container'>
                    <span class='hp-lbl'>Здоровье</span>
                    <input type="checkbox" class="hp-box hp-box0" name="attr_hp" value="0" checked="checked">
                    <input type="checkbox" class="hp-box hp-box1" name="attr_hp" value="1"><span class="hp-box1"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="1">
                    <input type="checkbox" class="hp-box hp-box2" name="attr_hp" value="2"><span class="hp-box2"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="2">
                    <input type="checkbox" class="hp-box hp-box3" name="attr_hp" value="3"><span class="hp-box3"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="3">
                    <input type="checkbox" class="hp-box hp-box4" name="attr_hp" value="4"><span class="hp-box4"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="4">
                    <input type="checkbox" class="hp-box hp-box5" name="attr_hp" value="5"><span class="hp-box5"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="5">
                    <button type="action" class="addhpbutton" name='act_addmaxhp'>&</button>
                    <button type="action" class="sbstrcthpbutton" name='act_subtractmaxhp'>_</button>
                </div>

                <div class='gear sub-attribute-container'>
                    <span class='gear-lbl'>Припасы</span>
                    <input type="checkbox" class="gear-box gear-box0" name="attr_gear" value="0" checked="checked">
                    <input type="checkbox" class="gear-box gear-box1" name="attr_gear" value="1"><span class="gear-box1"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="1">
                    <input type="checkbox" class="gear-box gear-box2" name="attr_gear" value="2"><span class="gear-box2"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="2">
                    <input type="checkbox" class="gear-box gear-box3" name="attr_gear" value="3"><span class="gear-box3"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="3">
                    <input type="checkbox" class="gear-box gear-box4" name="attr_gear" value="4"><span class="gear-box4"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="4">
                    <input type="checkbox" class="gear-box gear-box5" name="attr_gear" value="5"><span class="gear-box5"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="5">
                    <input type="checkbox" class="gear-box gear-box6" name="attr_gear" value="6"><span class="gear-box6"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="6">
                    <input type="checkbox" class="gear-box gear-box7" name="attr_gear" value="7"><span class="gear-box7"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="7">
                    <input type="checkbox" class="gear-box gear-box8" name="attr_gear" value="8"><span class="gear-box8"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="8">
                    <input type="checkbox" class="gear-box gear-box9" name="attr_gear" value="9"><span class="gear-box9"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="9">
                    <input type="checkbox" class="gear-box gear-box10" name="attr_gear" value="10"><span class="gear-box10"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="10">
                    <button type="action" class="addgearbutton" name='act_addmaxgear'>&</button>
                    <button type="action" class="sbstrctgearbutton" name='act_subtractmaxgear'>_</button>
                </div>
            </div>

            <div class='fortune'>
                
                <div class='money fortune-container'>
                    <span class='money-lbl'>Благосостояние</span>
                    <input type="checkbox" class="money-box money-box0" name="attr_money" value="0" checked="checked">
                    <input type="checkbox" class="money-box money-box1" name="attr_money" value="1"><span class="money-box1"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="1">
                    <input type="checkbox" class="money-box money-box2" name="attr_money" value="2"><span class="money-box2"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="2">
                    <input type="checkbox" class="money-box money-box3" name="attr_money" value="3"><span class="money-box3"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="3">
                    <input type="checkbox" class="money-box money-box4" name="attr_money" value="4"><span class="money-box4"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="4">
                    <input type="checkbox" class="money-box money-box5" name="attr_money" value="5"><span class="money-box5"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="5">
                    <button type="action" class="addmoneybutton" name='act_addmaxmoney'>&</button>
                    <button type="action" class="sbstrctmoneybutton" name='act_subtractmaxmoney'>_</button>
                </div>

                <div class='wealth fortune-container'>
                    <span class='wealth-lbl'>Фишки прибыли</span>
                    <input type="checkbox" class="wealth-box wealth-box0" name="attr_wealth" value="0" checked="checked">
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="0">
                    <input type="checkbox" class="wealth-box wealth-box1" name="attr_wealth" value="1"><span class="wealth-box1"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="1">
                    <input type="checkbox" class="wealth-box wealth-box2" name="attr_wealth" value="2"><span class="wealth-box2"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="2">
                    <input type="checkbox" class="wealth-box wealth-box3" name="attr_wealth" value="3"><span class="wealth-box3"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="3">
                    <button type="action" class="addwealthbutton" name='act_addmaxwealth'>&</button>
                    <button type="action" class="sbstrctwealthbutton" name='act_subtractmaxwealth'>_</button>
                </div>

                <input type="checkbox" class="is-cyborg-dh-flag" name="attr_isCyborgDishonor">
                <div class='cyborgdishonour fortune-container cyborg-additional'>
                  <span class='cyborgdishonour-lbl'>Бечестье</span>
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box0" name="attr_cyborgdishonour" value="0" checked="checked">
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box1" name="attr_cyborgdishonour" value="1"><span class="cyborgdishonour-box1"></span>
                  <input type="checkbox" class ="cyborgdishonour-max" name="attr_cyborgdishonour_max" value="1">
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box2" name="attr_cyborgdishonour" value="2"><span class="cyborgdishonour-box2"></span>
                  <input type="checkbox" class ="cyborgdishonour-max" name="attr_cyborgdishonour_max" value="2">
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box3" name="attr_cyborgdishonour" value="3"><span class="cyborgdishonour-box3"></span>
                  <input type="checkbox" class ="cyborgdishonour-max" name="attr_cyborgdishonour_max" value="3">
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box4" name="attr_cyborgdishonour" value="4"><span class="cyborgdishonour-box4"></span>
                  <input type="checkbox" class ="cyborgdishonour-max" name="attr_cyborgdishonour_max" value="4">
                  <input type="checkbox" class="cyborgdishonour-box cyborgdishonour-box5" name="attr_cyborgdishonour" value="5"><span class="cyborgdishonour-box5"></span>
                  <input type="checkbox" class ="cyborgdishonour-max" name="attr_cyborgdishonour_max" value="5" checked>
                  <button type="action" class="addcyborgdishonourbutton" name='act_addmaxcyborgdishonour'>&</button>
                  <button type="action" class="sbstrctcyborgdishonourbutton" name='act_subtractmaxcyborgdishonour'>_</button>
                </div>

                <input type="checkbox" class="is-courier-dng-flag" name="attr_isCourierDanger">
                <div class='courierdanger fortune-container courier-additional'>
                  <span class='courierdanger-lbl'>Опасность</span>
                  <input type="checkbox" class="courierdanger-box courierdanger-box0" name="attr_courierdanger" value="0" checked="checked">
                  <input type="checkbox" class="courierdanger-box courierdanger-box1" name="attr_courierdanger" value="1"><span class="courierdanger-box1"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="1">
                  <input type="checkbox" class="courierdanger-box courierdanger-box2" name="attr_courierdanger" value="2"><span class="courierdanger-box2"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="2">
                  <input type="checkbox" class="courierdanger-box courierdanger-box3" name="attr_courierdanger" value="3"><span class="courierdanger-box3"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="3">
                  <input type="checkbox" class="courierdanger-box courierdanger-box4" name="attr_courierdanger" value="4"><span class="courierdanger-box4"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="4">
                  <input type="checkbox" class="courierdanger-box courierdanger-box5" name="attr_courierdanger" value="5"><span class="courierdanger-box5"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="5" checked>
                  <input type="checkbox" class="courierdanger-box courierdanger-box6" name="attr_courierdanger" value="6"><span class="courierdanger-box6"></span>
                  <input type="checkbox" class ="courierdanger-max" name="attr_courierdanger_max" value="6">
                  <button type="action" class="addcourierdangerbutton" name='act_addmaxcourierdanger'>&</button>
                  <button type="action" class="sbstrctcourierdangerbutton" name='act_subtractmaxcourierdanger'>_</button>
                </div>

                <input type="checkbox" class="is-mercenary-death-flag" name="attr_isMervenaryDeath">
                <div class='mercenarydeath fortune-container mercenary-additional'>
                  <span class='mercenarydeath-lbl'>Смерть</span>
                  <input type="checkbox" class="mercenarydeath-box mercenarydeath-box0" name="attr_mercenarydeath" value="0" checked="checked">
                  <input type="checkbox" class="mercenarydeath-box mercenarydeath-box1" name="attr_mercenarydeath" value="1"><span class="mercenarydeath-box1"></span>
                  <input type="checkbox" class ="mercenarydeath-max" name="attr_mercenarydeath_max" value="1" checked>
                </div>

                <input type="checkbox" class="is-stranger-fvr-flag" name="attr_isStrangerFavor">
                <div class='strangerfavor fortune-container stranger-additional'>
                  <span class='strangerfavor-lbl'>Благосклонность</span>
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box0" name="attr_strangerfavor" value="0" checked="checked">
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box1" name="attr_strangerfavor" value="1"><span class="strangerfavor-box1"></span>
                  <input type="checkbox" class ="strangerfavor-max" name="attr_strangerfavor_max" value="1">
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box2" name="attr_strangerfavor" value="2"><span class="strangerfavor-box2"></span>
                  <input type="checkbox" class ="strangerfavor-max" name="attr_strangerfavor_max" value="2">
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box3" name="attr_strangerfavor" value="3"><span class="strangerfavor-box3"></span>
                  <input type="checkbox" class ="strangerfavor-max" name="attr_strangerfavor_max" value="3">
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box4" name="attr_strangerfavor" value="4"><span class="strangerfavor-box4"></span>
                  <input type="checkbox" class ="strangerfavor-max" name="attr_strangerfavor_max" value="4" checked>
                  <input type="checkbox" class="strangerfavor-box strangerfavor-box5" name="attr_strangerfavor" value="5"><span class="strangerfavor-box5"></span>
                  <input type="checkbox" class ="strangerfavor-max" name="attr_strangerfavor_max" value="5">
                  <button type="action" class="addstrangerfavorbutton" name='act_addmaxstrangerfavor'>&</button>
                  <button type="action" class="sbstrctstrangerfavorbutton" name='act_subtractmaxstrangerfavor'>_</button>
                </div>

                <input type="checkbox" class="is-supernova-imp-flag" name="attr_isSupernovaImpro">
                <div class='supernovaimpro fortune-container supernova-additional'>
                  <span class='supernovaimpro-lbl'>Импровизация</span>
                  <input type="checkbox" class="supernovaimpro-box supernovaimpro-box0" name="attr_supernovaimpro" value="0" checked="checked">
                  <input type="checkbox" class="supernovaimpro-box supernovaimpro-box1" name="attr_supernovaimpro" value="1"><span class="supernovaimpro-box1"></span>
                  <input type="checkbox" class ="supernovaimpro-max" name="attr_supernovaimpro_max" value="1">
                  <input type="checkbox" class="supernovaimpro-box supernovaimpro-box2" name="attr_supernovaimpro" value="2"><span class="supernovaimpro-box2"></span>
                  <input type="checkbox" class ="supernovaimpro-max" name="attr_supernovaimpro_max" value="2">
                  <input type="checkbox" class="supernovaimpro-box supernovaimpro-box3" name="attr_supernovaimpro" value="3"><span class="supernovaimpro-box3"></span>
                  <input type="checkbox" class ="supernovaimpro-max" name="attr_supernovaimpro_max" value="3" checked>
                </div>

                <input type="checkbox" class="is-juggernaut-adr-flag" name="attr_isJuggernautAdrenaline">
                <div class='juggernautadrenaline fortune-container juggernaut-additional'>
                  <span class='juggernautadrenaline-lbl'>Адреналин</span>
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box0" name="attr_juggernautadrenaline" value="0" checked="checked">
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box1" name="attr_juggernautadrenaline" value="1"><span class="juggernautadrenaline-box1"></span>
                  <input type="checkbox" class ="juggernautadrenaline-max" name="attr_juggernautadrenaline_max" value="1">
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box2" name="attr_juggernautadrenaline" value="2"><span class="juggernautadrenaline-box2"></span>
                  <input type="checkbox" class ="juggernautadrenaline-max" name="attr_juggernautadrenaline_max" value="2">
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box3" name="attr_juggernautadrenaline" value="3"><span class="juggernautadrenaline-box3"></span>
                  <input type="checkbox" class ="juggernautadrenaline-max" name="attr_juggernautadrenaline_max" value="3">
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box4" name="attr_juggernautadrenaline" value="4"><span class="juggernautadrenaline-box4"></span>
                  <input type="checkbox" class ="juggernautadrenaline-max" name="attr_juggernautadrenaline_max" value="4">
                  <input type="checkbox" class="juggernautadrenaline-box juggernautadrenaline-box5" name="attr_juggernautadrenaline" value="5"><span class="juggernautadrenaline-box5"></span>
                  <input type="checkbox" class ="juggernautadrenaline-max" name="attr_juggernautadrenaline_max" value="5" checked>
                </div>

                <input type="checkbox" class="is-digitaldao-ovr-flag" name="attr_isDigitaldaoOverload">
                <div class='digitaldaooverload fortune-container digitaldao-additional'>
                  <span class='digitaldaooverload-lbl'>Перегрузка</span>
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box0" name="attr_digitaldaooverload" value="0" checked="checked">
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box1" name="attr_digitaldaooverload" value="1"><span class="digitaldaooverload-box1"></span>
                  <input type="checkbox" class ="digitaldaooverload-max" name="attr_digitaldaooverload_max" value="1">
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box2" name="attr_digitaldaooverload" value="2"><span class="digitaldaooverload-box2"></span>
                  <input type="checkbox" class ="digitaldaooverload-max" name="attr_digitaldaooverload_max" value="2">
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box3" name="attr_digitaldaooverload" value="3"><span class="digitaldaooverload-box3"></span>
                  <input type="checkbox" class ="digitaldaooverload-max" name="attr_digitaldaooverload_max" value="3">
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box4" name="attr_digitaldaooverload" value="4"><span class="digitaldaooverload-box4"></span>
                  <input type="checkbox" class ="digitaldaooverload-max" name="attr_digitaldaooverload_max" value="4">
                  <input type="checkbox" class="digitaldaooverload-box digitaldaooverload-box5" name="attr_digitaldaooverload" value="5"><span class="digitaldaooverload-box5"></span>
                  <input type="checkbox" class ="digitaldaooverload-max" name="attr_digitaldaooverload_max" value="5" checked>
                </div>

                <input type="checkbox" class="is-emissary-st-flag" name="attr_isEmissaryStatus">
                <div class='emissarystatus fortune-container emissary-additional'>
                  <span class='emissarystatus-lbl'>Статус</span>
                  <input type="checkbox" class="emissarystatus-box emissarystatus-box0" name="attr_emissarystatus" value="0" checked="checked">
                  <input type="checkbox" class="emissarystatus-box emissarystatus-box1" name="attr_emissarystatus" value="1"><span class="emissarystatus-box1"></span>
                  <input type="checkbox" class ="emissarystatus-max" name="attr_emissarystatus_max" value="1">
                  <input type="checkbox" class="emissarystatus-box emissarystatus-box2" name="attr_emissarystatus" value="2"><span class="emissarystatus-box2"></span>
                  <input type="checkbox" class ="emissarystatus-max" name="attr_emissarystatus_max" value="2">
                  <input type="checkbox" class="emissarystatus-box emissarystatus-box3" name="attr_emissarystatus" value="3"><span class="emissarystatus-box3"></span>
                  <input type="checkbox" class ="emissarystatus-max" name="attr_emissarystatus_max" value="3" checked>
                </div>

                <input type="checkbox" class="is-raelith-fd-flag" name="attr_isRaelithFade">
                <div class='raelithfade fortune-container raelith-additional'>
                  <span class='raelithfade-lbl'>Угасание</span>
                  <input type="checkbox" class="raelithfade-box raelithfade-box0" name="attr_raelithfade" value="0" checked="checked">
                  <input type="checkbox" class="raelithfade-box raelithfade-box1" name="attr_raelithfade" value="1"><span class="raelithfade-box1"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="1">
                  <input type="checkbox" class="raelithfade-box raelithfade-box2" name="attr_raelithfade" value="2"><span class="raelithfade-box2"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="2">
                  <input type="checkbox" class="raelithfade-box raelithfade-box3" name="attr_raelithfade" value="3"><span class="raelithfade-box3"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="3">
                  <input type="checkbox" class="raelithfade-box raelithfade-box4" name="attr_raelithfade" value="4"><span class="raelithfade-box4"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="4">
                  <input type="checkbox" class="raelithfade-box raelithfade-box5" name="attr_raelithfade" value="5"><span class="raelithfade-box5"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="5">
                  <input type="checkbox" class="raelithfade-box raelithfade-box6" name="attr_raelithfade" value="6"><span class="raelithfade-box6"></span>
                  <input type="checkbox" class ="raelithfade-max" name="attr_raelithfade_max" value="6" checked>
                </div>
            </div>
        </div>

        <div class='inventory'>
            <span class='inventory-label'>Снаряжение</span>
            <fieldset class="repeating_inventory">
                <div class="inventory-main">
                    <input type="text" name="attr_inventory_simple" />
                    <input class="expander expand-inventory" type="checkbox" name="attr_expand_inventory" value="1" title="Expand for additional notes" checked="checked" />
                    <span> </span>
                    <div class="inventory-expansion">
                        <textarea name="attr_inventory_details"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="bonds">
            <span class='bonds-label'>Связи</span>
            <fieldset class="repeating_bonds">
                <div class="bonds-main">
                    <span>Имя:</span>
                    <input type="text" name="attr_bond_simple" />
                    <input class="expander expand-bond" type="checkbox" name="attr_expand_bond" value="1" title="Expand for additional notes" checked="checked" />
                    <span> </span>
                    <div class="bond-expansion">
                        <textarea name="attr_bond_details"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class='notes'>
            <span class='notes-label'>Заметки</span>
            <textarea class="notes-input" name='attr_notes'></textarea>
        </div>
    </div>

    <div class="page page3">
        <div class="moves-navigation">
            
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="own" checked="checked">
                <span>Буклет</span>
            </label>
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="base">
                <span>Базовые</span>
            </label>
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="optional">
                <span>Опциональные</span>
            </label>
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="space">
                <span>Космические</span>
            </label>

            <input type="checkbox" class="is-cyborg-imp-flag" name="attr_isCyborgImplants">
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="implants">
                <span>Импланты</span>
            </label>

            <input type="checkbox" class="is-daredevil-tech-flag" name="attr_isDaredevilTech">
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="tech">
                <span>Техника</span>
            </label>

            <input type="checkbox" class="is-engineer-probe-flag" name="attr_isEngineerProbe">
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="probe">
                <span>Зонд</span>
            </label>
            
            <input type="checkbox" class="is-manofsteel-armor-flag" name="attr_isManofsteelArmor">
            <label class="nav-moves-button">
                <input type="radio"  name="attr_moves_page" value="armor">
                <span>Экзоскелет</span>
            </label>
            
        </div>
        <input type='hidden' class='tabstoggle' name='attr_moveTab'  value='own'/>

        <div class="moves-container moves-own">
            <div class="moves">
                <fieldset class="repeating_moves">
                    <div class="move-main">
                        <input type="checkbox" class="expand-hidden expand-description" name="attr_expanddescriptionval" value="1" title="Details"  />
                        <input type="checkbox" class="expand-hidden expand-settings" name="attr_expandsettingsval" value="1" title="Settings"/>
                        <input type="checkbox" class="expand-hidden expand-optional" name="attr_expandoptionalval" value="1" title="Optional"/>

                        <div class='move-title'>
                            <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=@{movename_base}}} {{trigger=@{movetrigger}}} {{success=@{movesuccess}}} {{partial=@{movepartial}}} {{miss=@{movemiss}}} {{doroll=[[@{move_doroll}]]}} {{result=[[2d6 + @{movestat} + (@{bonus})[bonus]]]}} {{details=@{movedetails}}} {{opt1=[[@{opt1}]]}}  {{opt1name=@{opt1name}}} {{opt1details=@{opt1details}}} {{opt2=[[@{opt2}]]}}  {{opt2name=@{opt2name}}} {{opt2details=@{opt2details}}} {{opt3=[[@{opt3}]]}}  {{opt3name=@{opt3name}}} {{opt3details=@{opt3details}}} {{opt4=[[@{opt4}]]}}  {{opt4name=@{opt4name}}} {{opt4details=@{opt4details}}} {{opt5=[[@{opt5}]]}}  {{opt5name=@{opt5name}}} {{opt5details=@{opt5details}}} {{opt6=[[@{opt6}]]}}  {{opt6name=@{opt6name}}} {{opt6details=@{opt6details}}}">
                                <span>Lo</span>
                            </button>
                            <span class="rolltext" name="attr_move_name" value="@{move_name}"></span>
                            <button type="action" name="act_expanddescription" class="expand-move">
                                <span class="expanded">▼</span>
                                <span class="not-expanded">◀</span>
                            </button>
                            <button type='action' name='act_expandsettings'  class='change-move'>
                                <span class='change'>p</span>
                                <span class='save'>3</span>
                            </button>
                            <input type="checkbox" class="expand-hidden show-expand-optional" name="attr_showexpandmoveoptional" value="1">
                            <button type='action' name='act_expandoptional'  class='optional-move'>
                                <span class='open'>l</span>
                                <span class='close'>l</span>
                            </button>
                        </div>
        
                        <div class="move-expansion">
                            <div class='move-expansion-name'>
                                <span class="label">Move Name:</span>
                                <input type="text" name="attr_movename_base" value="" />
                            </div>
                            <div class='move-expansion-when'>
                                <span class="label">Когда:</span>
                                <br>
                                <textarea type="text" name="attr_movetrigger"></textarea>
                            </div>
                            <div class='move-expansion-roll'>
                                <input class="enable-roll" type="checkbox" name="attr_move_doroll" value="1" checked="checked" />
                                <input type="hidden" name="attr_movestat" value="0[no stat]">
                                <span class="label">Проверь:</span>
                                    <select class="moveroll" name="attr_movestat_name">
                                        <option selected="selected">--</option>
                                        <option>Ярость</option>
                                        <option>Контроль</option>
                                        <option>Навык</option>
                                        <option>Репутация</option>
                                        <option>Благосостояние</option>
                                        <option>?</option>
                                        <option>Связь</option>
                                    </select>
                                <div class="rollresults-container">
                                    <span class="label">Успех (10+):</span>
                                    <br>
                                    <textarea type="text" name="attr_movesuccess"></textarea>
                                    <span class="label">Частичный успех (7-9):</span>
                                    <br>
                                    <textarea type="text" name="attr_movepartial"></textarea>
                                    <span class="label">Провал (6-):</span>
                                    <br>
                                    <textarea type="text" name="attr_movemiss"></textarea>
                                </div>
                            </div>
                            <div class='move-expansion-extra'>
                                <span class="label">Описание:</span>
                                <br />
                                <textarea class="move-details" name="attr_movedetails"></textarea>
                            </div>
                            <div class='move-expansion-optional'>
                                <input type="checkbox" class="show-expand-optional" name="attr_showexpandmoveoptional" value="1">
                                <span class="label">Опции:</span>
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_showopt1" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt1name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt1details"></textarea>
                                    <br />
                                    <input type="checkbox" class="move-opt" name="attr_showopt2" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt2name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt2details"></textarea>
                                    <br />
                                    <input type="checkbox" class="move-opt" name="attr_showopt3" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt3name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt3details"></textarea>
                                    <br />
                                    <input type="checkbox" class="move-opt" name="attr_showopt4" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt4name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt4details"></textarea>
                                    <br />
                                    <input type="checkbox" class="move-opt" name="attr_showopt5" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt5name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt5details"></textarea>
                                    <br />
                                    <input type="checkbox" class="move-opt" name="attr_showopt6" value="1" checked="true">
                                    <input type="text" class='name' name="attr_opt6name"></span>:
                                    <textarea class="move-opt-details" class='detail' name="attr_opt6details"></textarea>
                                    <br />
                                </div>
                            </div>
                        </div>
                        
                        <div class='move-description'>
                            <textarea name='attr_movetext' readonly='true'></textarea>
                        </div>

                        
                        <div class='move-optional'>
                            <input type="textarea" class="hidden optional-text" name="attr_moveoptional">
                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt1" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt1" value="1">
                                <span class='name' name="attr_opt1name"></span>:
                                <span class='detail' name="attr_opt1details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt2" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt2" value="1">
                                <span class='name' name="attr_opt2name"></span>:
                                <span class='detail' name="attr_opt2details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt3" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt3" value="1">
                                <span class='name' name="attr_opt3name"></span>:
                                <span class='detail' name="attr_opt3details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt4" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt4" value="1">
                                <span class='name' name="attr_opt4name"></span>:
                                <span class='detail' name="attr_opt4details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt5" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt5" value="1">
                                <span class='name' name="attr_opt5name"></span>:
                                <span class='detail' name="attr_opt5details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt6" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt6" value="1">
                                <span class='name' name="attr_opt6name"></span>:
                                <span class='detail' name="attr_opt6details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt7" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt7" value="1">
                                <span class='name' name="attr_opt7name"></span>:
                                <span class='detail' name="attr_opt7details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt8" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt8" value="1">
                                <span class='name' name="attr_opt8name"></span>:
                                <span class='detail' name="attr_opt8details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt9" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt9" value="1">
                                <span class='name' name="attr_opt9name"></span>:
                                <span class='detail' name="attr_opt9details"></span>
                            </div>

                            <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt10" value="1">
                            <div>
                                <input type="checkbox" class="move-opt" name="attr_opt10" value="1">
                                <span class='name' name="attr_opt10name"></span>:
                                <span class='detail' name="attr_opt10details"></span>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>

            <div class="moves-upgrade">
              <input type="checkbox" class="expand-hidden" name="attr_expand_upgrade" value="1" checked="true">

              <div class="moves-upgrade-title">
                  <h3><span>Повышения</span></h3>
                  <button type="action" name="act_expand_upgrade" class="expand-upgrade">
                      <span class="expanded">▼</span>
                      <span class="notexpanded">◀</span>
                  </button>
              </div>

              <div class="moves-upgrade-body">
                <input type="checkbox" class="hidden" name="attr_filter-all">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab0" value="All" title="All" checked/>
                <span class="sheet-tab sheet-moves-tab0">Все</span>
                <input type="checkbox" class="hidden" name="attr_filter-noble">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab1" value="Noble" title="Noble"/>
                <span class="sheet-tab sheet-moves-tab1">Аристократ</span>
                <input type="checkbox" class="hidden" name="attr_filter-cyborg">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab2" value="Cyborg" title="Cyborg"/>
                <span class="sheet-tab sheet-moves-tab2">Киборг</span>
                <input type="checkbox" class="hidden" name="attr_filter-companion">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab3" value="Companion" title="Companion"/>
                <span class="sheet-tab sheet-moves-tab3">Компаньонка</span>
                <input type="checkbox" class="hidden" name="attr_filter-courier">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab4" value="Courier" title="Courier"/>
                <span class="sheet-tab sheet-moves-tab4">Курьер</span>
                <input type="checkbox" class="hidden" name="attr_filter-mercenary">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab5" value="Mercenary" title="Mercenary"/>
                <span class="sheet-tab sheet-moves-tab5">Наёмник</span>
                <input type="checkbox" class="hidden" name="attr_filter-tactician">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab6" value="Tactician" title="Tactician"/>
                <span class="sheet-tab sheet-moves-tab6">Тактик</span>
                <input type="checkbox" class="hidden" name="attr_filter-daredevil">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab7" value="Daredevil" title="Daredevil"/>
                <span class="sheet-tab sheet-moves-tab7">Сорвиголова</span>
                <input type="checkbox" class="hidden" name="attr_filter-stranger">
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab8" value="Stranger" title="Stranger"/>
                <span class="sheet-tab sheet-moves-tab8">Странник</span>
                <input type="checkbox" class="hidden" name="attr_filter-shadow">       
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab9" value="Shadow" title="Shadow"/>
                <span class="sheet-tab sheet-moves-tab9">Тень</span>
                <input type="checkbox" class="hidden" name="attr_filter-manofsteel">    
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab10" value="Manofsteel" title="Manofsteel"/>
                <span class="sheet-tab sheet-moves-tab10">Броненосец</span>  
                <input type="checkbox" class="hidden" name="attr_filter-bountyhunter">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab11" value="Bountyhunter" title="Bountyhunter"/>
                <span class="sheet-tab sheet-moves-tab11">Охотник за головами</span>
                <input type="checkbox" class="hidden" name="attr_filter-supernova">    
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab12" value="Supernova" title="Supernova"/>
                <span class="sheet-tab sheet-moves-tab12">Сверхновая</span> 
                <input type="checkbox" class="hidden" name="attr_filter-cenzor"> 
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab13" value="Cenzor" title="Cenzor"/>
                <span class="sheet-tab sheet-moves-tab13">Цензор</span>
                <input type="checkbox" class="hidden" name="attr_filter-engineer">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab14" value="Engineer" title="Engineer"/>
                <span class="sheet-tab sheet-moves-tab14">Инженер</span>
                <input type="checkbox" class="hidden" name="attr_filter-doctor">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab15" value="Doctor" title="Doctor"/>
                <span class="sheet-tab sheet-moves-tab15">Доктор</span>
                <input type="checkbox" class="hidden" name="attr_filter-juggernaut">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab16" value="Juggernaut" title="Juggernaut"/>
                <span class="sheet-tab sheet-moves-tab16">Джаггернаут</span>
                <input type="checkbox" class="hidden" name="attr_filter-kinetick">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab17" value="Kinetick" title="Kinetick"/>
                <span class="sheet-tab sheet-moves-tab17">Кинетик</span>
                <input type="checkbox" class="hidden" name="attr_filter-digitaldao">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab18" value="DigitalDao" title="DigitalDao"/>
                <span class="sheet-tab sheet-moves-tab18">Дао Цифры</span>
                <input type="checkbox" class="hidden" name="attr_filter-emissary">  
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab19" value="Emissary" title="Emissary"/>
                <span class="sheet-tab sheet-moves-tab19">Эмиссар</span>
                <input type="checkbox" class="hidden" name="attr_filter-psychomant"> 
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab20" value="Psychomant" title="Psychomant"/>
                <span class="sheet-tab sheet-moves-tab20">Психомант</span>
                <input type="checkbox" class="hidden" name="attr_filter-raelith"> 
                <input type="radio" name="attr_tab-moves" class="sheet-tab sheet-moves-tab21" value="Raelith" title="Raelith"/>
                <span class="sheet-tab sheet-moves-tab21">Раэлит</span> 

                <div class="sheet-section-moves-upgrade-list">
                    <fieldset class="repeating_moves-upgrade">
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab0" value="All" checked />
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab1" value="Noble"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab2" value="Cyborg"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab3" value="Companion"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab4" value="Courier"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab5" value="Mercenary"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab6" value="Tactician"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab7" value="Daredevil"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab8" value="Stranger"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab9" value="Shadow"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab10" value="Manofsteel"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab11" value="Bountyhunter"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab12" value="Supernova"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab13" value="Cenzor"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab14" value="Engineer"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab15" value="Doctor"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab16" value="Juggernaut"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab17" value="Kinetick"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab18" value="DigitalDao"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab19" value="Emissary"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab20" value="Psychomant"/>
                        <input type="radio" name="attr_moveclass" class="sheet-hidden sheet-moves-tab21" value="Raelith"/>

                        <div class="sheet-move-filtered-box">
                            <input type="checkbox" class="expand-hidden expand-description" name="attr_expanddescriptionval" value="1" title="Details"  />
                            <input type="checkbox" class="expand-hidden expand-settings" name="attr_expandsettingsval" value="1" title="Settings"/>
                            <input type="checkbox" class="expand-hidden expand-optional" name="attr_expandoptionalval" value="1" title="Optional"/>
    
                            <div class='move-title'>
                                <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=@{movename_base}}} {{trigger=@{movetrigger}}} {{success=@{movesuccess}}} {{partial=@{movepartial}}} {{miss=@{movemiss}}} {{doroll=[[@{move_doroll}]]}} {{result=[[2d6 + @{movestat} + (@{bonus})[bonus]]]}} {{details=@{movedetails}}} {{opt1=[[@{opt1}]]}}  {{opt1name=@{opt1name}}} {{opt1details=@{opt1details}}} {{opt2=[[@{opt2}]]}}  {{opt2name=@{opt2name}}} {{opt2details=@{opt2details}}} {{opt3=[[@{opt3}]]}}  {{opt3name=@{opt3name}}} {{opt3details=@{opt3details}}} {{opt4=[[@{opt4}]]}}  {{opt4name=@{opt4name}}} {{opt4details=@{opt4details}}} {{opt5=[[@{opt5}]]}}  {{opt5name=@{opt5name}}} {{opt5details=@{opt5details}}} {{opt6=[[@{opt6}]]}}  {{opt6name=@{opt6name}}} {{opt6details=@{opt6details}}}">
                                    <span>Lo</span>
                                </button>

                                <button type="action" name="act_addmove" class='add-move'>+</button>

                                <span class="rolltext" name="attr_move_name" value="@{move_name}"></span>
                                <button type="action" name="act_expanddescription" class="expand-move">
                                    <span class="expanded">▼</span>
                                    <span class="not-expanded">◀</span>
                                </button>
                                <button type='action' name='act_expandsettings'  class='change-move'>
                                    <span class='change'>p</span>
                                    <span class='save'>3</span>
                                </button>
                                <input type="checkbox" class="expand-hidden show-expand-optional" name="attr_showexpandmoveoptional" value="1">
                                <button type='action' name='act_expandoptional'  class='optional-move'>
                                    <span class='open'>l</span>
                                    <span class='close'>l</span>
                                </button>
                            </div>
            
                            <div class="move-expansion">
                                <div class='move-expansion-name'>
                                    <span class="label">Move Name:</span>
                                    <input type="text" name="attr_movename_base" value="" />
                                </div>
                                <div class='move-expansion-when'>
                                    <span class="label">Когда:</span>
                                    <br>
                                    <textarea type="text" name="attr_movetrigger"></textarea>
                                </div>
                                <div class='move-expansion-roll'>
                                    <input class="enable-roll" type="checkbox" name="attr_move_doroll" value="1" checked="checked" />
                                    <input type="hidden" name="attr_movestat" value="0">
                                    <span class="label">Проверь:</span>
                                        <select class="moveroll" name="attr_movestat_name">
                                            <option selected="selected">--</option>
                                            <option>Ярость</option>
                                            <option>Контроль</option>
                                            <option>Навык</option>
                                            <option>Репутация</option>
                                            <option>Благосостояние</option>
                                            <option>?</option>
                                            <option>Связь</option>
                                        </select>
                                    <div class="rollresults-container">
                                        <span class="label">Успех (10+):</span>
                                        <br>
                                        <textarea type="text" name="attr_movesuccess"></textarea>
                                        <span class="label">Частичный успех (7-9):</span>
                                        <br>
                                        <textarea type="text" name="attr_movepartial"></textarea>
                                        <span class="label">Провал (6-):</span>
                                        <br>
                                        <textarea type="text" name="attr_movemiss"></textarea>
                                    </div>
                                </div>
                                <div class='move-expansion-extra'>
                                    <span class="label">Описание:</span>
                                    <br />
                                    <textarea class="move-details" name="attr_movedetails"></textarea>
                                </div>
                                <div class='move-expansion-optional'>
                                    <input type="checkbox" class="show-expand-optional" name="attr_showexpandmoveoptional" value="1">
                                    <span class="label">Опции:</span>
                                    <div>
                                        <input type="checkbox" class="move-opt" name="attr_showopt1" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt1name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt1details"></textarea>
                                        <br />
                                        <input type="checkbox" class="move-opt" name="attr_showopt2" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt2name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt2details"></textarea>
                                        <br />
                                        <input type="checkbox" class="move-opt" name="attr_showopt3" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt3name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt3details"></textarea>
                                        <br />
                                        <input type="checkbox" class="move-opt" name="attr_showopt4" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt4name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt4details"></textarea>
                                        <br />
                                        <input type="checkbox" class="move-opt" name="attr_showopt5" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt5name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt5details"></textarea>
                                        <br />
                                        <input type="checkbox" class="move-opt" name="attr_showopt6" value="1" checked="true">
                                        <input type="text" class='name' name="attr_opt6name"></span>:
                                        <textarea class="move-opt-details" class='detail' name="attr_opt6details"></textarea>
                                        <br />
                                    </div>
                                </div>
                            </div>
                            
                            <div class='move-description'>
                                <textarea name='attr_movetext' readonly='true'></textarea>
                            </div>
    
                            <div class='move-optional'>
                                <input type="textarea" class="hidden optional-text" name="attr_moveoptional">
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt1" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt1" value="1">
                                    <span class='name' name="attr_opt1name"></span>:
                                    <span class='detail' name="attr_opt1details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt2" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt2" value="1">
                                    <span class='name' name="attr_opt2name"></span>:
                                    <span class='detail' name="attr_opt2details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt3" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt3" value="1">
                                    <span class='name' name="attr_opt3name"></span>:
                                    <span class='detail' name="attr_opt3details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt4" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt4" value="1">
                                    <span class='name' name="attr_opt4name"></span>:
                                    <span class='detail' name="attr_opt4details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt5" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt5" value="1">
                                    <span class='name' name="attr_opt5name"></span>:
                                    <span class='detail' name="attr_opt5details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt6" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt6" value="1">
                                    <span class='name' name="attr_opt6name"></span>:
                                    <span class='detail' name="attr_opt6details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt7" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt7" value="1">
                                    <span class='name' name="attr_opt7name"></span>:
                                    <span class='detail' name="attr_opt7details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt8" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt8" value="1">
                                    <span class='name' name="attr_opt8name"></span>:
                                    <span class='detail' name="attr_opt8details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt9" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt9" value="1">
                                    <span class='name' name="attr_opt9name"></span>:
                                    <span class='detail' name="attr_opt9details"></span>
                                </div>
    
                                <input type="checkbox" class="is-hidden-move-opt" name="attr_showopt10" value="1">
                                <div>
                                    <input type="checkbox" class="move-opt" name="attr_opt10" value="1">
                                    <span class='name' name="attr_opt10name"></span>:
                                    <span class='detail' name="attr_opt10details"></span>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>

              </div>

            </div>
        </div>

        <div class="moves-container moves-base moves-fixed">
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  СРАЖАЕШЬСЯ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=СРАЖАЕШЬСЯ}} {{trigger=Когда ты атакуешь противника}} {{success=нанеси противнику свой урон или получи небольшое преимущество, но и пострадай: получи урон от противника (или из другого источника) или лишись чего-то важного и выбери 1:}} {{partial=нанеси противнику свой урон или получи небольшое преимущество, но и пострадай: получи урон от противника (или из другого источника) или лишись чего-то важного}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]} + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[10]]}} {{successOpt1Max=[[100]]}} {{successOpt1Text=Ты не получаешь вреда}} {{successOpt2Min=[[10]]}} {{successOpt2Max=[[100]]}} {{successOpt2Text=Ты наносишь урон +1}} {{successOpt3Min=[[10]]}} {{successOpt3Max=[[100]]}} {{successOpt3Text=Защита противника падает на 1}} {{successOpt4Min=[[10]]}} {{successOpt4Max=[[100]]}} {{successOpt4Text=Противник совершает ошибку (опиши ее)}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты атакуешь противника, проверь:</p>
                <ul class="level-1-list">
                  <li class="arrowed-list-item">Ярость, если сражаешься в ближнем бою;</li>
                  <li class="arrowed-list-item">Контроль, если применяешь дистанционное оружие.</li>
                </ul>
                <p>На 7—9 нанеси противнику свой урон или получи небольшое преимущество, но и пострадай: получи урон от противника (или из другого источника) или лишись чего-то важного. На 10+ то же самое, но выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Ты не получаешь вреда;</li>
                  <li class="disc-list-item">Ты наносишь Урон +1;</li>
                  <li class="disc-list-item">Защита противника падает на 1;</li>
                  <li class="disc-list-item">Противник совершает ошибку (опиши её)</li>
                </ul>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ЗАЩИЩАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ЗАЩИЩАЕШЬ}} {{trigger=Когда ты защищаешь человека, вещь или место}} {{success=возьми 3 фишки}} {{partial=возьми 1 фишку}} {{details=Когда находящегося под твоей защитой атакуют, потрать 1 фишку и выбери 1 из списка}} {{doroll=[[1]]}} {{result=[[2d6 + (@{controll})[controll] + (@{bonus})[bonus]]]}} {{opt1=[[1]]}} {{opt1details=Противник атакует тебя вместо цели}} {{opt2=[[1]]}} {{opt2details=Защита цели увеличивается на 1}} {{opt3=[[1]]}} {{opt3details=Дай союзнику +1 на следующее действие}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>защищаешь</b> человека, вещь или место, проверь Контроль. На 10+ возьми 3 фишки. На 7—9 возьми 1 фишку. Когда находящегося под твоей защитой атакуют, потрать 1 фишку и выбери 1 из списка:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Противник атакует тебя вместо цели;</li>
                  <li class="disc-list-item">Защита цели увеличивается на 1;</li> 
                  <li class="disc-list-item">Дай союзнику +1 на следующее действие.</li>
                </ul>
                <p>Фишки исчезают, когда бой заканчивается или принципиально меняется.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ИГНОРИРУЕШЬ УГРОЗУ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ИГНОРИРУЕШЬ УГРОЗУ}} {{trigger=Когда ты действуешь, игнорируя угрозу, или подвергаешься опасности}} {{success=ты избегаешь угрозы}} {{partial=ты избегаешь угрозы,но что-то пошло не так. Ты чем-то жертвуешь, сталкиваешься со сложным выбором или дополнительными проблемами}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]|Навык,(@{skill})[skill]|Репутация,(@{reputation})[reputation]} + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>действуешь, игнорируя угрозу</b>, или <b>подвергаешься опасности</b>, скажи, как ты справляешься с этим, и проверь:</p>
                <ul class="level-1-list">
                  <li class="arrowed-list-item">Ярость, если рвёшься напролом, полагаясь на силу и выносливость;</li>
                  <li class="arrowed-list-item">Контроль, если превозмогаешь с помощью силы воли и самоконтроля;</li>
                  <li class="arrowed-list-item">Навык, если применяешь свои знания, умения или таланты;</li>
                  <li class="arrowed-list-item">Репутацию, если используешь связи, обаяние или харизму.</li>
                </ul>
                <p>На 10+ ты избегаешь угрозы. На 7—9 то же самое, но что-то пошло не так. Ты чем-то жертвуешь, сталкиваешься со сложным выбором или дополнительными проблемами.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  РАНИШЬ ИЛИ ПОЛУЧАЕШЬ РАНЫ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:harm} {{charname=@{character_name}}} {{number=[[?{dices|1|2|3|4|5|6|7|8|9|10}]]}} {{result1=[[d6]]}} {{result2=[[d6]]}} {{result3=[[d6]]}} {{result4=[[d6]]}} {{result5=[[d6]]}} {{result6=[[d6]]}} {{result7=[[d6]]}} {{result8=[[d6]]}} {{result9=[[d6]]}} {{result10=[[d6]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>получаешь или наносишь урон</b> брось 1 кубик за каждую единицу урона.</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">на 1—3 получи половину ранения;</li>
                  <li class="disc-list-item">на 4—5 получи 1 ранение;</li>
                  <li class="disc-list-item">на 6 получи 2 ранения.</li>
                </ul>
                <p>Половинки ранений складываются, но лишние — сгорают. Если ты получаешь 2,5 ранения, в итоге ты получишь всего 2 ранения.</p>
                <p>Вычти из количества полученных ранений твою защиту, и за каждое оставшееся зачеркни ячейку на буклете. Если ты зачёркиваешь последнюю ячейку—ты в Критическом ранении. Получи –1 на все броски.</p>
                <p>Обычные ранения восстанавливаются за сутки отдыха, а Критическое — за 5-8 дней.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  УМИРАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=УМИРАЕШЬ}} {{trigger=Когда у тебя нет свободных ячеек ранений, и ты получаешь ещё ранения}} {{success=раны очень серьёзные, но более твоей жизни ничего не угрожает}} {{partial=ты истекаешь кровью. Если в ближайшее время ты не получишь медицинскую помощь, твои приключения закончатся навсегда}} {{miss=тебе не повезло. У твоих соратников есть всего один шанс спасти тебя, и времени для этого отпущено лишь пара-тройка секунд}} {{doroll=[[1]]}} {{result=[[2d6 + (@{controll})[controll] + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда <b>у тебя нет свободных ячеек ранений, и ты получаешь ещё ранения</b> потеряй сознание и проверь Контроль. На 10+ раны очень серьёзные, но более твоей жизни ничего не угрожает.</p>
                <p>На 7—9 ты истекаешь кровью. Если в ближайшее время ты не получишь медицинскую помощь, твои приключения закончатся навсегда.</p>
                <p>На 6 — тебе не повезло. У твоих соратников есть всего один шанс спасти тебя, и времени для этого отпущено лишь пара-тройка секунд.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ОКАЗЫВАЕШЬ ПЕРВУЮ ПОМОЩЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ОКАЗЫВАЕШЬ ПЕРВУЮ ПОМОЩЬ}} {{trigger=Когда ты не даешь соратнику умереть}} {{success=ты стабилизируешь пациента}} {{partial=ты стабилизируешь пациента, но подвергаешься угрозе}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill})[skill] + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>не даешь соратнику умереть</b> проверь Навык. На 10+ ты стабилизируешь пациента. На 7—9 то же самое, но ты подвергаешься угрозе.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ТЕРЯЕШЬ КОНТРОЛЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ТЕРЯЕШЬ КОНТРОЛЬ}} {{trigger=Когда ты боишься, паникуешь или испытываешь смятение}} {{success=ты сжимаешь свою волю в кулак}} {{partial=ты ещё контролируешь себя, но выбери 1}} {{miss=ты полностью теряешь контроль над собой — твою судьбу решит Ведущий}} {{doroll=[[1]]}} {{result=[[2d6 + (@{controll})[controll] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Тебя пробивает дрожь (–1 на все проверки, пока причина не исчезнет)}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=Ты получаешь урон или страдаешь иначе}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=Ты мешкаешь и теряешь инициативу}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>боишься, паникуешь или испытываешь смятение</b> проверь Контроль. На 10+ ты сжимаешь свою волю в кулак. На 7–9 ты ещё контролируешь себя, но выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Тебя пробивает дрожь (–1 на все проверки, пока причина не исчезнет);</li>
                  <li class="disc-list-item">Ты получаешь урон или страдаешь иначе;</li>
                  <li class="disc-list-item">Ты мешкаешь и теряешь инициативу.</li>
                </ul>
                <p>На 6 – ты полностью теряешь контроль над собой — твою судьбу решит Ведущий.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ВЗЛАМЫВАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ВЗЛАМЫВАЕШЬ}} {{trigger=Когда ты проникаешь сквозь защиту (взламываешь терминал, сервер, коммуникатор или замок)}} {{success=выбери 3}} {{partial=выбери 2}} {{doroll=[[1]]}} {{result=[[2d6 + @{skill}[skill] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[100]]}} {{successOpt1Text=Взлом заметят не скоро}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[100]]}} {{successOpt2Text=Взлом не занял много времени}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[100]]}} {{successOpt3Text=Ничего ценного не пострадало (от вирусов, Льда или иного)}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[100]]}} {{successOpt4Text=Ты можешь использовать это ещё раз}} {{successOpt5Min=[[7]]}} {{successOpt5Max=[[100]]}} {{successOpt5Text=Ты обнаруживаешь что-то необычное или получаешь больший доступ}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>проникаешь сквозь защиту</b>(взламываешь терминал, сервер, коммуникатор или замок), скажи, чего ты хочешь добиться (получить доступ, отключить, запрограммировать), и проверь Навык. На 10+ выбери 3. На 7—9 выбери 2:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Взлом заметят не скоро;</li>
                  <li class="disc-list-item">Взлом не занял много времени;</li>
                  <li class="disc-list-item">Ничего ценного не пострадало (от вирусов, Льда или иного);</li>
                  <li class="disc-list-item">Ты можешь использовать это ещё раз;</li>
                  <li class="disc-list-item">Ты обнаруживаешь что-то необычное или получаешь больший доступ.</li>
                </ul>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ОРИЕНТИРУЕШЬСЯ В СИТУАЦИИ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ОРИЕНТИРУЕШЬСЯ В СИТУАЦИИ}} {{trigger=Когда ты изучаешь ситуацию (сцену или персону)}} {{success=задай Ведущему 3 вопроса из списка (или похожих)}} {{partial=задай Ведущему 1 вопрос из списка (или похожих)}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Репутация,(@{reputation})[reputation]|Контроль,(@{controll})[controll]} + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>изучаешь ситуацию</b> (сцену или персону), проверь:</p>
                <ul class="level-1-list">
                  <li class="arrowed-list-item">Контроль, если смотришь со стороны;</li>
                  <li class="arrowed-list-item">Репутацию, если не избегаешь общения.</li>
                </ul>
                <p>На 10+ задай Ведущему 3 вопроса из списка (или похожих). На 7—9 задай 1 вопрос:</p>
          
                <ul class="level-1-list">
                  <li class="disc-list-item">Как мне поступить, чтобы ___ ?</li>
                  <li class="disc-list-item">Что я могу использовать, чтобы ___ ?</li>
                  <li class="disc-list-item">Кто здесь главный?</li>
                  <li class="disc-list-item">Кто здесь наиболее опасен?</li>
                  <li class="disc-list-item">Что здесь не то, чем кажется?</li>
                  <li class="disc-list-item">Что здесь самое ценное для ___ ?</li>
                  <li class="disc-list-item">Что здесь скоро произойдёт?</li>
                  <li class="disc-list-item">Что здесь недавно произошло?</li>
                  <li class="disc-list-item">Что окружающие знают о ___ ?</li>
                  <li class="disc-list-item">Как окружающие относятся к ___ ?</li>
                  <li class="disc-list-item">В чём мне врут?</li>
                </ul>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПОЛУЧАЕШЬ ИНФОРМАЦИЮ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПОЛУЧАЕШЬ ИНФОРМАЦИЮ}} {{trigger=Когда ты применяешь знания (свои или чужие) для поиска решения}} {{success=Ведущий скажет тебе что-то полезное об объекте твоего исследования}} {{partial=Ведущий скажет тебе что-то полезное об объекте твоего исследования и выбери один из списка}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill})[skill] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Поиск займет больше времени, чем тебе хотелось бы.}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=Тебе потребуется консультация эксперта.}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=Данные не полны / частично повреждены.}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[9]]}} {{successOpt4Text=Ты привлечёшь нежелательное внимание.}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>применяешь знания</b> (свои или чужие) <b>для поиска решения</b>, проверь Навык. На 10+ Ведущий скажет тебе что-то полезное об объекте твоего исследования. На 7—9 то же самое, и выбери один из списка:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Поиск займет больше времени, чем тебе хотелось бы.</li>
                  <li class="disc-list-item">Тебе потребуется консультация эксперта.</li>
                  <li class="disc-list-item">Данные не полны / частично повреждены.</li>
                  <li class="disc-list-item">Ты привлечёшь нежелательное внимание.</li>
                </ul>
            </div>
            
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ЧИНИШЬ ИЛИ РАЗБИРАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ЧИНИШЬ ИЛИ РАЗБИРАЕШЬ}} {{trigger=Когда ты ремонтируешь или разбираешь предмет}} {{success=выбери 3}} {{partial=выбери 1}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill})[skill] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[100]]}} {{successOpt1Text=Это не заняло много времени}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[100]]}} {{successOpt2Text=Это не привлекло чужого внимания}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[100]]}} {{successOpt3Text=Это возможно без спец. инструмента}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[100]]}} {{successOpt4Text=Это будет сложно сломать (или починить)}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>ремонтируешь</b> или <b>разбираешь</b> предмет, проверь Навык. На 10+ выбери 3. На 7—9 выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Это не заняло много времени;</li>
                  <li class="disc-list-item">Это не привлекло чужого внимания;</li>
                  <li class="disc-list-item">Это возможно без спец. инструмента;</li>
                  <li class="disc-list-item">Это будет сложно сломать (или починить).</li>
                </ul>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ДОГОВАРИВАЕШЬСЯ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ДОГОВАРИВАЕШЬСЯ}} {{trigger=Когда у тебя есть повод и рычаг воздействия на NPC и ты используешь его}} {{success=он выполнит просьбу}} {{partial=он мешкает, сомневается, говорит о дополнительных проблемах или хочет от тебя чего-то ещё}} {{doroll=[[1]]}} {{result=[[2d6 + (@{reputation})[reputation] + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда у тебя есть <b>повод и рычаг воздействия</b> на NPC, используй его и проверь Репутацию. На 10+ он выполнит просьбу. На 7—9 он мешкает, сомневается, говорит о дополнительных проблемах или хочет от тебя чего-то ещё.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПОМОГАЕШЬ ИЛИ МЕШАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПОМОГАЕШЬ ИЛИ МЕШАЕШЬ}} {{trigger=Когда ты помогаешь или мешаешь соратнику}} {{success=он получит +1 или –2 (на твой выбор) на свой следующий бросок}} {{partial=он получит +1 или –2 (на твой выбор) на свой следующий бросок, но ты также подвергаешь себя опасности или навлекаешь на себя проблемы}} {{doroll=[[1]]}} {{result=[[2d6 + @{bond_query} + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>помогаешь</b> или <b>мешаешь</b> соратнику, проверь Связь (например, если у тебя две связи, брось+2). На 10+ он получит +1 или –2 (на твой выбор) на свой следующий бросок. На 7—9 ты также подвергаешь себя опасности или навлекаешь на себя проблемы.</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПОКУПАЕШЬ ИЛИ НАНИМАЕШЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПОКУПАЕШЬ ИЛИ НАНИМАЕШЬ}} {{trigger=Когда ты покупаешь что-то ценное или нанимаешь специалиста}} {{success=ты получаешь то, что тебе нужно}} {{partial=ты получаешь то, что тебе нужно, но выбери один из списка}} {{doroll=[[1]]}} {{result=[[2d6 + (@{money})[money] + (@{bonus})[bonus] -  ?{уровень покупки} ]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Это стоит дороже (потрать 1 Благосостояние или реши вопрос иначе)}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=Нужно время на доставку и оформление}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=Это привлечёт нежелательное внимание или иные проблемы}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>покупаешь что-то ценное или нанимаешь специалиста</b> вычти уровень покупки из своего Благосостояния. Брось с этим модификатором. На 10+ ты получаешь то, что тебе нужно. На 7—9 то же самое, но выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Это стоит дороже (потрать 1 Благосостояние или реши вопрос иначе);</li>
                  <li class="disc-list-item">Нужно время на доставку и оформление;</li>
                  <li class="disc-list-item">Это привлечёт нежелательное внимание или иные проблемы.</li>
                </ul>
                <p>Если ты хочешь купить несколько вещей, выбери наиболее дорогую. Каждая дополнительная вещь увеличивает её уровень покупки на 1. Ты можешь потратить Фишку Прибыли, чтобы получить автоматический успех (10+).</p>
            </div>
        
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПОПОЛНЯЕШЬ ПРИПАСЫ
                </h2>
                <p>Когда ты <b> находишься в месте, где всё неплохо со снабжением или есть большие запасы снаряжения, а у тебя есть время,</b> ты восстанавливаешь Припасы до максимума</p>
            </div>
        </div>

        <div class="moves-container moves-optional moves-fixed">
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                    ПОЛУЧАЕШЬ ПРЕИМУЩЕСТВО
                    <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПОЛУЧАЕШЬ ПРЕИМУЩЕСТВО}} {{trigger=Когда ты получаешь преимущество в бою}} {{success=получи 1 фишку против выбранного противника}} {{partial=получи 1 фишку против выбранного противника и выбери 1 осложнение}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]|Навык,(@{skill})[skill]|Репутация,(@{reputation})[reputation]} + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=ты получаешь 1 ранение (игнорирует Защиту)}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=ты становишься уязвимым (Защита–1, если есть)}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=союзник подвергается угрозе}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[9]]}} {{successOpt4Text=противник проявляет инициативу}}">
                      <span>Lo</span>
                    </button>
                </h2>
                <p>Когда ты <b>получаешь преимущество</b> в бою, скажи, как ты хочешь этого добиться (обнаружить уязвимость, окружить, выманить и т.д.) и проверь:
                </p>
                <ul class="level-1-list">
                    <li class="arrowed-list-item">Ярость, если дерешься и действуешь быстро;</li>
                    <li class="arrowed-list-item">Контроль, если стреляешь или действуешь расчётливо;</li>
                    <li class="arrowed-list-item">Навык, если применяешь знания и устройства;</li>
                    <li class="arrowed-list-item">Репутацию, если хочешь уговорить и обхитрить</li>
                </ul>
                <p>На 10+ получи 1 фишку против выбранного противника. На 7—9 то же самое, и выбери 1 осложнение:</p>
                <ul class="level-1-list">
                    <li class="disc-list-item">ты получаешь 1 ранение (игнорирует Защиту);</li>
                    <li class="disc-list-item">ты становишься уязвимым (Защита –1, если есть);</li>
                    <li class="disc-list-item">союзник подвергается угрозе;</li>
                    <li class="disc-list-item">противник проявляет инициативу.</li>
                </ul>
                <p>Ты не можешь использовать один и тот же способ получения преимущества более одного раза за бой. Тебе придется придумать что-то новое.</p>
            </div>
            
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ИСПОЛЬЗУЕШЬ ПРЕИМУЩЕСТВО
                </h2>
                <p>Если ты <b>атакуешь противника,</b> против которого положены (кем угодно) фишки преимущества, потрать...</p>
                <ul class="level-1-list">
                    <li class="disc-list-item">1 фишку и заставь противника замешкаться, сконцентрироваться на тебе или совершить ошибку;</li>
                    <li class="disc-list-item">Х фишек и увеличь свой урон на +2Х; </li>
                    <li class="disc-list-item">Х фишек (равно оставшемуся здоровью противника) и добейся желаемого исхода (не смерти).</li>
                </ul>
                <p><b>Например:</b> ты хочешь, чтобы противник сдался, и у вас есть 2 фишки против него. Ведущий говорит, что этого недостаточно (у противника 4 ранения). Ты наносишь ему 2 ранения, и теперь он готов сдаться (2 ваших  фишки «покрывают» его оставшееся здоровье)</p>
            </div>
            
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПРОВОДИШЬ БОЙ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПРОВОДИШЬ БОЙ}} {{trigger=Когда ты участвуешь в драке или сражении}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]} + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>(Эта опция позволяет провести бой за один ход)</p>
                <p>Когда ты <b>участвуешь в драке или сражении</b> чётко обозначь чего ты хочешь в этом бою добиться. Проверь Ярость, если сражаешься в ближнем бою, или Контроль, если ведёшь перестрелку. При успехе выбери 1:</p>
                <ul class="level-1-list">
                    <li class="disc-list-item">Ты получаешь то, что хочешь;</li>
                    <li class="disc-list-item">Ты наносишь тяжёлые увечья — урон х2;</li>
                </ul>
                <p>На 7—9 выбери ещё 1 из этого списка:</p>
                <ul class="level-1-list">
                    <li class="disc-list-item">Тебе досталось — получи урон х2;</li>
                    <li class="disc-list-item">Пострадали невинные люди;</li>
                    <li class="disc-list-item">Бой принял неожиданный оборот;</li>
                    <li class="disc-list-item">Противник смог уйти;</li>
                </ul>
            </div>
                
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПРОВОДИШЬ ВРЕМЯ
                </h2>
                <p>Когда у тебя есть <b>свободное время</b>я (от 4 часов до нескольких дней), выбери 1 опцию, на что его потратить:</p>
                <ul class="level-1-list">
                    <li class="disc-list-item"><b>Восстановиться:</b> Когда лечишься в медотсеке или у специалиста, вылечи все ранения, если нет Критического. Критическое требует намного больше времени или ресурсов.</li>
                    <li class="disc-list-item"><b>Зарабатывать:</b> Когда работаешь (бизнес, офис, фриланс), опиши, что ты успеваешь сделать за такое время, и проверь нужную характеристику. На 10+ выбери 2, на 7—9 выбери 1:</li>
                    <ul>
                        <li>Получи фишку Прибыли;</li>
                        <li>У тебя не возникло проблем.</li>
                    </ul>
                    <li class="disc-list-item"><b>Найти общий язык:</b> Когда проводишь свободное время вместе с персонажем другого игрока (при обоюдном согласии), то в следующий раз, когда Помогаешь ему, можешь увеличить бонус к его броску до +2.</li>
                    <li class="disc-list-item"><b>Анализировать:</b> Когда изучаешь что-то новое, получи жетон данных. Ты можешь потратить этот жетон для переброса проверки, результатом которой должно стать получение или использование какой-либо новой информации.</li>
                    <li class="disc-list-item"><b>Кутить:</b> Когда посещаешь кабаки, бары и иные злачные места, получи жетон контактов. Ты можешь потратить жетон для переброса социальной проверки.</li>
                    <li class="disc-list-item"><b>Практиковаться:</b> Когда работаешь над своими навыками, получи жетон мастера. Ты можешь потратить жетон и перебросить бросок, напрямую связанный с твоей специализацией. </li>
                    <li class="disc-list-item"><b>Тренироваться:</b> Когда посещаешь спортзал, получи жетон усилия. Ты можешь потратить жетон для переброса проверки, связанной с физической активностью.</li>
                </ul>
                <p>Одновременно у тебя может быть только один жетон. Ты можешь сбросить старый в любой момент.</p>
            </div>
        </div>

        <div class="moves-container moves-space moves-fixed">
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  СПАСАЕШЬ КОРАБЛЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=СПАСАЕШЬ КОРАБЛЬ}} {{trigger=Если ты выводишь корабль из трудной ситуации}} {{success=ты успешно избегаешь опасности на этот раз}} {{partial=ты успешно избегаешь опасности на этот раз но выбери 1}} {{doroll=[[1]]}} {{result=[[2d6 + ?{Stat|Ярость,(@{furry})[furry]|Контроль,(@{controll})[controll]|Навык,(@{skill})[skill]|Репутация,(@{reputation})[reputation]} + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Корабль получил повреждения}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=Потрачен заряд реактора;}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=Опасность сменилась на другую, или воз-никли осложнения}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[9]]}} {{successOpt4Text=Это лишь передышка – опасность скоро вернётся}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Если ты <b>выводишь корабль из трудной ситуации</b> проверь…</p>
                <ul class="level-1-list">
                  <li class="arrowed-list-item">Ярость, если ситуация критическая, и нужно действовать быстро;</li>
                  <li class="arrowed-list-item">Контроль, если полагаешься на свою выдержку и точность расчётов;</li>
                  <li class="arrowed-list-item">Навык, если вынужден применять сложные знания или системы;</li>
                  <li class="arrowed-list-item">Репутация, если ты уговариваешь, обманываешь или пытаешься предугадать действия других людей</li>
                </ul>
                <p>На 10+ ты успешно избегаешь опасности на этот раз. На 7—9 то же самое, но выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Корабль получил повреждения;</li>
                  <li class="disc-list-item">Потрачен заряд реактора;</li>
                  <li class="disc-list-item">Опасность сменилась на другую, или возникли осложнения;</li>
                  <li class="disc-list-item">Это лишь передышка – опасность скоро вернётся.</li>
                </ul>
            </div>
          
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ДАЁШЬ ЗАЛП
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ДАЁШЬ ЗАЛП}} {{trigger=Если ты ведёшь огонь по цели}} {{success=нанеси урон противнику, противник нанесёт твоему кораблю свой, но выбери 1}} {{partial=нанеси урон противнику, противник нанесёт твоему кораблю свой}} {{doroll=[[1]]}} {{result=[[2d6 + (@{controll})[controll] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[10]]}} {{successOpt1Max=[[100]]}} {{successOpt1Text=Ты не получаешь повреждений от противника}} {{successOpt2Min=[[10]]}} {{successOpt2Max=[[100]]}} {{successOpt2Text=Ты наносишь Урон +1}} {{successOpt3Min=[[10]]}} {{successOpt3Max=[[100]]}} {{successOpt3Text=Противник оказался в невыгодной ситуа-ции}} {{details=Потрать Заряд реактора и нанеси урон ещё и из другого орудия (если оно есть)}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Если ты <b>ведёшь огонь по цели</b> выбери орудие корабля и проверь Контроль. На 7—9 нанеси урон противнику, противник нанесёт твоему кораблю свой. На 10+ то же самое, но выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Ты не получаешь повреждений от противника;</li>
                  <li class="disc-list-item">Ты наносишь Урон +1;</li>
                  <li class="disc-list-item">Противник оказался в невыгодной ситуации.</li>
                </ul>
                <p>Потрать Заряд реактора и нанеси урон ещё и из другого орудия (если оно есть).</p>
            </div>
          
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  РЕМОНТИРУЕШЬ СИСТЕМЫ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=РЕМОНТИРУЕШЬ СИСТЕМЫ}} {{trigger=Ты восстанавливаешь свой корабль прямо в полёте}} {{success=всё выглядит потрёпанным, но работает}} {{partial=выбери 1}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill})[skill] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Одна система полностью уничтожена. Восстановить её невозможно, проще купить заново}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=До 4 систем ты сможешь восстановить только в порту}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Если повреждено более 1 системы, тебе надо использовать этот ход вместо Чинишь. Ты <b>восстанавливаешь свой корабль</b> прямо в полёте. Проверь Навык. На 10+ всё выглядит потрёпанным, но работает. На 7—9 выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Одна система полностью уничтожена. Восстановить её невозможно, проще купить заново; </li>
                  <li class="disc-list-item">До 4 систем ты сможешь восстановить только в порту.</li>
                </ul>
            </div>
          
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ТОРОПИШЬСЯ ВЫЛЕТЕТЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ТОРОПИШЬСЯ ВЫЛЕТЕТЬ}} {{trigger=Когда ты хочешь поскорее покинуть порт}} {{success=всё идёт как задумано: все системы восстановлены, реактор заряжен, корабль готов к полёту}} {{partial=выбери 1}} {{doroll=[[1]]}} {{result=[[2d6 + (@{money})[money] + (@{bonus})[bonus]]]}} {{successOpts=true}} {{successOpt1Min=[[7]]}} {{successOpt1Max=[[9]]}} {{successOpt1Text=Если системы были повреждены, то они так и не отремонтированы}} {{successOpt2Min=[[7]]}} {{successOpt2Max=[[9]]}} {{successOpt2Text=Реактор разряжен}} {{successOpt3Min=[[7]]}} {{successOpt3Max=[[9]]}} {{successOpt3Text=Профилактика выявила проблемы: часть систем вышла из строя}} {{successOpt4Min=[[7]]}} {{successOpt4Max=[[9]]}} {{successOpt4Text=Всё работает, но корабль по каким-то причинам не может лететь}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>хочешь поскорее покинуть порт</b>, проверь Благосостояние. На 10+ всё идёт как задумано: все системы восстановлены, реактор заряжен, корабль готов к полёту. На 7—9 выбери 1:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Если системы были повреждены, то они
                    так и не отремонтированы;</li>
                  <li class="disc-list-item">Реактор разряжен;</li>
                  <li class="disc-list-item">Профилактика выявила проблемы:
                    часть систем вышла из строя;</li>
                  <li class="disc-list-item">Всё работает, но корабль по каким-то
                    причинам не может лететь.</li>
                </ul>
                <p><i>Не используй ход, если не торопишься.</i></p>
            </div>
          
            <div class="grid-article-item grid-article-item_borderless">
                <h2>
                  ПРОКЛАДЫВАЕШЬ ПУТЬ
                  <button type="roll" name="roll_move" class='role-move' value="&{template:move} {{charname=@{character_name}}} {{movename=ПРОКЛАДЫВАЕШЬ ПУТЬ}} {{trigger=Когда ты прокладываешь курс через открытый космос}} {{doroll=[[1]]}} {{result=[[2d6 + (@{skill})[skill] + (@{bonus})[bonus]]]}}">
                    <span>Lo</span>
                  </button>
                </h2>
                <p>Когда ты <b>прокладываешь курс</b> через открытый космос, согласуй с Ведущим тип маршрута и проверь Навык:
                </p>
                <p><b>Официальный маршрут:</b> Все законопослушные капитаны ведут здесь свои суда, так как это самый безопасный маршрут. На 10+ корабль прибывает в точку назначения вовремя и без происшествий. На 7—9 выбери 1;</p>
                <p><b>Неизвестный маршрут:</b> Некоторые капитаны предпочитают не пользоваться картами, а строить путь самостоятельно. Это рискованно, зато меньше шанс столкнуться с кем-то. На 10+ корабль прибывает в точку назначения, но выбери 1. На 7—9 выбери 2;</p>
                <p><b>Опасный маршрут:</b> Некоторые пути считаются особенно рискованными—из-за пиратов или иных проблем. На 10+ тебе повезло: корабль прибывает в точку назначения целым, но не без проблем — выбери 2. На 7—9 выбери 2, а Ведущий выберет ещё 1;</p>
                <p>Когда тебе надо выбрать из списка, выбирай:</p>
                <ul class="level-1-list">
                  <li class="disc-list-item">Корабль серьёзно сорвёт сроки;</li>
                  <li class="disc-list-item">Корабль получит повреждения;
                  </li>
                  <li class="disc-list-item">Корабль потратит несколько зарядов;</li>
                  <li class="disc-list-item">Корабль будет кем-то замечен;</li>
                  <li class="disc-list-item">Кто-то ранен или пострадал иначе.</li>
                </ul>
                <p>На 6— вы заблудились, или полёт прерван чем-то неожиданным и неприятным.</p>
            </div>
        </div>

        <div class="moves-container cyborg-implants moves-fixed">
            <div class="grid-article-item cyborg__upper-limbs">
                <h2>
                  ВЕРХНИЕ КОНЕЧНОСТИ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox1">
                      <p>
                        <b>Встроенное оружие.</b> Выберите тип оружия:
                      </p>
                    </div>
                      <ul>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox2"> Моноклинок (вупор,бесшумное,бронебойное)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox3"> Пистолет-пулемет (средняя,авто)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox4"> Разрядник (средняя,шок)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox"name="attr_cyborgCheckbox5"> Плазменная пушка (средняя,игнорирует щиты)
                        </li>
                        <li class="non-typed-list-item list-divider">
                          Выбери 2 аксессуара:
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox6"> Глушитель (бесшумное)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox7"> Крупный калибр (кровавый,мощный)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox8"> Особый боеприпас (бронебойный)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox9"> Трансформер (скрытый)
                        </li>
                        <li class="non-typed-list-item">
                          <input type="checkbox" name="attr_cyborgCheckbox10"> Цифровой прицел (точное)
                        </li>
                      </ul>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox11">
                      <p>
                        Выбери еще 1 аксессуар для оружия.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox12">
                      <p>
                        <b>Многофункциональный инструмент:</b> Когда тебе требуется
                        выполнить операцию, которая требует специальный инструмент,
                        он у тебя есть. Ты не можешь сражаться, пока он
                        активен. Потрать 1 припас и передай инструмент другому
                        персонажу.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox13">
                      <p>
                        <b>Эндоскелет:</b> Когда ты используешь грубую силу для того,
                        чтобы сломать неодушевленный предмет, проверь Ярость.
                        На 10+ выбери 3. На 7-9 выбери 2.
                      </p>
                    </div>
                    <ul>
                      <li class="disc-list-item">
                        Это не заняло много времени;
                      </li>
                      <li class="disc-list-item">
                        Ничего ценного не пострадало;
                      </li>
                      <li class="disc-list-item">
                        Это было не очень громко;
                      </li>
                      <li class="disc-list-item">
                        Это можно быстро починить;
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="grid-article-item cyborg__lower-limbs">
                <h2>
                  НИЖНИЕ КОНЕЧНОСТИ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox14">
                      <p>
                        <b>Миомерные мышцы:</b> Когда тебе нужно оказаться где-то
                        очень быстро, проверь Контроль. На 10+ ты попадаешь туда
                        как раз в тот момент, когда нужно. На 7-9 то же самое, но
                        по пути ты привлек чьё-то внимание.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox15">
                      <p>
                        <b>Репульсоры:</b> Ты можешь прыгать на высоту до 15 метров и
                        зависать в воздухе на 15 секунд. При падении с любой высо-
                        ты ты можешь игнорировать угрозу разбиться насмерть с
                        помощью Контроля.
                      </p>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="grid-article-item cyborg__sense-organs">
                <h2>
                  ОРГАНЫ ЧУВСТВ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox16">
                      <p>
                        <b>AR-интерфейс:</b> Ты получаешь +1, когда взаимодействуешь с
                        компьютерными системами.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox17">
                      <p>
                        <b>Сенсоры:</b> Выбери 1 сенсор из списка. Сенсор работает в
                        радиусе 25 метров.
                      </p>
                    </div>
                    <ul>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_cyborgCheckbox18"> Сонар(ночноевидение);
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_cyborgCheckbox19"> Сенсор движения;
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_cyborgCheckbox20"> Сенсор изменения объема;
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_cyborgCheckbox21"> Сенсор электромагнитных полей;
                      </li>
                    </ul>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox22">
                      <p>
                        Выбери еще <b>1 сенсор.</b>
                      </p>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="grid-article-item cyborg__central-systems">
                <h2>
                  ЦЕНТРАЛЬНЫЕ СИСТЕМЫ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox23">
                      <p>
                        <b>Биодатчик:</b> Когда ты получаешь критическое ранение, система
                        тут же лечит его. Один раз за сессию.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox24">
                      <p>
                        <b>Голодвойник:</b> Система проецирует твоего двойника, который
                        выполняет последовательность запрограммированных действий.
                        Противники склонны атаковать твоего двойника, а не тебя.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox25">
                      <p>
                        <b>Замкнутый контур:</b> Встроенная система жизнеобеспечения.
                        Можешь обходиться без воздуха и находиться во вредной среде
                        (как вакуум или огонь) до 4 часов без вреда. Получи 1 ранение
                        и увеличь срок на 2 часа.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox26">
                      <p>
                        <b>Подкожная броня:</b> Твоя Защита равна 2.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox27">
                      <p>
                        <b>Трюм:</b> В твоем теле оборудована защищенная от сканирования
                        полость, в которой может поместиться предмет размером с тяжёлый пистолет.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox28">
                      <p>
                        <b>Фазовый реактор:</b> Пока ты сохраняешь неподвижность, от твоего реактора
                        можно запитать небольшой транспортный модуль типа автомобиля или некрупное устройство.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox29">
                      <p>
                        <b>Хамелеон:</b> Пока ты не совершаешь резких движений, тебя практически невозможно заметить.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_cyborgCheckbox30">
                      <p>
                        <b>Энергетический щит:</b> Потрать 1 припас и игнорируй весь урон от одной атаки.
                      </p>
                    </div>
                  </li>
                </ul>
              </div>
        </div>

        <div class="moves-container daredevil-tech moves-fixed">
            <div class="daredevil__comrade grid-article-item">
                <h2>
                  КОМПАНЬОН
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери тип своего кибер-компаньона:
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox1">
                      <p>
                        <b>Ассистент:</b> Когда тебе что-то нужно, но находится далеко,
                        ассистент передает тебе это так быстро, как только возможно
                        (даже если эта вещь — твой транспорт).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox2">
                      <p>
                        <b>Исследователь:</b> Способен проводить неглубокий физический и химический
                        анализ непосредственно на месте. Неплохая замена лаборатории.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox3">
                      <p>
                        <b>Наблюдатель:</b> Способен вести скрытое наблюдение за объектом, а также видеть в темноте.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox4">
                      <p>
                        <b>Связист:</b> Компаньон может проецировать ростовое голографическое
                        изображение тебя или собеседника. Если не приглядываться, можно подумать,
                        что это настоящий человек.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox5">
                      <p>
                        <b>Телохранитель:</b> В начале боя выбери цель. Эта цель может атаковать только твоего компаньона,
                        до тех пор, пока компаньон не будет повержен (Ранения 2)
                      </p>
                      <input type="checkbox" name="attr_daredevilCheckbox23"><input type="checkbox" name="attr_daredevilCheckbox24">
                    </div>
                  </li>
                </ul>
            </div>
            <div class="daredevil__special-equipment grid-article-item">
                <h2>
                  СПЕЦСРЕДСТВА
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери 2 спецсредства, установленных на твоем транспорте:
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox6">
                      <p>
                        <b>Глушилка:</b> После включения в радиусе 50 метров не будут работать никакие средства связи.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox7">
                      <p>
                        <b>Импульсная тяга:</b> Твой транспорт способен работать в любых условиях: в вакууме или под водой.
                        Не факт, что ты можешь так работать, особенно без скафандра...
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox8">
                      <p>
                        <b>Трансформер:</b> Твой транспорт на некоторое время может полностью изменить свой внешний вид
                        (но не может стать чем-то совершенно иным). Это помогает уйти от погони.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox9">
                      <p>
                        <b>Потайной трюм:</b> Специальное вместительное отделение для контрабанды.
                        Практически невозможно обнаружить.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox10">
                      <p>
                        <b>Ускоритель:</b> Проверь Контроль. На 10+ транспорт разгоняется настолько сильно,
                        что отрывается от любых соперников. На 7—9 то же самое, но ты подвергаешь себя угрозе
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox11">
                      <p>
                        <b>Энергетический щит:</b> Потрать 1 припас и полностью игнорируй урон от одной атаки.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="daredevil__chassis grid-article-item">
                <h2>
                  ШАССИ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери тип шасси твоего транспорта:
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox12">
                      <p>
                        <b>Спорт-байк:</b> Всего два колеса, зато маневренности выше крыши. 1 пассажирское место;
                        небольшой багажник, маневренный (+1, когда игнорируешь угрозу, маневрируя), скоростной
                        (+1, когда скорость имеет значение). Проходит везде, где пройдёт пешеход.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox13">
                      <p>
                        <b>Глайдер:</b> Крупный мотоцикл без колес, зато летает на высоте до 10 метров (над водой ниже).
                        2 пассажирских места, небольшой багажник, ховер (высота до 10м), Защита 1; скоростной
                        (+1, когда скорость имеет значение).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox14">
                      <p>
                        <b>Гоночный кар:</b> Четыре посадочных места, хотя дверей всего две. До 4 пассажиров, большой багажник,
                        ховер (высота до 10м), Защита 1. Может и по старинке ехать на колёсах.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox15">
                      <p>
                        <b>Грузовик:</b> Тягач для ралли на антигравитационной платформе. Грубоват, но очень вместителен.
                        До 3 пассажиров в кабине, целый грузовой отсек, Защита 2.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="daredevil__armament grid-article-item">
                <h2>
                  ВООРУЖЕНИЕ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери оружие для твоего транспорта:
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox16">
                      <p>
                        <b>Автопушка:</b> Очень-очень тяжелый крупнокалиберный пулемет.
                        Урон 3, дальняя/средняя, авто, тяжелое, стреляет только по ходу движения.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox17">
                      <p>
                        <b>Плазменная турель:</b> Мощная и скорострельная автоматическая турель.
                        Урон 2, средняя, авто, игнорирует щиты.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox18">
                      <p>
                        <b>Ракетная пара:</b> Две тяжелые ракеты класса ПТРК. Чертовски мощные, но их всего две.
                        Восстанавливаются, когда ты пополняешь припасы. Урон 5, дальняя.
                      </p>
                      <input type="checkbox" name="attr_daredevilCheckbox21"><input type="checkbox" name="attr_daredevilCheckbox22">
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox19">
                      <p>
                        <b>«Протуберанец»:</b> Тяжёлый огнемёт, установленный в соплах.
                        Урон 2, ближняя, точное, бронебойное (огню плевать на бронежилет),
                        может поражать цели сзади без разворота.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_daredevilCheckbox20">
                      <p>
                        <b>Магазинный вариант:</b> Выбери оружие из снаряжения персонажей.
                        Урон как у тебя, теги как в книге правил.
                      </p>
                    </div>
                    <div class="cyborg__input-block cyborg__input-block-center">
                        Впиши: <input type="text" name="attr_daredevilText1">
                    </div>
                    <div class="cyborg__input-block cyborg__input-block-center">
                        Урон: <input type="text" name="attr_daredevilText2">
                    </div>
                  </li>
                </ul>
            </div>
        </div>

        <div class="moves-container engineer-probe moves-fixed">
            <div class="grid-article-item grid-article-item_borderless engineer__probe">
                <div class="cyborg__input-name">
                  <span>Имя</span>
                  <input type="text" name="attr_probe_name">
                </div>
                <div class='hpprobe'>
                  <span class='hpprobe-lbl'>Здоровье</span>
                  <input type="checkbox" class="hpprobe-box hpprobe-box0" name="attr_hpprobe" value="0" checked="checked">
                  <input type="checkbox" class="hpprobe-box hpprobe-box1" name="attr_hpprobe" value="1"><span class="hpprobe-box1"></span>
                  <input type="checkbox" class ="hpprobe-max" name="attr_hpprobe_max" value="1">
                  <input type="checkbox" class="hpprobe-box hpprobe-box2" name="attr_hpprobe" value="2"><span class="hpprobe-box2"></span>
                  <input type="checkbox" class ="hpprobe-max" name="attr_hpprobe_max" value="2">
                  <input type="checkbox" class="hpprobe-box hpprobe-box3" name="attr_hpprobe" value="3"><span class="hpprobe-box3"></span>
                  <input type="checkbox" class ="hpprobe-max" name="attr_hpprobe_max" value="3">
                  <button type="action" class="addhpprobebutton" name='act_addmaxhpprobe'>&</button>
                  <button type="action" class="sbstrcthpprobebutton" name='act_subtractmaxhpprobe'>_</button>
                </div>
                <div class='powerprobe'>
                  <span class='powerprobe-lbl'>П.Мощность</span>
                  <input type="checkbox" class="powerprobe-box powerprobe-box0" name="attr_powerprobe" value="0" checked="checked">
                  <input type="checkbox" class="powerprobe-box powerprobe-box1" name="attr_powerprobe" value="1"><span class="powerprobe-box1"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="1">
                  <input type="checkbox" class="powerprobe-box powerprobe-box2" name="attr_powerprobe" value="2"><span class="powerprobe-box2"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="2">
                  <input type="checkbox" class="powerprobe-box powerprobe-box3" name="attr_powerprobe" value="3"><span class="powerprobe-box3"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="3">
                  <input type="checkbox" class="powerprobe-box powerprobe-box4" name="attr_powerprobe" value="4"><span class="powerprobe-box4"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="4">
                  <input type="checkbox" class="powerprobe-box powerprobe-box5" name="attr_powerprobe" value="5"><span class="powerprobe-box5"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="5">
                  <input type="checkbox" class="powerprobe-box powerprobe-box6" name="attr_powerprobe" value="6"><span class="powerprobe-box6"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="6">
                  <input type="checkbox" class="powerprobe-box powerprobe-box7" name="attr_powerprobe" value="7"><span class="powerprobe-box7"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="7">
                  <input type="checkbox" class="powerprobe-box powerprobe-box8" name="attr_powerprobe" value="8"><span class="powerprobe-box8"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="8">
                  <input type="checkbox" class="powerprobe-box powerprobe-box9" name="attr_powerprobe" value="9"><span class="powerprobe-box9"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="9">
                  <input type="checkbox" class="powerprobe-box powerprobe-box10" name="attr_powerprobe" value="10"><span class="powerprobe-box10"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="10">
                  <input type="checkbox" class="powerprobe-box powerprobe-box11" name="attr_powerprobe" value="11"><span class="powerprobe-box11"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="11">
                  <input type="checkbox" class="powerprobe-box powerprobe-box12" name="attr_powerprobe" value="12"><span class="powerprobe-box12"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="12">
                  <input type="checkbox" class="powerprobe-box powerprobe-box13" name="attr_powerprobe" value="13"><span class="powerprobe-box13"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="13">
                  <input type="checkbox" class="powerprobe-box powerprobe-box14" name="attr_powerprobe" value="14"><span class="powerprobe-box14"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="14">
                  <input type="checkbox" class="powerprobe-box powerprobe-box15" name="attr_powerprobe" value="15"><span class="powerprobe-box15"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="15">
                  <input type="checkbox" class="powerprobe-box powerprobe-box16" name="attr_powerprobe" value="16"><span class="powerprobe-box16"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="16">
                  <input type="checkbox" class="powerprobe-box powerprobe-box17" name="attr_powerprobe" value="17"><span class="powerprobe-box17"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="17">
                  <input type="checkbox" class="powerprobe-box powerprobe-box18" name="attr_powerprobe" value="18"><span class="powerprobe-box18"></span>
                  <input type="checkbox" class ="powerprobe-max" name="attr_powerprobe_max" value="18">
                  <button type="action" class="addpowerprobebutton" name='act_addmaxpowerprobe'>&</button>
                  <button type="action" class="sbstrctpowerprobebutton" name='act_subtractmaxpowerprobe'>_</button>
                </div>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Твой главный помощник, созданный своими руками. Он умеет разговаривать, имеет манипуляторы для простейших
                        действий, и ты можешь встраивать в него разные утилиты.
                      </p>
                    </div>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Он имеет <b>Предельную Мощность</b> 10, а каждая утилита потребляет некоторое количество мощностей. Отметь
                        столько доступных утилит, сколько хочешь, но сумма их мощностей не может превышать Предельную Мощность.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        <b>Пересборка.</b> Ты можешь потратить 1 час, чтобы сменить активные утилиты. Правило суммы мощностей
                        должно соблюдаться.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Зонд выдерживает два ранения и имеет Защиту 1. Ты можешь сделать новый зонд взамен утерянного по правилам
                        длительных действий с шагом в 6 часов (или за двое суток).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери его ТИП, КОРПУС и имя
                      </p>
                    </div>
                  </li>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless engineer__type">
                <h2>
                  ТИП
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox1">
                      <p>
                        <b>Боевой:</b> Зонд выдерживает 3 ранения и имеет энергощит (<i>потрать 1 Припас и проигнорируй весь урон
                        от одной атаки</i>).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox2">
                      <p>
                        <b>Многофункциональный:</b> Предельная Мощность твоего зонда увеличена до 12.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox3">
                      <p>
                        <b>Подмастерье:</b> 1 раз между Пересборками ты можешь активировать утилиту, отключив другие с такой же
                        или большей суммой мощностей.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox4">
                      <p>
                        <b>Юнга:</b> Встроенный в коммуникационные системы звездолёта, зонд-юнга всегда знает, если какая-то часть
                        корабля работает не так, как надо, в том числе мгновенно вычисляет точку разгерметизации.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless engineer__hull">
                <h2>
                  КОРПУС
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox5">
                      <p>
                        <b>Парящий:</b> <i>Мощность</i> 2. Небольшой антигравитационный двигатель обеспечивает полет до 3м над
                        поверхностью, однако требует много энергии.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox6">
                      <p>
                        <b>Паук:</b> <i>Мощность</i> 1. Платформа повышенной проходимости. Способен забираться в труднодоступные
                        места и на вакуумных присосках медленно ползать по стенам.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox7">
                      <p>
                        <b>Пешеход:</b> Надёжный экономичный корпус.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless engineer__base-utilities">
                <h2>
                  БАЗОВЫЕ УТИЛИТЫ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox8">
                      <p>
                        <b>Аватар:</b> <i>Мощность 1</i>. Наблюдая за человеком или анализируя его данные в инфосети несколько
                        часов, зонд может загрузить в себя его аватар (до 5). После этого он может достоверно изображать этого
                        человека в инфосети.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox9">
                      <p>
                        <b>Автопилот:</b> <i>Мощность 2</i>. Зонд способен подключаться к транспортному средству и управлять им
                        самостоятельно. Используй ход Взламываешь в случае необходимости.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox10">
                      <p>
                        <b>Ассистент:</b> <i>Мощность 1</i>. Когда твой зонд помогает тебе, пока ты Чинишь или Разбираешь, можешь
                        выбрать на 1 вариант больше при успехе.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox11">
                      <p>
                        <b>Дублирующие манипуляторы:</b> <i>Мощность 2</i>. Ты можешь дистанционно Чинить/разбирать и Взламывать с
                        помощью зонда. При этом ты не можешь применять ход Специалист и утилиту Ассистент.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox12">
                      <p>
                        <b>Лаборатория:</b> <i>Мощность 4</i>. Ты с помощью зонда можешь проводить физико-химические исследования.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox13">
                      <p>
                        <b>Лесопилка:</b> <i>Мощность 3</i>. Комплект из лазерного и плазменного резаков и пиломеча. Преодолевает
                        большинство видов преград, затратив некоторое время. Урон 3 (в упор).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox14">
                      <p>
                        <b>Проектор:</b> <i>Мощность 2</i>. Зонд способен создавать голограммы существ и предметов, Проверь Навык.
                        На 10+ их не отличить от реальных. На 7–9 кто-то что-то заподозрил, но не сразу.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox15">
                      <p>
                        <b>Системана блюдения:</b> <i>Мощность 2</i>. Комплект звуко- и видео-записывающего оборудования повышенной
                        точности, в т.ч. узконаправленный микрофон и двадцатикратный zoom.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox16">
                      <p>
                        <b>Усиленный корпус:</b> <i>Мощность 3</i>. Зонд получает Защиту 2.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox17">
                      <p>
                        <b>Энергосфера.</b> <i>Мощность 1</i>. Создает вокруг себя герметичную сферу и переходит в спящий режим.
                        Находящийся внутри человек получает 4-часовую защиту от внешней среды, но не способен с ней
                        взаимодействовать.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless engineer__advanced-utilities">
                <h2>
                  ПРОДВИНУТЫЕ УТИЛИТЫ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox18">
                      <p>
                        <b>Белый шум:</b> <i>Мощность 3</i>. Зонд способен создавать в радиусе 20м от себя излучение, вносящее в
                        электронику сильные помехи и мешающее устройствам функционировать нормально. Проверь Контроль: 7–9 – на 10
                        минут максимум. 10+ – на 15 минут, плюс устройства перезагружаются.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox19">
                      <p>
                        <b>Вооружение:</b> <i>Мощность 2</i>. Выбери тяжёлое оружие, установленное на зонде. Оно тратит Припасы
                        как обычно. Урон зонда – 2. <input type="text" name="attr_engineerText2">
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox20">
                      <p>
                        <b>Дополнительные настройки.</b> <i>Мощность 0</i>. Зонд издаёт звуковые сигналы, которые понимаешь только
                        ты. Кроме того, можешь создать ему характер, выставив уровень честности, лидерства, юмора, скепсиса и т.д.
                        Правда, кто-то может заподозрить в нём Искусственный Интеллект.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox21">
                      <p>
                        <b>Ракетный ранец.</b> <i>Мощность 4</i>. Зонд может летать несколько минут и поднимать человека в воздух.
                        После одного полёта ему требуется перезарядить ранец (примерно за 15 минут).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox22">
                      <p>
                        <b>Техносканер:</b> <i>Мощность 2</i>. Когда зонд сканирует устройство, проверь Навык. На 10+ получи его
                        полные ТТХ и предназна- чение. На 7–9 получи лишь часть информации. Необычные устройства не всегда можно
                        просканировать.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_engineerCheckbox23">
                      <p>
                        <b>Зарядник.</b> <i>Мощность 1</i>. Зонд может подпитывать оборудование, даже полностью выключенное, стоя с
                        ним рядом или находясь в одной комнате.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
        </div>

        <div class="moves-container manofsteel-armor moves-fixed">
            <div class="grid-article-item grid-article-item_borderless manofsteel__guns">
                <h2>
                  ОРУДИЯ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери орудия, которые установлены на твой каркас.
                        Каждое орудие имеет свой Урон и тратит определённое количество заряда батарей.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox1">
                      <p>
                        <b>Гарпун:</b> <i>Урон 1, батарея 0, средняя, нелетальное.</i>
                        Захватывает цель и подтягивает в упор.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox2">
                      <p>
                        <b>Гаусс-орудие:</b> <i>Урон 5, батарея 3, средняя/дальняя, бронебойное, мощное, кровавое.</i>
                        Для произведения выстрела каркас должен быть неподвижен.
                        Не может быть бесшумным, кроме как в вакууме.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox3">
                      <p>
                        <b>Пиломеч:</b> <i>Урон 3, батарея 1, в упор, кровавое.</i>
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox4">
                      <p>
                        <b>Плазмотрон:</b> <i>Урон 3, батарея 2, ближняя/средняя, игнорирует щиты.</i>
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox5">
                      <p>
                        <b>Сенсорнаямина:</b> <i>Урон 3, батарея 1, в упор, мощное.</i>
                        Устанавливается на поверхности и детонирует при срабатывании сенсора,
                        зафиксировавшего движение в радиусе 1 метра.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox6">
                      <p>
                        <b>Спаренный ствол:</b> Потрать 1 заряд батареи и перебрось свой урон.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox7">
                      <p>
                        <b>Тактический лазер:</b> <i>Урон 2, батарея 1, дальняя, точное.</i>
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox8">
                      <p>
                        <b>Тяжелое орудие:</b> Установи тяжёлое оружие.
                        Выстрел тратит батареи из расчета уровень цены оружия минус 1.<br>
                        Впиши: <input type="text" name="attr_manofsteelText1">
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox9">
                      <p>
                        <b>Тяжелое орудие:</b> Установи тяжёлое оружие.
                        Выстрел тратит батареи из расчета уровень цены оружия минус 1. <br>
                        Впиши: <input type="text" name="attr_manofsteelText2">
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox"name="attr_manofsteelCheckbox10">
                      <p>
                        <b>Шок-волна:</b> <i>Урон 0, батарея 3, ближняя, шок.</i> Срабатывает по всем целям вокруг.
                        При атаке на 7—9 кто-то останется на ногах, как решит Ведущий.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox11">
                      <p>
                        <b>ЭМИ:</b> <i>Урон 0, батарея Х.</i> Выключает всю электронику на средней дистанции — и твой экзоскелет
                        тоже.
                        Тратит весь оставшийся заряд батарей.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless manofsteel__hull">
                <div class='powermanofsteel'>
                  <span class='powermanofsteel-lbl'>Батарея</span>
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box0" name="attr_powermanofsteel" value="0" checked="checked">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box1" name="attr_powermanofsteel" value="1"><span class="powermanofsteel-box1"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="1">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box2" name="attr_powermanofsteel" value="2"><span class="powermanofsteel-box2"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="2">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box3" name="attr_powermanofsteel" value="3"><span class="powermanofsteel-box3"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="3">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box4" name="attr_powermanofsteel" value="4"><span class="powermanofsteel-box4"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="4">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box5" name="attr_powermanofsteel" value="5"><span class="powermanofsteel-box5"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="5">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box6" name="attr_powermanofsteel" value="6"><span class="powermanofsteel-box6"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="6">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box7" name="attr_powermanofsteel" value="7"><span class="powermanofsteel-box7"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="7">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box8" name="attr_powermanofsteel" value="8"><span class="powermanofsteel-box8"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="8">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box9" name="attr_powermanofsteel" value="9"><span class="powermanofsteel-box9"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="9">
                  <input type="checkbox" class="powermanofsteel-box powermanofsteel-box10" name="attr_powermanofsteel" value="10"><span class="powermanofsteel-box10"></span>
                  <input type="checkbox" class ="powermanofsteel-max" name="attr_powermanofsteel_max" value="10">
                  <button type="action" class="addpowermanofsteelbutton" name='act_addmaxpowermanofsteel'>&</button>
                  <button type="action" class="sbstrctpowermanofsteelbutton" name='act_subtractmaxpowermanofsteel'>_</button>
                </div>
                <h2>
                  КАРКАС
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери каркас. Он определяет твою защиту, а также количество стартовых орудий и систем.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox12">
                      <p>
                        <b>Скаут:</b> Защита 1, орудия 1, системы 4, маскировка, скорость +1.
                        малые манипуляторы позволяют взаимодействовать даже с небольшими
                        предметами почти как обычными руками. Выбери один уже установленный сенсор.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox13">
                      <p>
                        <b>Десант:</b> Защита 2, орудия 3, системы 2, герметичный,
                        прыжковый двигатель (5 метров в высоту, 10 метров в длину).
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox14">
                      <p>
                        <b>Штурмовик:</b> Защита 3, орудия 4, системы 1, манипуляторы отсутствуют.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
            <div class="grid-article-item grid-article-item_borderless manofsteel__systems">
                <h2>
                  СИСТЕМЫ
                </h2>
                <ul class="level-1-list">
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <p>
                        Выбери системы, которые установлены на твой каркаc.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox15">
                      <p>
                        <b>Аналоговое управление:</b> Когда твой экзоскелет пытаются взломать или отключить, игнорируй это.
                        Однако пока действует эта система, все остальные системы недоступны, а ты получаешь –1 на броски.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox16">
                      <p>
                        <b>Дистанционное управление:</b> С помощью небольшого импланта ты можешь дистанционно отдавать приказы
                        экзоскелету:
                        «ко мне», «открыть огонь из выбранного орудия», «прекратить огонь», «покинуть зону»,
                        «активировать выбранную систему» и т.п.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox17">
                      <p>
                        <b>Импульсный двигатель:</b> Экзоскелет может летать, тратя 1 заряд батареи за каждый километр пути.
                        Двигатели разогреваются около минуты.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox18">
                      <p>
                        <b>Конвертер:</b> Позволяет преобразовывать мусор в полезный груз.
                        Раз в сессию ты можешь проверить Контроль. На 10+ получи 2 Припаса,
                        на 7—9 получи 1 Припас. Эти Припасы можно сразу передать другим персонажам без ограничений.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox19">
                      <p>
                        <b>Медкапсула:</b> Если экзоскелет неподвижен, оператор получает медицинскую помощь.
                        Обычное ранение излечивается за 30 минут и 1 заряд батареи.
                        Критическое ранение — 8 часов и 8 зарядов батареи.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox20">
                      <p>
                        <b>Пассажирский модуль:</b> Дополнительное кресло, кое-как втиснутое в конструкцию. Можешь перевозить одного
                        пассажира, но ему придётся забыть о комфорте.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox21">
                      <p>
                        <b>Сенсоры:</b> Выбери 1 из списка: 
                      </p>
                    </div>
                    <ul>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_manofsteelCheckbox26"> датчик движения
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_manofsteelCheckbox27"> инфракрасный датчик
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_manofsteelCheckbox28"> ночное видение
                      </li>
                      <li class="non-typed-list-item">
                        <input type="checkbox" name="attr_manofsteelCheckbox29"> датчик электромагнитных полей
                      </li>
                    </ul>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox22">
                      <p>
                        <b>Универсальный разъём:</b> Экзоскелет можно подключить к транспортному средству и управлять им (если
                        влезешь). +1, когда взламываешь.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox23">
                      <p>
                        <b>Фазовый реактор:</b> Когда экзоскелет находится без движения, он восстанавливает 1 заряд батареи каждый час.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox24">
                      <p>
                        <b>Эвакуатор:</b> Получив критическое ранение, игнорируй его. Вместо этого срабатывает система
                        катапультирования. Брось кубик, чтобы узнать, сколько дней займёт капитальный ремонт экзоскелета.
                      </p>
                    </div>
                  </li>
                  <li class="non-typed-list-item">
                    <div class="cyborg__input-block">
                      <input type="checkbox" name="attr_manofsteelCheckbox25">
                      <p>
                        <b>Энергетический щит:</b> Потрать 3 заряда батареи и полностью игнорируй урон от одной атаки.
                      </p>
                    </div>
                  </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="page page4">
        <label><input type="checkbox" name="attr_isCyborgBackground"> Киборг: Происхождение</label>
        <label><input type="checkbox" name="attr_isCyborgPath"> Киборг: Путь</label>
        <label><input type="checkbox" name="attr_isCyborgDishonor"> Киборг: Бесчестье</label>
        <label><input type="checkbox" name="attr_isCyborgImplants"> Киборг: Импланты</label>

        <label><input type="checkbox" name="attr_isCourierDanger"> Курьер: Опасность</label>
        <label><input type="checkbox" name="attr_isMervenaryDeath"> Наемник: Смерть</label>
        <label><input type="checkbox" name="attr_isStrangerFavor"> Странник: Благосклонность</label>
        <label><input type="checkbox" name="attr_isSupernovaImpro"> Супернова: Импровизация</label>
        <label><input type="checkbox" name="attr_isJuggernautAdrenaline"> Джаггернаут: Адреналин</label>
        <label><input type="checkbox" name="attr_isDigitaldaoOverload"> Дао Цифры: Перегрузка</label>
        <label><input type="checkbox" name="attr_isEmissaryStatus"> Эмиссар: Статус</label>
        <label><input type="checkbox" name="attr_isRaelithFade"> Раэлит: Угасание</label>
        
        <label><input type="checkbox" name="attr_isRaelithFunction"> Раэлит: Функция</label>

        <label><input type="checkbox" name="attr_isShadowBackground"> Тень: Происхождение</label>

        <label><input type="checkbox" name="attr_isJuggernautHandicraft"> Джагернаут: Ремесло</label>

        <label><input type="checkbox" name="attr_isStrangerSpec"> Странник: Специализация</label>

        <label><input type="checkbox" name="attr_isDaredevilTech"> Сорвиголова: Техника</label>

        <label><input type="checkbox" name="attr_isEngineerProbe"> Инженер: Зонд</label>

        <label><input type="checkbox" name="attr_isManofsteelArmor"> Броненосец: Экзоскелет</label>

        <label><input type="checkbox" name="attr_filter-all"> Повышения: Все</label>
        <label><input type="checkbox" name="attr_filter-noble"> Повышения: Аристократ</label>
        <label><input type="checkbox" name="attr_filter-cyborg"> Повышения: Киборг</label>
        <label><input type="checkbox" name="attr_filter-companion"> Повышения: Компаньонка</label>
        <label><input type="checkbox" name="attr_filter-courier"> Повышения: Курьер</label>
        <label><input type="checkbox" name="attr_filter-mercenary"> Повышения: Наёмник</label>
        <label><input type="checkbox" name="attr_filter-tactician"> Повышения: Тактик</label>
        <label><input type="checkbox" name="attr_filter-daredevil"> Повышения: Сорвиголова</label>
        <label><input type="checkbox" name="attr_filter-stranger"> Повышения: Странник</label>
        <label><input type="checkbox" name="attr_filter-shadow"> Повышения: Тень</label>
        <label><input type="checkbox" name="attr_filter-manofsteel"> Повышения: Броненосец</label>
        <label><input type="checkbox" name="attr_filter-bountyhunter"> Повышения: Охотник за головами</label>
        <label><input type="checkbox" name="attr_filter-supernova"> Повышения: Сверхновая</label>
        <label><input type="checkbox" name="attr_filter-cenzor"> Повышения: Цензор</label>
        <label><input type="checkbox" name="attr_filter-engineer"> Повышения: Инженер</label>
        <label><input type="checkbox" name="attr_filter-doctor"> Повышения: Доктор</label>
        <label><input type="checkbox" name="attr_filter-juggernaut"> Повышения: Джаггернаут</label>
        <label><input type="checkbox" name="attr_filter-kinetick"> Повышения: Кинетик</label>
        <label><input type="checkbox" name="attr_filter-digitaldao"> Повышения: Дао Цифры</label>
        <label><input type="checkbox" name="attr_filter-emissary"> Повышения: Эмиссар</label>
        <label><input type="checkbox" name="attr_filter-psychomant"> Повышения: Психомант</label>
        <label><input type="checkbox" name="attr_filter-raelith"> Повышения: Раэлит</label>
    </div>
</div>

<!-- Start welcome -->

<input type="checkbox" class="tip-warning-flag" name="attr_warning_flag" value="1">
<div class="change-warning">
    <span class="wrn-text">Все данные сбросятся. Вы уверены?</span>
    <div class="wrn-btn">
        <button type="action" name="act_changeclassconfirm">Изменить</button>
        <button type="action" name="act_changeclasscancel">Отмена</button>
    </div>
</div>

<input type="checkbox" class="tip-confirm-flag" name="attr_tip_confirm_flag" value="1">
<div class="class-tip">
	<button type="action" class="cancel-button" name="act_cancelclass">&#128473;</button>
	<h3><span>Выбор буклета</span></h3>
	<p><span>Welcome to the Edge of The Verse Character Sheet!  To get started select class from the choices below:</span></p>
    <div>
        <span>Основные</span><br>
        <button type="action" name="act_noble">Аристократ</button>
        <button type="action" name="act_cyborg">Киборг</button>
        <button type="action" name="act_companion">Компаньонка</button>
        <button type="action" name="act_courier">Курьер</button>
        <button type="action" name="act_mercenary">Наёмник</button>
        <button type="action" name="act_tactician">Тактик</button>
        <button type="action" name="act_daredevil">Сорвиголова</button>
        <button type="action" name="act_stranger">Странник</button>
        <button type="action" name="act_shadow">Тень</button>
        <button type="action" name="act_manofsteel">Броненосец</button>
    </div>
    <div>
        <span>Дополнительные</span><br>
        <button type="action" name="act_bountyhunter">Охотник за головами</button>
        <button type="action" name="act_supernova">Сверхновая</button>
        <button type="action" name="act_cenzor">Цензор</button>
        <button type="action" name="act_engineer">Инженер</button>
        <button type="action" name="act_doctor">Доктор</button>
        <button type="action" name="act_juggernaut">Джаггернаут</button>
        <button type="action" name="act_kinetick">Кинетик</button>
        <button type="action" name="act_digitaldao">Дао Цифры</button>
        <button type="action" name="act_emissary">Эмиссар</button>
        <button type="action" name="act_psychomant">Психомант</button>
        <button type="action" name="act_raelith">Раэлит</button>
    </div>    
</div>

<rolltemplate class="sheet-rolltemplate-info">
    <div class="sheet-templateMain">
        <div class="sheet-templateheader">{{name}}</div>
        <div class="sheet-templatesubheader">{{item}}{{#type}} ({{type}}){{/type}}</div>
        <div class="sheet-templatedescription">
            {{#description}}{{description}}{{/description}}
			{{#allprops() description item type}}<p><strong>{{key}}:</strong> {{value}}</p>{{/allprops() description item type}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-move">
    <div class="rt-container">
        <div class="rt-header rt-header-minor">{{charname}}</div>
        <div class="rt-header">{{movename}}</div>
        <div class="rt-content">
            {{#trigger}}
            <div class="rt-row">
                <span class="label rt-label" >Условие:</span>
                <span class="rt-value rt-text">{{trigger}}</span>
            </div>
            {{/trigger}}
            {{#modifiers}}
            <div class="rt-row">
                <span class="label rt-label" >Modifier(s):</span>
                <span class="rt-value rt-text">{{modifiers}}</span>
            </div>
            {{/modifiers}}
    
            {{#rollGreater() doroll 0}}
            {{#result}}
                <div class="rt-row">
                    <span class="label rt-label" >Проверка:</span>
                    <span class="rt-value rt-text">{{result}}</span>
                </div>
                {{#rollLess() result 7}}
                {{#miss}}
                <div class="rt-row">
                    <span class="label rt-label" >Эффект:</span>
                    <span class="rt-value rt-text">{{miss}}</span>
                </div>
                {{/miss}}
                {{/rollLess() result 7}}
    
                {{#rollBetween() result 7 9}}
                {{#partial}}
                <div class="rt-row">
                    <span class="label rt-label" >Эффект:</span>
                    <span class="rt-value rt-text">{{partial}}</span>
                </div>
                {{/partial}}
                {{/rollBetween() result 7 9}}
    
                {{#rollGreater() result 9}}
                {{#success}}
                <div class="rt-row">
                    <span class="label rt-label" >Эффект:</span>
                    <span class="rt-value rt-text">{{success}}</span>
                </div>
                {{/success}}
                {{/rollGreater() result 9}}

                {{#successOpts}}
                {{#rollBetween() result successOpt1Min successOpt1Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt1Text}}</span>
                </div>
                {{/rollBetween() result successOpt1Min successOpt1Max}} 

                {{#rollBetween() result successOpt2Min successOpt2Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt2Text}}</span>
                </div>
                {{/rollBetween() result successOpt2Min successOpt2Max}} 

                {{#rollBetween() result successOpt3Min successOpt3Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt3Text}}</span>
                </div>
                {{/rollBetween() result successOpt3Min successOpt3Max}} 

                {{#rollBetween() result successOpt4Min successOpt4Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt4Text}}</span>
                </div>
                {{/rollBetween() result successOpt4Min successOpt4Max}} 

                {{#rollBetween() result successOpt5Min successOpt5Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt5Text}}</span>
                </div>
                {{/rollBetween() result successOpt5Min successOpt5Max}} 

                {{#rollBetween() result successOpt6Min successOpt6Max}}
                <div class="rt-row">
                    <span class="rt-value rt-text">{{successOpt6Text}}</span>
                </div>
                {{/rollBetween() result successOpt6Min successOpt6Max}} 
                {{/successOpts}}
            {{/result}}
            {{/rollGreater() doroll 0}}
            
            {{#details}}
            <div class="rt-details">
                <h4>Детали:</h4>
                <span class="rt-value rt-text">{{details}}</span>
            </div>
            {{/details}}

            {{#rollGreater() opt1 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt1name}}</b> {{opt1details}}</span>
            </div>
            {{/rollGreater() opt1 0}} 

            {{#rollGreater() opt2 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt2name}}</b> {{opt2details}}</span>
            </div>
            {{/rollGreater() opt2 0}} 

            {{#rollGreater() opt3 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt3name}}</b> {{opt3details}}</span>
            </div>
            {{/rollGreater() opt3 0}} 

            {{#rollGreater() opt4 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt4name}}</b> {{opt4details}}</span>
            </div>
            {{/rollGreater() opt4 0}} 

            {{#rollGreater() opt5 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt5name}}</b> {{opt5details}}</span>
            </div>
            {{/rollGreater() opt5 0}} 

            {{#rollGreater() opt6 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt6name}}</b> {{opt6details}}</span>
            </div>
            {{/rollGreater() opt6 0}} 

            {{#rollGreater() opt7 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt7name}}</b> {{opt7details}}</span>
            </div>
            {{/rollGreater() opt7 0}} 

            {{#rollGreater() opt8 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt8name}}</b> {{opt8details}}</span>
            </div>
            {{/rollGreater() opt8 0}} 

            {{#rollGreater() opt9 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt9name}}</b> {{opt9details}}</span>
            </div>
            {{/rollGreater() opt9 0}} 

            {{#rollGreater() opt10 0}}
            <div class="rt-row">
                <span class="rt-value rt-text"><b>{{opt10name}}</b> {{opt10details}}</span>
            </div>
            {{/rollGreater() opt10 0}} 
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-harm">
  <div class="rt-container">
    <div class="rt-header rt-header-minor">{{charname}}</div>
    <div class="rt-header">Урон</div>
    <div class="rt-content">
        {{#rollGreater() number 0}}
          {{#rollBetween() result1 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 1:</span>
            <span class="rt-value rt-text">{{result1}} -> 0.5</span>
          </div>
          {{/rollBetween() result1 1 3}}

          {{#rollBetween() result1 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 1:</span>
            <span class="rt-value rt-text">{{result1}} -> 1</span>
          </div>
          {{/rollBetween() result1 4 5}}

          {{#rollGreater() result1 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 1:</span>
            <span class="rt-value rt-text">{{result1}} -> 2</span>
          </div>
          {{/rollGreater() result1 5}}
        {{/rollGreater() number 0}}

        {{#rollGreater() number 1}}
          {{#rollBetween() result2 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 2:</span>
            <span class="rt-value rt-text">{{result2}} -> 0.5</span>
          </div>
          {{/rollBetween() result2 1 3}}

          {{#rollBetween() result2 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 2:</span>
            <span class="rt-value rt-text">{{result2}} -> 1</span>
          </div>
          {{/rollBetween() result2 4 5}}

          {{#rollGreater() result2 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 2:</span>
            <span class="rt-value rt-text">{{result2}} -> 2</span>
          </div>
          {{/rollGreater() result2 5}}
        {{/rollGreater() number 1}}

        {{#rollGreater() number 2}}
          {{#rollBetween() result3 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 3:</span>
            <span class="rt-value rt-text">{{result3}} -> 0.5</span>
          </div>
          {{/rollBetween() result3 1 3}}

          {{#rollBetween() result3 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 3:</span>
            <span class="rt-value rt-text">{{result3}} -> 1</span>
          </div>
          {{/rollBetween() result3 4 5}}

          {{#rollGreater() result3 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 3:</span>
            <span class="rt-value rt-text">{{result3}} -> 2</span>
          </div>
          {{/rollGreater() result3 5}}
        {{/rollGreater() number 2}}

        {{#rollGreater() number 3}}
          {{#rollBetween() result4 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 4:</span>
            <span class="rt-value rt-text">{{result4}} -> 0.5</span>
          </div>
          {{/rollBetween() result4 1 3}}

          {{#rollBetween() result4 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 4:</span>
            <span class="rt-value rt-text">{{result4}} -> 1</span>
          </div>
          {{/rollBetween() result4 4 5}}

          {{#rollGreater() result4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 4:</span>
            <span class="rt-value rt-text">{{result4}} -> 2</span>
          </div>
          {{/rollGreater() result4 5}}
        {{/rollGreater() number 3}}

        {{#rollGreater() number 4}}
          {{#rollBetween() result5 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 5:</span>
            <span class="rt-value rt-text">{{result5}} -> 0.5</span>
          </div>
          {{/rollBetween() result5 1 3}}

          {{#rollBetween() result5 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 5:</span>
            <span class="rt-value rt-text">{{result5}} -> 1</span>
          </div>
          {{/rollBetween() result5 4 5}}

          {{#rollGreater() result5 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 5:</span>
            <span class="rt-value rt-text">{{result5}} -> 2</span>
          </div>
          {{/rollGreater() result5 5}}
        {{/rollGreater() number 4}}

        {{#rollGreater() number 5}}
          {{#rollBetween() result6 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 6:</span>
            <span class="rt-value rt-text">{{result6}} -> 0.5</span>
          </div>
          {{/rollBetween() result6 1 3}}

          {{#rollBetween() result6 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 6:</span>
            <span class="rt-value rt-text">{{result6}} -> 1</span>
          </div>
          {{/rollBetween() result6 4 5}}

          {{#rollGreater() result6 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 6:</span>
            <span class="rt-value rt-text">{{result6}} -> 2</span>
          </div>
          {{/rollGreater() result6 5}}
        {{/rollGreater() number 5}}

        {{#rollGreater() number 6}}
          {{#rollBetween() result7 1 3}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 7:</span>
            <span class="rt-value rt-text">{{result7}} -> 0.5</span>
          </div>
          {{/rollBetween() result7 1 3}}

          {{#rollBetween() result7 4 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 7:</span>
            <span class="rt-value rt-text">{{result7}} -> 1</span>
          </div>
          {{/rollBetween() result7 4 5}}

          {{#rollGreater() result7 5}}
          <div class="rt-row">
            <span class="label rt-label" >Куб 7:</span>
            <span class="rt-value rt-text">{{result7}} -> 2</span>
          </div>
          {{/rollGreater() result7 5}}
        {{/rollGreater() number 6}}

        {{#rollGreater() number 7}}
        {{#rollBetween() result8 1 3}}
        <div class="rt-row">
          <span class="label rt-label" >Куб 8:</span>
          <span class="rt-value rt-text">{{result8}} -> 0.5</span>
        </div>
        {{/rollBetween() result8 1 3}}

        {{#rollBetween() result8 4 5}}
        <div class="rt-row">
          <span class="label rt-label" >Куб 8:</span>
          <span class="rt-value rt-text">{{result8}} -> 1</span>
        </div>
        {{/rollBetween() result8 4 5}}

        {{#rollGreater() result8 5}}
        <div class="rt-row">
          <span class="label rt-label" >Куб 8:</span>
          <span class="rt-value rt-text">{{result8}} -> 2</span>
        </div>
        {{/rollGreater() result8 5}}
      {{/rollGreater() number 7}}

      {{#rollGreater() number 8}}
      {{#rollBetween() result9 1 3}}
      <div class="rt-row">
        <span class="label rt-label" >Куб 9:</span>
        <span class="rt-value rt-text">{{result9}} -> 0.5</span>
      </div>
      {{/rollBetween() result9 1 3}}

      {{#rollBetween() result9 4 5}}
      <div class="rt-row">
        <span class="label rt-label" >Куб 9:</span>
        <span class="rt-value rt-text">{{result9}} -> 1</span>
      </div>
      {{/rollBetween() result9 4 5}}

      {{#rollGreater() result9 5}}
      <div class="rt-row">
        <span class="label rt-label" >Куб 9:</span>
        <span class="rt-value rt-text">{{result9}} -> 2</span>
      </div>
      {{/rollGreater() result9 5}}
    {{/rollGreater() number 8}}

    {{#rollGreater() number 9}}
    {{#rollBetween() result10 1 3}}
    <div class="rt-row">
      <span class="label rt-label" >Куб 1:</span>
      <span class="rt-value rt-text">{{result10}} -> 0.5</span>
    </div>
    {{/rollBetween() result10 1 3}}

    {{#rollBetween() result10 4 5}}
    <div class="rt-row">
      <span class="label rt-label" >Куб 10:</span>
      <span class="rt-value rt-text">{{result10}} -> 1</span>
    </div>
    {{/rollBetween() result10 4 5}}

    {{#rollGreater() result10 5}}
    <div class="rt-row">
      <span class="label rt-label" >Куб 10:</span>
      <span class="rt-value rt-text">{{result10}} -> 2</span>
    </div>
    {{/rollGreater() result10 5}}
  {{/rollGreater() number 9}}
        <div class="rt-row">
          <span class="rt-value rt-text">Половинки ранений складываются, но лишние — сгорают. Если ты получаешь 2,5 ранения, в итоге ты получишь всего 2 ранения</span>
        </div>
        <div class="rt-row">
          <span class="rt-value rt-text">Вычти из количества полученных ранений твою защиту, и за каждое оставшееся зачеркни ячейку на буклете. Если ты зачёркиваешь последнюю ячейку—ты в Критическом ранении. Получи –1 на все броски</span>
        </div>
        <div class="rt-row">
          <span class="rt-value rt-text">Обычные ранения восстанавливаются за сутки отдыха, а Критическое — за 5-8 дней.</span>
        </div>
    </div>
</div>
</rolltemplate>
<!-- type="text/worker" -->
<script type="text/worker">
    var classNames = {
        Noble: 'Аристократ',
        Cyborg: 'Киборг',
        Companion: 'Компаньонка',
        Courier: 'Курьер',
        Mercenary: 'Наёмник',
        Tactician: 'Тактик',
        Daredevil: 'Сорвиголова',
        Stranger: 'Странник',
        Shadow: 'Тень',
        Manofsteel: 'Броненосец',
        Bountyhunter: 'Охотник за головами',
        Supernova: 'Сверхновая',
        Cenzor: 'Цензор',
        Engineer: 'Инженер',
        Doctor: 'Доктор',
        Juggernaut: 'Джаггернаут',
        Kinetick: 'Кинетик',
        DigitalDao: 'Дао Цифры',
        Emissary: 'Эмиссар',
        Psychomant: 'Психомант',
        Raelith: 'Раэлит',
    }

    var descriptions = {
        Noble: `Хотя Федерация и пытается всеми силами оспорить первенство Империи, всё-таки стоит признать, что после Дня Агонии именно последняя сумела по максимуму сохранить свои традиции и устои. Немаловажную роль в этом сыграли аристократы — привилегированный класс дворян, правящих доменами, из которых состоят миры под властью Императрицы. Но для тебя все сложилось иначе. У тебя нет собственного домена, а потому тебе предстоит самостоятельно найти место в этом мире. Но у тебя всё ещё остались честь, происхождение и жажда власти. А галактика — достаточно непредсказуемое место для того, чтобы дерзкий и смелый юноша мог в итоге сорвать куш и вернуться на родину баснословно богатым аристократом`,
        Cyborg: 'В обществе, где всё направлено на развитие личной эффективности на службе Синдикату, биологические процессы признаны отсталыми. Первая имплантация проводится вскоре после рождения, а модульная платформа позволяет затем изменять и настраивать собственное тело в течение всей жизни. Да, киборгов умеют делать и в других уголках галактики, но только на Тао Прайм это возведено в смысл жизни. Этот процесс как-то уживается с жёстким следованием кодексу чести и неукоснительным соблюдением многочисленных заповедей и табу. Не все выдерживают строгость этих правил.',
        Companion: 'Гильдия Компаньонок — официально зарегистрированная организация, члены которой оказывают широкий спектр специфических услуг. Это эскорт высокопоставленных клиентов на светских и официальных мероприятиях, а также организация досуга. Официальная компаньонка — образованный человек, способный вести беседу на большое количество тем, обладает широким кругозором и набором уникальных навыков (включая редкие сексуальные методики). Получив официальный статус, компаньонка обычно отправляется на поиски клиентов, нередко присоединяясь к группе космических авантюристов, торговцев и искателей приключений. Такой союз даёт ей возможность обзавестись большим количеством полезных контактов, а группе, приютившей её — получить отличного специалиста, способного помочь в тяжёлых переговорах.',
        Courier: 'Информация даёт власть. Ради важных сведений, которых нет ни у кого больше, люди готовы убивать и умирать. Поэтому в развитом обществе так высоко ценятся те, кто способен доставить важные данные в любой уголок галактики, невзирая на все риски. Особенно учитывая, что от системы к системе данные идут не мгновенно. Кому ещё под силу передать клиенту такую информацию, которая может изменить расклад сил, раньше, чем об этом узнают конкуренты? Для тебя эта вечная гонка – обычная работа. Имплант в твоей голове стал надёжным сейфом, взлом которого практически невозможен. Практически, потому что есть один способ, но, к сожалению, при его использовании ты умрёшь. Поэтому ты умеешь прятаться, передвигаться незаметно и использовать любую возможность быть на шаг впереди. Однако в этот раз что-то пошло не так. Вскоре после загрузки ты понял, что в твоей голове есть кто-то ещё...',
        Mercenary: 'Сегодня в галактике большие возможности для человека, умеющего, а главное, не боящегося применять оружие. Наёмники работают телохранителями, рейдерами, курьерами, они выполняют поручения частных лиц, организаций и, порой, правительств. Это опасная, но высокооплачиваемая работа. Выбрав путь наёмника, человек становится экспертом в самом разном вооружении. Он уверенно чувствует себя в пешем бою, за пультом орудий космического корабля или за штурвалом ховертанка. Его арсенал (как вооружения, так и спецсредств) позволяет ему браться за любые задания. Часто наемник присоединяется к группе космических авантюристов, торговцев и искателей приключений. Выгода тут обоюдная — группа получает надёжного защитника, а сам наёмник — возможность работать в любом уголке галактики.',
        Tactician: 'Многие считают, что миром правит сила. Что главным становится тот, у кого современнее оружие или внушительнее армия. Тот, кто может нанести больше урона и выдержать больше ранений. Ну что же… те, кто так считает, на самом деле плохо считают. А вот ты действительно видишь ситуацию такой, какая она есть. И в этом твоё главное преимущество. Твои аналитические навыки и умение планировать действия на несколько шагов вперёд — это таланты, которые всегда в цене. Особенно когда дело доходит до операций, связанных с риском. Стратегия и тактика — твой конёк, так что не стоит забывать подходить к каждой миссии с умом. В принципе, именно умение приложить разум там, где это требуется, и выделяет тебя на фоне обычных искателей приключений. А ещё лёгкая улыбка, знаменующая, что всё идёт согласно плану. Ты любишь, когда план удаётся.',
        Daredevil: 'Когда стрелка спидометра переходит в красный сектор, остальные в ужасе сбрасывают газ. Но не ты — ты знаешь, что до сих пор работала лишь половина клапанов в двигателе твоего ховерцикла. Монстра, на котором ты выступаешь в этом заезде, ты собрала сама, от первой и до последней детали. И это единственное существо, которому ты безоговорочно доверяешь. В тебе сочетается жажда скорости и экстремальных нагрузок и вечное стремление выиграть еще пару долей секунды за счёт четкой настройки оборудования и филигранной подгонки деталей. Свою технику ты обслуживаешь сама, и поэтому не надо удивляться, что порой она умеет немного больше, чем должна.',
        Stranger: 'Когда люди пришли в Галактику Пегас, не все из них смогли найти свой дом. Некоторые так и остались скитальцами, бесконечно странствуя по бездонным глубинам космоса и сталкиваясь с тем, что для обычных людей является лишь легендой. Там они нашли то, что назвали Бездной. Своего бога, чей шёпот в головах аколитов цивилизованное человечество считает лишь проявлением подсознания. Иногда к планетам приближались одинокие корабли Странников, или даже их бродячий флот, Перекати-поле. Космические скитальцы охотно торговали с туземцами, но редко приглашали их на свои суда, а на спускающихся на поверхность сородичей смотрели неодобрительно. Однако 5 лет назад Глашатай, духовный лидер Перекати-поля, объявил, что более это не считается чем-то постыдным. Никаких объяснений не последовало, но с тех пор то тут то там всё чаще замечают долговязые фигуры Странников.',
        Shadow: 'Когда утром следователи находят безжизненное тело в наглухо закрытом изнутри помещении — по планете начинают ползти слухи о призраках, которых нельзя увидеть и от которых нельзя скрыться. Казалось бы, какая дикость, в столь продвинутый век. Клан Ледяного Дракона официально был уничтожен остальными синдикатами Тао много лет назад. Однако до сих пор в сети мелькает информация про неожиданного появившегося и уже ликвидированного члена этого клана, теперь точно последнего. И ещё одного. И ещё. Ты и подобные тебе — карающая длань затаившегося Ледяного Дракона. Официально вас не существует, вы растворяетесь в толпе и способны проникнуть в самые охраняемые убежища. Ваш долг — устранять тех, на кого указывает даймё, постепенно приближаясь к тем, из-за чьего предательства пал синдикат. Несмотря на то, что тебя нельзя остановить, тебе всё-таки нужны соратники. Для большинства из них ты будешь всего лишь странным нелюдимым попутчиком, обладающий удивительной технологией невидимости, и только избранные узнают, кто ты на самом деле. Примут ли они тебя или захотят убить?',
        Manofsteel: 'Регулярные войска редко используют боевые экзоскелеты для солдат, однако при выполнении специальных задач они могут быть полезны. В то же время «на гражданке» бойцы в тяжёлой броне остаются популярным средством обеспечения безопасности — мало кто пожелает встретиться лицом к лицу с закованным в керамопласт трёхметровым гигантом, увешанным оружием как небольшой танк. Особенно популярны такие парни среди мародеров — безбашенных сорвиголов, захватывающих космические суда прямо в открытом космосе. Но далеко не все идут в разбойники — риск не вернуться с межзвёздных путей в космосе довольно большой, поэтому на земле тоже хватает наемников. Купить услуги Броненосца довольно просто — затраты на костюм больно кусают бюджет, поэтому он всегда ищет новые способы подзаработать.',
        Bountyhunter: 'Преступник международного класса. Террорист. Нечистоплотный деловой партнёр. Бывшая жена и её любовник. Ты берёшься за любые контракты, неважно, должен ли выжить объект. Зато у тебя практически не бывает простоев — народу в галактике даже после Дня Агонии так много, что проредить ряды совсем не помешает. Но работа охотника — это не только спустить курок, поймав силуэт в перекрестие прицела. Это поиск и обработка информации, общение с информаторами и планирование операции в целом. Это сложная работа — те, кто не умеют её делать, уже давно лежат, запаянные в цинк. А раз ты все ещё в деле — значит, твои навыки не растерялись, глаз остёр, а сеть информаторов не оскудела.',
        Supernova: 'В Свободном Кластере их миллионы. У их появления множество причин: троян в мозговом импланте, передозировка психонаркотиками, стирание личности как гуманная замена заключению или казни, или просто неудачные эффекты мнемопроцедур —технологии манипулирования памятью не редкость в человеческих мирах. В результате появляются люди с искажёнными или потерянными воспоминаниями, не знающие, кто они и откуда, но рьяно ищущие своё место в мире. Стирание настигает их неожиданно: ещё секунду назад они всё помнили, но мгновение спустя началась их новая жизнь. Часть из них оседает где-нибудь в глуши, в одиночестве постигая нового себя. Другие странствуют по рукаву Приора и берутся за самые безумные дела, в надежде найти осколки своего прошлого. Каждый из них мог быть кем угодно. Поэтому их опасаются — никогда не знаешь, что такой человек может вспомнить, чего от него ждать. Этих людей называют Сверхновыми – за то, что они рождаются заново, и обычно очень ярко горят.',
        Cenzor: 'Многие считают их последними рыцарями галактики. Внутри «Цензуры», таинственной космической цитадели этой организации, самые талантливые шпионы, офицеры, агенты и проходимцы получают новую жизнь, новую цель и новые средства. Они становятся цензорами — последней защитой человечества. Стать цензором сложно, быть цензором опасно, но почётно. Твоя власть сильна, но не безгранична. Многие считают вас всего лишь престижным клубом, слишком много о себе возомнившим. И не жди приказов сверху — ты сам ищешь угрозу, достойную твоего внимания — и если ты её нашёл, ты приложишь все силы ради её ликвидации. Какая угроза достойна? Лишь та, что затронет всё человечество. Но ты должен понимать, что твои противники всегда будут идти до последнего, стараясь остановить тебя. И в этом противостоянии ты сможешь рассчитывать лишь на себя и своих соратников. «Цензура» всегда придёт тебе на помощь в критичной ситуации, но чаще всего ты будешь работать один, и тогда тебе потребуются надежные соратники. Однако помни — ты защищаешь человечество, а потому должен приложить все усилия к достижению этой цели. Если ты встанешь на скользкий путь использования своей власти в корыстных целях — твои же братья объявят угрозой уже тебя.',
        Engineer: 'Все современные технологии, все компьютеры, все звездолёты будут бесполезны и даже опасны, если не найдется человека, который может выяснить, где именно отвинтилась гайка. Инженерное дело лишь кажется сложным. Оно само откроет тебе все свои секреты, если ты будешь отдаваться ему беззаветно. А для тебя это никогда не было проблемой. Ты вообще не знаешь ничего увлекательней, нежели лежать под генератором гравитации и пытаться понять, почему он не работает, почему упрямится. Крайне увлекательная головоломка. Механизмы – это просто. Люди гораздо сложнее. Ты знаешь, чего ждать от того или иного устройства, но человек всегда непредсказуем. Неизвестно, как он устроен. Ты никогда их не понимаешь, и потому предпочитаешь общаться с техникой. По крайней мере, пока к людям не придумают инструкций по эксплуатации.',
        Doctor: 'Говорят, во время Золотого века люди не болели, а их раны затягивались сами собой. Кто знает, правда это или вымысел. Если бы так было и сейчас, твоя профессия была бы бесполезна. Однако современный мир далёк от совершенства, так что у тебя есть работа. В некоторых уголках Свободного Кластера можно легко получить травму или подцепить какую-нибудь заразу, а уж отхватить шальную пулю вообще представляется плевым делом. Поэтому люди, знающие, как держать скальпель в руке, всё ещё в цене. Особенно когда не боятся летающих над головой снарядов. Ты предпочитаешь опасные путешествия уютному офису, ведь именно так ты можешь раскрыть все свои таланты в полной мере. А остальные редко выступают против твоей компании. Когда в команде есть доктор, шансы на выживание всех её членов резко увеличиваются.',
        Juggernaut: '270 лет твои предки знали только холод и борьбу с ледяными монстрами, пока однажды посланцы из-за неба не сказали им, что мир несоизмеримо больше. Они поведали, что считали Вальхаллу непригодной для жизни и нашли тут людей случайно. С тех пор прошло более тридцати лет, но твои сородичи не торопятся покидать мёрзлые пустоши. В отличие от тебя. Ты желаешь покорить Ойкумену. В твоём теле живет симбионт – благодаря им ты и твои сородичи и выжили на Вальхалле. Он дарит тебе тепло и увеличивает возможности организма, а ты кормишь его адреналином. Вы оба живёте ради битвы. Таких как ты называют Джагеррнаутами за несокрушимую мощь, которая вам присуща. Тебе в новинку этот мир: мир странных нравов и чудесных устройств. Мир людей, не знающих мощи ледяных пауков и скорости стылых призраков. У них есть больше, чем им нужно, но нет главного – горячего сердца. Но ты покажешь им, что такое настоящий вальхаллец.',
        Kinetick: 'Если вручить перспективную технологию в руки виртуозного мастера и дать ему время с ней освоиться, то можно сотворить немыслимые вещи. Твой инструмент не просто всегда находится в твоих руках – это и есть твои руки. Ты подвергся операции по изменению генома и теперь можешь управлять одной из главных сил Вселенной – гравитацией. Великая мощь под контролем одного человека, имеющего свои планы на её использование. Технология управления гравитацией известна уже несколько веков, однако лишь совсем недавно учёные смогли синтезировать ген, позволяющий человеку манипулировать этим взаимодействием без каких-либо подручных инструментов. Ходят слухи, что открытие произошло благодаря смерти сотни испытуемых, что в деле фигурировал артефакт другой формы жизни. Но кому какое дело? Ценность этого достижения неоспорима. Несомненно, теперь мир изменится.',
        DigitalDao: 'Сегодня информационные сети проникли повсеместно, и практически не осталось цивилизованного уголка, где бы не применялись IT-технологии того или иного уровня. Но с твоей точки зрения эти технологии — каменный век. Даже те, кто называют себя хакерами с большой буквы, вызывают лишь улыбку. Оттуда, где находишься ты, они выглядят детьми. В отличие от обычных людей, ты не используешь приборы и компьютеры, а общаешься с ними на понятном им языке — языке Цифры. И они тебе помогают. Твой мозг перестроен, чтобы ты мог говорить с ними. Легенды называют таких, как ты, технолордами. Кто-то древний сказал, что любая достаточно развитая технология неотличима от магии. Ты — прямое доказательство этого высказывания. Ты манипулируешь кодом на уровне, расположенном глубже нулей и единиц, превращаешь сложные механизмы в верных друзей. Ты способен видеть истину: весь мир — всего лишь физическая форма информации. Той информации, которая требует подлинного служения, взамен даря безграничные возможности.',
        Emissary: 'Когда-то сильные мира сего сражались с помощью чемпионов – прославленных воинов и защитников, сходившихся лицом к лицу на поле боя. Сейчас же им на смену пришли эмиссары. Их битва ведётся не оружием, а влиянием, силой убеждения и деловой хваткой. Именно они распространяют могущество Корпораций по Галактике. Эмиссар – это сотрудник с чрезвычайно широкими полномочиями. Его офис – он сам, то есть любое место, куда он может дотянуться. Его задача – заключать контракты, вербовать полезных людей и ежеминутно доказывать окружающим, что связать себя с данной корпорацией – лучшая судьба, которую можно избрать. Эмиссарами становятся самые талантливые и хваткие, самые ловкие дельцы и самые располагающие к себе ораторы – ведь их успешность зависит только от них. Если эмиссар что-то сделает не так – работодатель легко от него откажется, но эта игра стоит свеч. Корпорация не нуждается в неудачниках – но щедро одаривает эффективных.',
        Psychomant: 'Создать психоманта непросто — требуются годы тренировок, за которые претенденты учатся контролировать сознание и управлять эмоциями. И подробности этой учёбы неизвестны. Всего несколько мест в Свободном Кластере обучает людей, способных читать чужую память и мысли, и они не спешат открывать свои секреты. Кто-то говорит, что дело в геноме, который втихаря меняют в таких школах. Иные считают, надо быть изначально одарённым. А некоторые утверждают, что психомантия — это своего рода религия, и после долгих медитаций тебе откроется Истина. Как бы то ни было, для тебя всё обучение осталось в прошлом. Теперь тебя мучают головные боли, эмоции ты испытываешь совсем не так, как обычные люди, а перенапряжение иногда приводит к кровотечению из носа или ушей… Но одновременно ты понимаешь, что обладаешь властью, доступной немногим. Тебя боятся самые сильные мира сего. И они же жаждут нанять тебя или сделать союзником. Они просто очень не хотят, чтобы такие, как ты, были их врагами.',
        Raelith: 'Сложно представить врага опаснее для человека, чем Машина. В Пограничье с ней не прекращается война, а иногда дроны появляются и в глубине Кластера. Если ты встретишь дрона, то скорее всего умрёшь, а, если тебе не повезёт — тебя живьём доставят на фабрику, где разберут на органы, соединят с инородными элементами, лишат личности и сделают ещё одной частью Машины. Ты — счастливчик. Тебя спасли раньше, чем этот процесс завершился, и вернули в общество. И, пусть тело твоё уже изменилось, но личность сохранилась. По большей части. Пока ещё. Таких, как ты, называют раэлитами. Вас вытаскивают на разных стадиях ассимиляции, посему даже вы друг друга не понимаете. А от «обычных» людей ты отличаешься куда больше. Ты не робот, не мутант, не киборг, но что-то ещё, сплав плоти (своей и чужой), кибернетики и неизвестных технологий. Но не это самое страшное. Ты знаешь, что ты — часть Машины. Ты чувствуешь с ней связь. Иногда она общается с тобой… если это можно назвать общением. Но даже ты не понимаешь, кто она такая, чего хочет и к чему стремится. Ты знаешь, что Машина неведомым образом поддерживает в тебе жизнь, но для этого тебе надо делать то, что нужно ей. Пока ты сохраняешь контроль над собой… но долго ли это продлится? Как скоро ты угаснешь навсегда или станешь ещё одним дроном? И когда окружающим людям надоест твоё присутствие настолько, что они начнут принимать меры?',
    }

    var look = {
        Noble: `Хитрый, надёжный или невинный взгляд
Атлет, рыхлое или красивое тело
Короткие волосы, стильная причёска или дорогая шляпа
Роскошный наряд, мундир или деловой костюм`,
        Cyborg: `Раскосые, «анимешные» или искусственные глаза
Фиолетовые, наращённые или искусственные волосы
Кукольное, роботизированное или крепкое телосложение
Трубки из головы, кибер-конечность или синтокожа`,
        Companion: `Невинные, горящие или озорные глаза
Экзотическая причёска, ухоженные волосы или стильная укладка
Элегантное платье, дорогая одежда или эпатажный наряд
Точёная фигурка, крепкое тело или пышные формы`,
        Courier: `Цепкий, холодный или затравленный взгляд
Стильная, практичная или экзотическая прическа
Шрам, имплант или косметическая правка лица
Стильный, практичный или яркий костюм`,
        Mercenary: `Холодный, отрешенный или злобный взгляд
Шрам, выбитый зуб или порванное ухо
Военный ежик, небрежные волосы или лысый
Гора мускулов, атлет или жилистый`,
        Tactician: `Проницательный, холодный или презрительный взгляд
Военная стрижка, хвост или лысый
Сутулость, протез или сигарета во рту
Крепкий, накачанный или обычный`,
        Daredevil: `Коварный, безумный или любопытный взгляд
Всклокоченные, грязные, или вьющиеся волосы
Опаленная, загрубевшая или бледная кожа
Тощая, долговязая или коротышка`,
        Stranger: `Нездешний, вопрошающий или пронизывающий взгляд
Очень длинные волосы, выбритый узор или лысый
Высокий и худощавый, гигант или миниатюрный
Бледная, синеватая или искусственно окрашенная кожа`,
        Shadow: `Пустой, острый или ледяной взгляд
Капюшон, короткая стрижка или кибернетический имплант
Комбинезон, спортивный костюм или униформа
Гибкое, атлетическое или очень худое телосложение`,
        Manofsteel: `Холодный, цепкий или агрессивный взгляд.
Шрам на щеке, протез руки или протез ноги.
Лысый, армейский ёжик или неопрятные волосы.
Крупное, мускулистое или жилистое телосложение.`,
        Bountyhunter: `Острый, безразличный или презрительный взгляд;
Обычная причёска, военная стрижка или лысый;
Один глаз, кибер-протез или страшный шрам;
Жилистый, накачанный или обычный`,
        Supernova: `Потерянный, холодный или решительный взгляд
Запущенность, аккуратная или экзотичная причёска
Подтянутое телосложение, средняя форма или калека
Ухоженная, обычная или синтетическая кожа`,
        Cenzor: `Холодный, расчетливый или пронзительный взгляд
Крепкое, атлетическое или худощавое телосложение
Короткая стрижка, лысый или что-то экзотическое
Костюм странного покроя, татуировки или заметные шрамы`,
        Engineer: `Рассеянный, озадаченный или неприязненный взгляд
Цветные волосы, собраны в хвост или грязная шевелюра
Худощавая, в форме или миниатюрная
Заметные импланты, въевшиеся пятна или почти цивильно`,
        Doctor: `Проницательный, интеллектуальный или циничный взгляд
Зализанные, искусственные волосы или короткая стрижка
Худощавая, невысокая или спортивная
Морщины, саркастичная ухмылка или размашистые жесты`,
        Juggernaut: `Яростный, дикий или ясный взгляд
Могучие мускулы, худое или гибкое тело
Татуировки, необычные украшения или страшные шрамы
Нечёсаные космы, ирокез или длинная коса`,
        Kinetick: `Расчётливый, дружелюбный или яростный взгляд
Волосы дыбом, аккуратная или синтетическая шевелюра
Атлетическое, обычное или худощавое телосложение
Шрам, заметный киберимплант или искусственная кожа`,
        DigitalDao: `Визор, глазной имплант или отрешенный взгляд 
Лысый, дреды или абсолютный хаос на голове 
Неопрятный, цифровые татуировки или нервные жесты 
Изможденный вид, измененная внешность или непонятный пол`,
        Emissary: `Внимательный, располагающий или колючий взгляд;
Строгая, модная или экстравагантная прическа;
Респектабельный, молодой или необычный внешний вид;
Эффектные жесты, дружелюбная улыбка или аура доверия.`,
        Psychomant: `Пронзительный взгляд, слишком яркие или неестественные глаза
Дикая прическа, стильная укладка или развевающиеся волосы
Пирсинг, ухоженный или непримечательный внешний вид
Резкие жесты, уходящая в себя или располагающее поведение`,
        Raelith: `Искусственные глаза, страдающий или пугающий взгляд
Запущенный, ухоженный или подчёркнуто вызывающий вид
Обычное телосложение, гротескная фигура или меняющееся тело
Звук сервомоторов, металлическое клацанье или гул реактора`,
    }

    var backgrounds = {
        Noble: {
            preInfo: 'Выбери правящий дом, в котором ты рожден:',
            options: [
                {
                    button: 'Дом Адана',
                    text: 'Фехтование входит в обязательную программу обучения Дома. Твой Урон в ближнем бою увеличен на 1.'
                },
                {
                    button: 'Дом Акоста',
                    text: 'Сражаясь один на один в ближнем бою, ты можешь использовать Репутацию вместо Ярости.'
                },
                {
                    button: 'Дом Алуат',
                    text: 'Спокойный дом, склонный к наблюдению. Когда ты успешно Ориентируешься, задай на 1 вопрос больше.'
                },
                {
                    button: 'Дом Анхил',
                    text: 'Ты свой человек в криминальном мире. Потрать 1 Припас и поменяй в своём ID имя и другие данные.'
                },
                {
                    button: 'Дом Астор',
                    text: 'Твой дом баснословно влиятелен. Раз в сессию, когда Договариваешься, получи 10+. Рычаг всё ещё нужен.'
                },
                {
                    button: 'Дом Дега Росса',
                    text: 'Дом понимает в снабжении. Раз в сессию можешь достать любой не очень редкий предмет. Опиши, откуда.'
                },
                {
                    button: 'Малый дом',
                    text: 'Один раз за сессию ты можешь превратить 6— в 7—9 или 7—9 в 10+, если это пойдет на пользу Дому.'
                },
                {
                    button: 'Кастонианская марка',
                    text: 'Бароны и баронессы — самые гордые люди на свете. Когда ты Помогаешь, один раз в сессию ты можешь превратить проверку союзника в 10+.'
                },
                {
                    button: 'Эмираты Эльхали (только для мужчин)',
                    text: 'Ты — клон самого эмира, созданный лучшими биотехнологами. Обычные ранения на тебе заживают меньше, чем за день, а Критическое — за пару дней. В медкапсулах ты лечишься в два раза быстрее, чем другие.'
                },
                {
                    button: 'Тао Прайм (только для женщин)',
                    text: 'Крылатый единорог — синдикат, управляемый исключительно женщинами и обладающий большим флотом. Выбери 1 имплант с третьего листа Киборга. Впиши его в снаряжение.'
                }
            ]
        },
        Cyborg: {
            preInfo: `Выбери синдикат, который тебя вырастил:`,
            options: [
                {
                    button: 'Багровый лотос',
                    text: '«Смерть не является оправданием». Приказание должно быть выполнено несмотря ни на что. Когда ты испускаешь последний вздох, ты можешь заполнить 2 ячейки Бесчестия и сделать бросок успешным (10+).'
                },
                {
                    button: 'Стальной журавль',
                    text: '«Честь превыше Жизни». Под знаменами этого синдиката служат только безупречные. Когда ты поступил достойно, тут же очисти 1 ячейку Бесчестия. Очисти 2 ячейки, если поступил достойно и в соответствии с выбранными догматами.'
                },
                {
                    button: 'Чёрный лис',
                    text: '«Всё имеет свою цену». Пока у тебя есть хотя бы 1 заполненная ячейка Бесчестия, когда ты Сражаешься, то на 10+ можешь выбрать на 1 вариант больше из списка. Проиграв бой, немедленно заполни 1 ячейку Бесчестия.'
                }
            ]
        },
        Companion: {
            preInfo: `Выбери регион галактики, откуда ты родом или где ты проходила обучение:`,
            options: [
                {
                    button: 'Империя',
                    text: 'Твое знание этикета позволяет тебе производить особое впечатление на любом мероприятии. Ты можешь представить своих спутников так, что на их выходки, за исключением серьёзных нарушений, какое-то время будут закрывать глаза.'
                },
                {
                    button: 'Федерация',
                    text: 'У тебя есть доступ к обширной базе знаний ещё со времён обучения. Один раз за игровую сессию, получи +2, когда Получаешь информацию или пользуешься Образованием.'
                },
                {
                    button: 'Клоака',
                    text: 'Дикие нравы миров Клоаки приучили тебя к осторожности. Когда ты спасаешь свою жизнь (или честь), ты игнорируешь первое полученное в бою (или сцене) ранение.'
                },
                {
                    button: 'Пограничье',
                    text: 'Ты много общалась с военными и знаешь, как выглядеть наименее угрожающе. Если у противников есть выбор, они будут атаковать тебя в последнюю очередь.'
                }
            ]
        },
        Courier: {
            preInfo: `Выбери одно:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Твой статус дает тебе дополнительную защиту от твоих преследователей, ведь аристократы очень не любят, когда среди них что-то вынюхивают. Ты получаешь 1 дополнительную ячейку опасности.'
                },
                {
                    button: 'Федерация',
                    text: 'Тотальный контроль Корпораций над всеми сферами жизни научил тебя пользоваться всеми благами общества. Если тебе нужен специалист определённого профиля, и у тебя есть доступ к информационной сети, проверь Репутацию. На 10+ ты знаешь, где его искать. На 7—9 он может потребовать повышенную плату или ответную услугу.'
                },
                {
                    button: 'Клоака',
                    text: 'Миры, полные беззакония, где алчность часто заставляет пренебречь нормами морали, научили тебя выживать. Когда Игнорируешь угрозу, можешь 1 раз превратить 6— в 7—9.'
                },
                {
                    button: 'Пограничье',
                    text: 'Тебе нужно было работать прямо посреди боевых действий. В бою игнорируй первое полученное ранение.'
                }
            ]
        },  
        Mercenary: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'После службы в войсках у тебя осталось особе оружие. Создавая свое любимое оружие, ты можешь выбрать его тип еще и из таких вариантов: Ионный излучатель или Плазменная винтовка'
                },
                {
                    button: 'Федерация',
                    text: 'Профессионал не смиряется с поражениями. Один раз за сессию ты можешь перебросить любую проверку и выбрать лучший результат — при этом не важно, твою или чужую. Объясни, как ты смог повлиять на результат.'
                },
                {
                    button: 'Клоака',
                    text: 'Твоё оружие не самого лучшего качества, поскольку собрано из запчастей. Зато ты можешь выбрать 1 дополнительный аксессуар для него.'
                },
                {
                    button: 'Пограничье',
                    text: 'Стреляй первым — так тебя учили. В начале боя ты наносишь одному противнику одно ранение автоматически.'
                }
            ]
        },
        Tactician: {
            preInfo: `Выбери свой род занятий, нынешний или прошлый:`,
            options: [
            {
                    button: 'Военный офицер',
                    text: 'Штаб всегда нуждается в тактиках. Ты прошёл множество боёв, и тебе до сих пор мерещатся тактические карты. Ты можешь менять тактики во время боя, но не более одной за действие.'
                },
                {
                    button: 'Безопасник',
                    text: 'Ты отработал немало времени в силах правопорядка или частной охранной конторе. Когда Договариваешься с любыми силовыми структурами, получи +1.'
                },
                {
                    button: 'Детектив',
                    text: 'Тебе хотелось работать с людьми и не зависеть от приказов начальства. Если ты задаёшь людям вопросы, а их ответы используешь при планировании операции, получи на 1 фишку больше, применяя ход Всё по плану.'
                },
                {
                    button: 'Интеллектуал',
                    text: 'Аналитический ум — мощнейший инструмент, позволяющий заниматься практически чем угодно. Ты используешь свой талант для своего же блага. Один раз за сессию можешь увеличить любую проверку Контроля на 1 категорию (с 6— до 7—9 или с 7—9 до 10+)'
                }
            ]
        },
        Daredevil: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Ты — настоящая знаменитость. Раз в сессию можешь спросить невраждебного персонажа, не узнает ли он тебя. За твой автограф он окажет тебе небольшую услугу.'
                },
                {
                    button: 'Федерация',
                    text: 'У тебя всегда был доступ к уникальным деталям и амуниции. Выбери еще 1 элемент из стартового снаряжения.'
                },
                {
                    button: 'Клоака',
                    text: 'Твое долгое и успешное участие в экстремальных гонках дает о себе знать. Выбери еще 1 спецсредство, установленное на твоем транспорте.'
                },
                {
                    button: 'Пограничье',
                    text: 'Ты — что? Зачем ты ездишь на этом? Ты вообще в курсе, что это… дрон Машины? Ты можешь выбрать следующее шасси для своего транспорта: Шагающий дрон'
                }
            ]
        },
        Stranger: {
            preInfo: `Выбери своё происхождение:`,
            options: [
            {
                    button: 'Перекати-поле',
                    text: 'Любое найденное или купленное тобой б/у оборудование после установки будет работать как новое, если оно вообще способно работать.'
                },
                {
                    button: 'Одиночка',
                    text: 'При подлёте к планете или крупному обитаемому объекту, проверь Репутацию. На 7—9 здесь есть твой знакомый, на 10+ вы доверяете друг другу. Это не значит, что вы встречались лично.'
                }
            ]
        },
        Shadow: {
            preInfo: `Выбери своё прошлое:`,
            options: [
            {
                    button: 'Дитя клана',
                    text: 'Тебя с рождения растили воином Ледяного Дракона. Ты прекрасно знаешь свой клан — а вот с остальным миром могут возникнуть сложности.'
                },
                {
                    button: 'Перебежчик',
                    text: 'В твоём прошлом — другой синдикат Тао, покинутый ради правды Ледяного Дракона. У тебя осталось много врагов среди недавних соратников.'
                },
                {
                    button: 'Чужак',
                    text: 'Когда-то тебе не было известно ничего о Ледяном Драконе — пока тебя не завербовали. Теперь ты в клане, но многие соратники не доверяют тебе до сих пор.'
                },
            ]
        },
        Manofsteel:  {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Аристократам важно, чтобы экзоскелет обеспечивал им безопасность в любой ситуации. Когда ты Защищаешь, считай 6— как 7—9.'
                },
                {
                    button: 'Федерация',
                    text: 'Твое соединение с экзоскелетом происходит с помощью нейроимпланта — просто, рационально, эффективно. Один раз в сессию ты можешь перебросить любую проверку, кроме Репутации, если находишься в экзоскелете.'
                },
                {
                    button: 'Клоака',
                    text: 'Зачем тратить миллионы на уникальную разработку, если можно модернизировать портовой погрузчик. Не выбирай каркас экзоскелета, получи вместо него: Погрузчик'
                },
                {
                    button: 'Пограничье',
                    text: 'Постоянная война заставила тебя встроить в оружие резервный механизм срабатывания. Выбери оружие. Один раз в бой его выстрел не тратит батарею.'
                }
            ]
        },
        Bountyhunter: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Чтобы достать аристократов, надо знать больше, чем обычно. Когда используешь ход Ищейка, при успехе выбери на 1 вариант больше.'
                },
                {
                    button: 'Федерация',
                    text: 'За время своей работы одно ты понял чётко — всегда должна быть запасная обойма. Один раз в сессию восстанови до двух своих припасов или припасов одного из соратников.'
                },
                {
                    button: 'Клоака',
                    text: 'Неприметность — залог выживания. Раз в сессию ты можешь сказать, что человек, который с тобой общался, не запомнил тебя и не сможет опознать.'
                },
                {
                    button: 'Пограничье',
                    text: 'Позади множество боёв, научивших тебя выживать. Получи ещё 1 ячейку ранения.'
                }
            ]
        },
        Supernova: {
            preInfo: `Ты не помнишь, откуда ты родом, но ты помнишь то место, где началась новая жизнь. Что было после этого – на твой выбор:`,
            options: [
            {
                    button: 'Заброшенная станция',
                    text: 'Тяжело было жить в одиночестве, пока тебя не подобрал корабль. Когда Ориентируешься, задай на 1 вопрос больше, даже на 6—.'
                },
                {
                    button: 'Трущобы планеты',
                    text: 'Перед тобой лежал труп. Выбраться из этого ада оказалось непросто, но теперь ты умеешь убивать. Получи +1 к урону.'
                },
                {
                    button: 'Крупный корабль во время аварии',
                    text: 'Твоя помощь оказалась кстати. Когда Чинишь или разбираешь, выбери на 1 вариант больше при успехе.'
                },
                {
                    button: 'Зона отдыха элитного квартала',
                    text: 'О тебе позаботились и научили общаться с людьми. Поговорив несколько минут с человеком, ты можешь понять, если он был в чём-то не искренним.'
                },
                {
                    button: 'Рядом с рушащимся зданием Корпорации',
                    text: 'У тебя в кармане оказался страховой полис. Когда получаешь критическое ранение, получи фишку прибыли и талон на бесплатную бан-ку колы (не более раза в сессию).'
                }
            ]
        },
        Cenzor: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Ты попал на Цензуру, потому что разбираешься в людях. После общения с NPC больше 10 минут можешь задать Ведущему 1 вопрос о нём из списка Ориентируешься.'
                },
                {
                    button: 'Федерация',
                    text: 'Ты умеешь играть по законам Корпораций. Один раз в сессию моментально восстанови свои Припасы до 2.'
                },
                {
                    button: 'Клоака',
                    text: 'Жизнь научила тебе действовать быстро. Ты начинаешь любое длительное действие, уже имея 1 фишку.'
                },
                {
                    button: 'Пограничье',
                    text: 'В твоём мире нельзя промахиваться. Когда ты сражаешься, один раз в сессию ты можешь перекинуть 1 проверку Характеристики.'
                }
            ]
        },
        Engineer: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Худшие собеседники из людей – аристократы. Тебе приходилось много с ними общаться, и поэтому на твоём зонде есть дополнительная утилита. Проверь Навык. На 7—9 Ведущий скажет, как собеседник к тебе относится, а на 10+ — с какой вероятностью он врёт.'
                },
                {
                    button: 'Федерация',
                    text: 'Ты умеешь делать качественные вещи. Во время первой игровой сессии ты можешь в любой момент вписать одно сконструированное тобой оборудование уже как часть твоего снаряжения.'
                },
                {
                    button: 'Клоака',
                    text: 'Твой зонд собран так, чтобы приносить пользу в самых разных ситуациях. Выбери ему два типа, а не один.'
                },
                {
                    button: 'Пограничье',
                    text: 'Дополнительная огневая мощь не бывает лишней. При нанесении урона ты можешь тратить Припасы и получать +1 к Урону за каждый.'
                }
            ]
        },
        Doctor: {
            preInfo: `Выбери своё происхождение:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Аристократы — самые капризные люди на свете. Один раз в сессию ты можешь сделать проверну Верного диагноза успешной (10+).'
                },
                {
                    button: 'Федерация',
                    text: 'Ты — врач крупной сети клиник или была им. Прибыв в новое место, проверь Навык. На 7—9 здесь есть кто-то из твоих прежних пациентов. На 10+ он также будет гореть желанием отплатить тебе за помощь.'
                },
                {
                    button: 'Клоака',
                    text: 'Жизнь научила тебя полагаться только на себя — получи +1 Припас.'
                },
                {
                    button: 'Пограничье',
                    text: 'Боевые раны — твоя специализация. В конце боя выбери 1 соратника — он тут же излечивает 1 ранение (даже критическое).'
                }
            ]
        },
        Juggernaut: {
            options: [
                { 
                    button: 'Вальхалла',
                    text: `Под твоей кожей извивается симбионт, который вживляют всем детям суровой ледяной планеты. Он старается мгновенно лечить полученные тобой раны. Ты получаешь Защиту 1.`,
                }
            ]
        },
        Kinetick: {
            preInfo: `Выбери место, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Один из Домов отдал целое состояние, чтобы сделать тебя инструментом своей мести и удовлетворения стремлений. Операция была произведена с особым старанием: один раз при проверке Гравигена можешь превратить 6— в 7—9.'
                },
                {
                    button: 'Федерация',
                    text: 'Твою операцию провела могущественная Корпорация. С их технологиями можно позволить себе больше: Тебе не нужны свободные руки для активации умений, достаточно просто смотреть в нужную точку.'
                },
                {
                    button: 'Клоака',
                    text: 'Клоака: Непростая дорога привела тебя к обретению этих способностей. Зато ты умеешь импровизировать: раз в сессию ты можешь заменить любую проверку броском Гравигена, если сумеешь объяснить, что именно ты делаешь.'
                },
                {
                    button: 'Пограничье',
                    text: 'Абсолют выбирает на роль нового могучего оружия только самых стойких. У тебя +1 ячейка Ранения.'
                }
            ]
        },
        DigitalDao: {
            preInfo: `Выбери одно:`,
            options: [
            {
                    button: 'Верный сын',
                    text: 'Ты пользуешься покровительством старших братьев. Тебе прочат большое будущее, но соответствовать их ожиданиям и выполнять приказы не всегда легко.'
                },
                {
                    button: 'Бегущий от прошлого',
                    text: 'Ты оставил свою предыдущую жизнь, приняв Дао. Но твое прошлое не хочет тебя отпускать, как старая головная боль, и тебе приходится разбираться с ним (быть может, ты известная личность, или имеешь обязательства или назойливых близких).'
                },
                {
                    button: 'Белая ворона',
                    text: 'Ты вынужден был принять Дао не по собственному желанию, или не все были согласны с твоим появлением. Тебе не всегда просто в обществе своих братьев. Но что поделать?..'
                },
                {
                    button: 'Потерявший память',
                    text: 'После Ритуала Соединения ты не помнишь всей своей прошлой жизни. Это неудобно! Время от времени ты получаешь самые неожиданные приветы оттуда, и не все из них приятные.'
                }
            ]
        },
        Emissary: {
            preInfo: `Выбери свою Корпорацию Федерации (или иную):`,
            options: [
            {
                    button: 'Ершалаим',
                    text: 'Ты можешь потратить 1 фишку Прибыли, когда Договариваешься. Считай это полным успехом (10+), и ответная услуга не потребуется. Рычаг тоже не нужен.'
                },
                {
                    button: 'Магадон',
                    text: 'Генетические модификации дают о себе знать: у тебя +1 ячейка Ранения.'
                },
                {
                    button: 'Висдегри',
                    text: 'У тебя есть личный транспорт. Выбери 2: скоростной (+1, когда скорость имеет значение), герметичный (работает в вакууме и под водой), двухместный (+1 пассажир) или грузовой (огромный багажник). Реши, что это.'
                },
                {
                    button: 'Юнити',
                    text: 'Самое лучшее оборудование современности. Выбери ещё 2 элемента снаряжения из списка.'
                },
                {
                    button: 'Иная корпорация',
                    text: 'Малая в Федерации или за её пределами. Ты – специалист в своей сфере. Выбери одну характеристику. Раз в сессию ты можешь сделать любой её бросок успешным (10+), а если получаешь 12+, то обретаешь дополнительные благоприятные последствия, если это уместно.'
                }
            ]
        },
        Psychomant: {
            preInfo: `Выбери регион галактики, откуда ты родом или где прошло твоё обучение:`,
            options: [
            {
                    button: 'Империя',
                    text: 'В мире дворцовых интриг нужно уметь распознавать людей. Пообщавшись с человеком 10 минут, проверь Репутацию: на 7—9 узнай, какую эмоцию он испытывает чаще всего, а какую — реже всего. На 10+ узнай и то, и другое.'
                },
                {
                    button: 'Федерация',
                    text: 'В корпоративном секторе даже эмоции нужно уметь испытывать быстро. Раз в сессию моментально получи одну любую эмоциональную связь с соратником.'
                },
                {
                    button: 'Клоака',
                    text: 'Слишком много врагов, чтобы тратить время и силы. Ты можешь продублировать действие способности на вторую цель, но получи 1 ранение.'
                },
                {
                    button: 'Пограничье',
                    text: 'Психомантами становятся самые стойкие. У тебя на 1 ранение больше. Ранения, полученные в результате применения способностей, через час после получения начинают лечиться сами (по 1 в час).'
                }
            ]
        },
    }
    
    var special = {
        Cyborg: {
            cyborgPath: [
                {
                    button: 'Буси',
                    text: 'Ты — воин сёгуна, преумножающий свою славу и честь синдиката. Твоя цель — показать себя с лучшей стороны и на фоне гайдзинов продемонстрировать превосходство Тао.'
                },
                {
                    button: 'Ронин',
                    text: 'Ты совершил ошибку и покрыл себя позором (или тебя подставили). Ты изгнан из синдиката и скитаешься по Галактике в надежде восстановить свою честь, найти новый дом или умереть достойно.'
                }
            ]
        },
        Stranger: {
            strangerSpecialization: [ 
                {
                    button: 'Слышащий',
                    text: 'Ты – проводник слова Бездны среди Странников, ты много с Ней беседуешь и поясняешь Её волю аколитам. У тебя +1 к максимуму Благосклонности Бездны, и ты в начале нового приключения имеешь одну Благосклонность (иные не имеют ни одной).'
                },
                {
                    button: 'Оберегающий',
                    text: 'В космосе неоткуда ждать помощи, потому надо действовать быстро. У тебя молниеносная реакция, не раз помогавшая экипажу корабля. Наносишь +1 урон.'
                },
                {
                    button: 'Сохраняющий',
                    text: 'В бесконечных странствиях самое важное – держать оборудование в порядке. Когда Чинишь или разбираешь, на 7—9 выбираешь 2.'
                }
            ]
        },
        Juggernaut: {
            juggernautHandicraft: [ 
                {
                    button: 'Воин',
                    text: 'В твоём суровом мире больше всего ценится сила. Слабый никогда не станет вождём. Для достижения тобой новых побед симбионт увеличивает силу и выносливость. Ты значительно больше обычного человека.'
                },
                {
                    button: 'Охотник',
                    text: 'Добыть пищу на Вальхалле непросто. Чтобы выжить, тебе надо быть стремительнее ледяного ветра. Поэтому симбионт увеличивает твою скорость и ловкость. Ты силь-\но меньше собратьев-воинов, но куда быстрее.'
                }
            ]
        },
        Raelith: {
            raelithFunction: [ 
                {
                    button: 'Разрушитель',
                    text: 'От тебя требуется время от времени уничтожать то, что важно для людей. Какие-либо предметы, объекты, цели, намерения, стремления, идеи.'
                },
                {
                    button: 'Разведчик',
                    text: 'От тебя требуется время от времени узнавать то, что важно для людей, и мысленно отправлять эту информацию Машине.'
                }
            ]
        },
    }

    var startAttrs = {
        Noble: {
            atack_max: 1,
            armor_max: 0,
            hp_max: 4,
            gear_max: 2,
            money_max: 3,
            wealth_max: 0
        },
        Cyborg: {
            atack_max: 3,
            armor_max: 1,
            hp_max: 5,
            gear_max: 2,
            money_max: 2,
            wealth_max: 0
        },
        Companion: {},
        Courier: {},
        Mercenary: {},
        Tactician: {},
        Daredevil: {},
        Stranger: {},
        Shadow: {},
        Manofsteel: {},
        Bountyhunter: {},
        Supernova: {},
        Cenzor: {},
        Engineer: {
          hpprobe_max: 2,
        },
        Doctor: {},
        Juggernaut: {},
        Kinetick: {},
        DigitalDao: {},
        Emissary: {},
        Psychomant: {},
        Raelith: {
            atack_max: 2,
            armor_max: 0,
            hp_max: 5,
            gear_max: 2,
            money_max: 1,
            wealth_max: 0
        },
    }
    
    var startGear = {
        Noble: {
            note_text: 'Ты начинаешь игру, имея ID, коммуникатор, кредитный чип, два комплекта одежды высшего качества и огромный чемодан. Так-же у тебя есть фамильный меч (моноклинок, в упор, бесшумное, бронебойное)',
            choose_text: 'Выбери защиту:',
            options: [
                {
                    type: 'item',
                    name: 'Синташелковый мундир дома',
                    details: '(защита 1, скрытый, штатский);'
                },
                {
                    type: 'item',
                    name: 'Энергетический щит',
                    details: '(Потрать 1 припас и полностью игнори-руй урон от одной атаки) в перстне;'
                },
                {
                    type: 'item',
                    name: 'Медицинский браслет',
                    details: '(потрать 1 Припас, чтобы мгновенно прийти в чувство или вылечить некритическое ранение).'
                }
            ]
        },
        Cyborg: {
            note_text: 'Ты начинаешь игру, имея ID, коммуникатор, кредитный чип, два комплекта повседневной одежды (кимоно и что-то менее традиционное) и вместительную сумку, а также монокатану (в упор, бесшумное, бронебойное). Из-за встроенных имплантов твоя Защита составляет 1.',
            choose_text: 'Выбери два:',
            options: [
                {
                    type: 'item',
                    name: 'High-end Коммуникатор',
                    details: 'Твои переговоры крайне сложно прослушать, да и отследить тебя по передатчику коммуникатора невозможно.'
                },
                {
                    type: 'item',
                    name: '«Кикстарт» (в ампулах)',
                    details: 'Когда Сражаешься, потрать Припас и увеличь бросок на 1 категорию.'
                },
                {
                    type: 'item',
                    name: 'Документы на оружие',
                    details: 'Твоя монокатана считается ритуальным предметом и приобретает тег штатский.'
                },
                {
                    type: 'note',
                    name: 'Дополнительный апгрейд',
                    details: 'Ты можешь выбрать еще 1 имплант, расположенный на третьем листе.'
                }
            ]
        },
        Companion: {},
        Courier: {},
        Mercenary: {},
        Tactician: {},
        Daredevil: {},
        Stranger: {},
        Shadow: {},
        Manofsteel: {},
        Bountyhunter: {},
        Supernova: {},
        Cenzor: {},
        Engineer: {},
        Doctor: {},
        Juggernaut: {},
        Kinetick: {},
        DigitalDao: {},
        Emissary: {},
        Psychomant: {},
        Raelith: {
            note_text: 'Ты начинаешь игру, имея ID, встроенный коммуникатор, кредитный чип, комплект скрывающей фигуру одежды, спецкостюм по заказу и полость для вещей. А также электронное удостоверение «пострадавшего от Машины лица» и положенное такому лицу средство самозащиты: нейроизлучатель (средняя, штатский, по твоему желанию — нелетальное)',
            choose_text: 'Выбери два:',
            options: [
                {
                    type: 'note',
                    name: 'Больше отличий',
                    details: 'выбери ещё 1 пункт из хода Не-человек'
                },
                {
                    type: 'item',
                    name: 'Зонд',
                    details: 'небольшая отделяемая часть тела, которая может летать и вести наблюдение. Потрать 1 Припас для запуска'
                },
                {
                    type: 'item',
                    name: 'Имлант «7 of 9»',
                    details: 'раэлитская система самоконтроля. После Единения у тебя сохраняются обрывочные воспоминания. Не работает, когда зачёркнута последняя ячейка Угасания'
                },
                {
                    type: 'item',
                    name: 'Система «Призрак»',
                    details: 'потрать 1 Припас и заставь все электронные системы наблюдения некоторое время сбоить, ве-сти себя странно и не обнаруживать тебя'
                },
                {
                    type: 'item',
                    name: 'Энергоячейка',
                    details: 'потрать 1 Припас и очисти 1 ячейку Угасания, отменив её эффект'
                }
            ]
        },
    }

    var moves = {
      Noble: [
        {
          type: 'start',
          movename_base: 'По моей воле',
          movetrigger: 'Когда ты отдаешь приказ NPC используя свой социальный статус в качестве рычага',
          move_doroll: '1',
          movestat_name: 'Репутация',
          movesuccuess: 'выбери 1',
          movepartial: 'NPC выбирает 1',
          movemiss: '',
          movedetails: `• Он выполняет твой приказ;
• Он отказывается, и ты получаешь +1 против него.`
        },
        {
          type: 'start',
          movename_base: 'Полезные знакомства',
          movetrigger: 'Когда ты ищешь что-то или кого-то',
          move_doroll: '1',
          movestat_name: 'Репутация',
          movesuccuess: 'выбери 1',
          movepartial: 'выбери 2',
          movemiss: 'выбери 3',
          movedetails: `• Это будет стоить тебе кучу денег;
• Это займёт много времени;
• Ты будешь должен ответную услугу;
• Тебе придется поступить недостойно;`
        },
        {
          type: 'start',
          movename_base: 'Свита',
          move_doroll: '0',
          movedetails: `Аристократ не должен путешествовать один, и поэтому тебя всегда сопровождает свита. Специалисты свиты могут выполнять твои небольшие задания. Выбери двух специалистов.
Ты управляешь действиями своих специалистов, пока вы на связи. Если связь пропадает, ты можешь лишь обозначать, как специалист поступил бы в той или иной ситуации. Когда он действует в одиночку, все его характеристики равны 0.
Если специалист погибает, ты легко завербуешь нового в любом населённом месте. Реши, будет это специалист, прибывший из дома, или нанятый местный.`,
          showopt1: "1",
          opt1name: 'Телохранитель',
          opt1details: '(Ярость) Один раз за бой может нанести Урон 3 любому противнику.',
          showopt2: "1",
          opt2name: 'Квартирмейстер',
          opt2details: '(Контроль) Следит, чтобы у тебя под рукой всегда было необходимое. Раз в сессию получи 3 Припаса и распредели их между собой и соратниками.',
          showopt3: '1',
          opt3name: 'Советник',
          opt3details: '(Навык). Когда тебе требуется какой-либо редкий, специализированный или неизвестный навык, 1 раз за сессию ты можешь сказать, что твой Советник им обладает. Получи +1 к проверке, связанной с этим навыком.',
          showopt4: '1',
          opt4name: 'Герольд',
          opt4details: '(Репутация) Он может привлечь к себе внимание всех присутствующих. На какое-то короткое время никто не обращает внимание на тебя и твоих спутников.',        
          opt4details: '(Репутация) Он может привлечь к себе внимание всех присутствующих. На какое-то короткое время никто не обращает внимание на тебя и твоих спутников.',
          opt4details: '(Репутация) Он может привлечь к себе внимание всех присутствующих. На какое-то короткое время никто не обращает внимание на тебя и твоих спутников.',        
        },
        {
          movename_base: 'Вам за это платят',
          movetrigger: 'Когда ты проваливаешь проверку',
          move_doroll: '0',
          movedetails: `специалист твоей свиты, для которого эта характеристика основная (в скобках), может вмешаться, что даст тебе переброс проверки. Один раз за сессию для каждого специалиста`
        },
        {
          movename_base: 'Влиятельные друзья',
          movetrigger: 'Когда ты используешь Полезные знакомства',
          move_doroll: '0',
          movedetails: `выбери на 1 вариант меньше, даже на 6—`
        },
        {
          movename_base: 'Вы слышали?',
          movetrigger: 'Когда ты распространяешь слухи о персоне, месте или предмете',
          move_doroll: '1',
          movestat_name: 'Репутация',
          movesuccuess: 'выбери 2',
          movepartial: 'выбери 1',
          movedetails: `• Почти все верят тебе;
• Слухи распространяются максимально быстро;
• Никто не отследит источник слухов;`
        },
        {
          movename_base: 'Превосходство напоказ',
          movetrigger: 'Когда ты оскорбляешь или угрожаешь человеку',
          move_doroll: '1',
          movestat_name: 'Репутация',
          movesuccuess: 'получи +1 против него, пока он не успокоится',
          movepartial: 'он совершает ошибку (фокусируется на тебе, выбалтывает лишнее и т.д.)',
        },
        {
          movename_base: 'Прямой наследник',
          move_doroll: '0',
          movedetails: `Теперь ты прямой наследник лорда высокого ранга. Все, для кого это важно, будут относиться к тебе с особым уважением и с удовольствием окажут тебе услуги в надежде на твою благосклонность`
        },
        {
          movename_base: 'Свита — новый специалист',
          move_doroll: '0',
          movedetails: `Выбери еще одного специалиста и добавь его к себе в свиту`
        },
        {
          movename_base: 'Свита — эксперт',
          move_doroll: '0',
          movedetails: `Один из твоих специалистов приобретает новый ход. Отметь его`,
          showopt1: "1",
          opt1name: 'Телохранитель',
          opt1details: '1 раз за бой может прикрыть тебя от полученного урона. Проигнорируй этот Урон.',
          showopt2: "1",
          opt2name: 'Квартирмейстер',
          opt2details: 'может 1 раз в сессию достать что-либо необходимое. Проверь Репутацию. На 10+ у тебя есть желаемое, на 7—9 его придётся долго ждать, или это будет тебе чего-то стоить.',
          showopt3: "1",
          opt3name: 'Советник',
          opt3details: '1 раз за сессию может вылечить суммарно три ранения (или 1 Критическое) кому угодно.',
          showopt4: "1",
          opt4name: 'Герольд',
          opt4details: '1 раз в сессию может представить тебя кому-то. Назови факт, который этот человек знает о тебе.',
        },
        {
          movename_base: 'Свита — эксперт',
          move_doroll: '0',
          movedetails: `Отметь ход ещё одного специалиста.`
        },
        {
          movename_base: 'Чужими руками.',
          move_doroll: '0',
          movedetails: `1 раз в сессию ты можешь приказать каждому специалисту сделать что-то вместо тебя. Его основная характеристика (в скобках) при этом получает +2`
        },
        {
          movename_base: 'Мировой',
          move_doroll: '0',
          movedetails: `Выбери специальный ход другого класса`
        },
      ],
      Cyborg: [
        {
          type: 'start',
          movename_base: 'Больше, чем человек',
          move_doroll: '0',
          movedetails: `Ты — машина, созданная в элитных цехах синдикатов Тао. Выбери 2 кибернетических импланта из тех, что находятся на третьем листе.`,                                
        },
        {
          type: 'start',
          movename_base: 'Кодекс чести:',
          move_doroll: '0',
          movedetails: `Ты соблюдаешь кодекс чести, в котором тебя воспитали. Когда ты поступаешь бесчестно, опозорив себя или свой клан, отметь 1 ячейку Бесчестия. Ведущий может превра-тить один твой бросок в 6— за каждую заполненную ячейку Бесчестия в течение сессии.
Посмотри на постулаты кодекса чести. Когда ты поступаешь достойно и в соответствии с выбранными постулатами, очисти 1 заполненную ячейку. Когда ты нарушаешь выбранный постулат, заполни 1 ячейку.`,
          showopt1: "1",
          opt1name: '',
          opt1details: 'Не позволяй другим превзойти тебя на твоём пути.',
          showopt2: "1",
          opt2name: '',
          opt2details: 'Будь всегда полезен господину.',
          showopt3: '1',
          opt3name: '',
          opt3details: 'Проявляй великое сострадание и помогай людям.',
          showopt4: '1',
          opt4name: '',
          opt4details: 'Прежде чем выразить человеку свое мнение, подумай о том, в состоянии ли он его принять.',
          showopt5: '1',
          opt5name: '',
          opt5details: 'Совершив ошибку, ты должен тут же её исправить.',
          showopt6: '1',
          opt6name: '',
          opt6details: 'Избегай большого количества сакэ, чрезмерной гордости и великой роскоши.',
          showopt7: '1',
          opt7name: '',
          opt7details: 'Совершенствование не имеет конца.',
          showopt8: '1',
          opt8name: '',
          opt8details: 'Путь самурая — это стремление к смерти.',
          showopt9: '1',
          opt9name: '',
          opt9details: 'Следует взвешивать каждое слово и неизменно задавать себе вопрос, правда ли то, что собираешься сказать.',
        },
      ],
      Raelith: [
        {
          type: 'start',
          movename_base: 'Сделка с дьяволом',
          move_doroll: '0',
          movedetails: `Твоя жизнь поддерживается смертельным врагом человечества — Машиной, и это жизнь на лезвии ножа между Единением и Угасанием. Тебе надо исполнять Функцию, и это проблема не только для тебя: ведь исполнение задач Машины ничего хорошего для людей не несёт.`
        },
      ]
    }
    
    on("sheet:opened", function() {
        getAttrs(["character_class"], function(v) {
            update = {};
            if (v.character_class == null || v.character_class == "") {
                update["tip_confirm_flag"] = "0";
            } else {
                update["tip_confirm_flag"] = "1";
            }
            setAttrs(update);
        });
    });

    on("change:page", function() {
        getAttrs(["page"], function(v) {
            setAttrs({sheetTab:v.page});
        });
    });
    
    on("change:moves_page", function() {
        getAttrs(["moves_page"], function(v) {
            setAttrs({moveTab:v.moves_page});
        });
    });
    
    on("clicked:changeclass", function() {
        setAttrs({warning_flag: 0})
    })
    
    on("clicked:changeclasscancel", function() {
        setAttrs({warning_flag: 1})
    })

    function removeRepeatingSection(sectionName, cb) {
        getSectionIDs(`repeating_${sectionName}`, function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow(`repeating_${sectionName}_${idarray[i]}`);
            }
            if(cb && _.isFunction(cb)) cb()
        });
    }

    on("clicked:changeclassconfirm", function() {
        const sectionToRemove = [
            'background',
            'cyborgPath',
            'strangerSpecialization',
            'juggernautHandicraft',
            'raelithFunction',
            'startgear',
            'moves',
            'moves-upgrade'
        ]
        sectionToRemove.forEach(removeRepeatingSection);
        const update = {
            tip_confirm_flag: 0,
            warning_flag: 1,
            description: ' ',
            backgroundtype: ' ',
            backgroundtext: ' ',
            cyborgPath_show_flag: 0,
            cyborgPathtype: ' ',
            cyborgPathtext: ' ',
            strangerSpecializationtype: ' ',
            strangerSpecializationtext: ' ',
            strangerSpecialization_show_flag: 0,
            juggernautHandicrafttype: ' ',
            juggernautHandicrafttext: ' ',
            juggernautHandicraft_show_flag: 0,
            raelithFunctiontype: ' ',
            raelithFunctiontext: ' ',
            raelithFunction_show_flag: 0,
            look_example: ' ',
            character_class: ' ',
            comp_name: ' ',
            "background_show_flag": 0,
            "pre_background": ' ',
            isCyborgBackground: 0,
            isCyborgPath: 0,
            isCyborgImplants: 0,
            isCyborgDishonor: 0,
            isCourierDanger: 0,
            isMervenaryDeath: 0,
            isStrangerFavor: 0,
            isSupernovaImpro: 0,
            isJuggernautAdrenaline: 0,
            isDigitaldaoOverload: 0,
            isEmissaryStatus: 0,
            isRaelithFade: 0,
            isDaredevilTech: 0,
            isEngineerProbe: 0,
            isManofsteelArmor: 0,
            isShadowBackground: 0,
            isStrangerSpec: 0,
            isJuggernautHandicraft: 0,
            isRaelithFunction: 0,
            "filter-all": 0
        }
        Object.keys(classNames).forEach(c => update['filter-' + c.toLowerCase()] = 0)
        setAttrs(update)
    })

    on("clicked:noble", function(eventinfo) {
        setupClass("Noble");
    });

    on("clicked:cyborg", function(eventinfo) {
        var update = addRepeatingInfo(special.Cyborg.cyborgPath, 'cyborgPath')
        update.isCyborgBackground = "on";
        update.isCyborgPath = "on";
        update.isCyborgImplants = "on";
        update.isCyborgDishonor = "on"
        update.cyborgPath_show_flag = "on";
        setAttrs(update, undefined, function() {setupClass("Cyborg")})
    });

    on("change:isCyborgPath", (e) => {
        removeRepeatingSection('cyborgPath', () => {
            if(e.newValue=="on") {
                var update = addRepeatingInfo(special.Cyborg.cyborgPath, 'cyborgPath')
                update.cyborgPath_show_flag = "on"
                setAttrs(update)
            }
        });
    })

    on("clicked:companion", () => {
        setupClass('Companion');
    });
    
    on("clicked:courier", () => {
      var update = {}
      update.isCourierDanger = "on"
      setAttrs(update, undefined, () => setupClass('Courier'))
    });
    
    on("clicked:mercenary", () => {
      var update = {}
      update.isMervenaryDeath = "on"
      setAttrs(update, undefined, () => setupClass('Mercenary'))
    });
    
    on("clicked:tactician", () => {
        setupClass('Tactician');
    });
    
    on("clicked:daredevil", () => {
        var update = {}
        update.isDaredevilTech = "on";
        setAttrs(update, undefined, function() {setupClass("Daredevil")})
    });
    
    on("clicked:stranger", () => {
        var update = addRepeatingInfo(special.Stranger.strangerSpecialization, 'strangerSpecialization')
        update.isStrangerSpec = "on";
        update.strangerSpecialization_show_flag = "on";
        update.isStrangerFavor = "on";
        setAttrs(update, undefined, function() {setupClass("Stranger")})
    });

    on("change:isStrangerSpec", (e) => {
        removeRepeatingSection('strangerSpecialization', () => {
            if(e.newValue=="on") {
                var update = addRepeatingInfo(special.Stranger.strangerSpecialization, 'strangerSpecialization')
                update.strangerSpecialization_show_flag = "on"
                setAttrs(update)
            }
        });
    })
    
    on("clicked:shadow", () => {
        var update = {};
        update.isShadowBackground = "on";
        setAttrs(update, undefined, function() {setupClass("Shadow")});
    });
    
    on("clicked:manofsteel", () => {
        setAttrs({isManofsteelArmor: "on"}, () => {setupClass('Manofsteel')})
    });
    
    on("clicked:bountyhunter", () => {
        setupClass('Bountyhunter');
    });
    
    on("clicked:supernova", () => {
      var update = {}
      update.isSupernovaImpro = "on"
      setAttrs(update, undefined, () => setupClass('Supernova'));
    });
    
    on("clicked:cenzor", () => {
        setupClass('Cenzor');
    });
    
    on("clicked:engineer", () => {
        setAttrs({isEngineerProbe: "on"}, () => {setupClass('Engineer')})
    });
    
    on("clicked:doctor", () => {
        setupClass('Doctor');
    });
    
    on("clicked:juggernaut", () => {
        var update = addRepeatingInfo(special.Juggernaut.juggernautHandicraft, 'juggernautHandicraft')
        update.isJuggernautHandicraft = "on";
        update.juggernautHandicraft_show_flag = "on";
        update.isJuggernautAdrenaline = "on";
        setAttrs(update, undefined, function() {setupClass("Juggernaut")})
    });

    on("change:isJuggernautHandicraft", (e) => {
        removeRepeatingSection('juggernautHandicraft', () => {
            if(e.newValue=="on") {
                var update = addRepeatingInfo(special.Juggernaut.juggernautHandicraft, 'juggernautHandicraft')
                update.juggernautHandicraft_show_flag = "on"
                setAttrs(update)
            }
        });
    })
    
    on("clicked:kinetick", () => {
        setupClass('Kinetick');
    });
    
    on("clicked:digitaldao", () => {
      var update = {};
      update.isDigitaldaoOverload = "on"
      setAttrs(update, undefined, () => setupClass('DigitalDao'))
    });
    
    on("clicked:emissary", () => {
      var update = {}
      update.isEmissaryStatus = "on"
      setAttrs(update, undefined, () => setupClass('Emissary'))
    });
    
    on("clicked:psychomant", () => {
        setupClass('Psychomant');
    });
    
    on("clicked:raelith", () => {
        var update = addRepeatingInfo(special.Raelith.raelithFunction, 'raelithFunction')
        update.isRaelithFunction = "on";
        update.raelithFunction_show_flag = "on";
        update.isRaelithFade = "on";
        setAttrs(update, undefined, function() {setupClass("Raelith")})
    });

    on("change:isRaelithFunction", (e) => {
        removeRepeatingSection('raelithFunction', () => {
            if(e.newValue=="on") {
                var update = addRepeatingInfo(special.Raelith.raelithFunction, 'raelithFunction')
                update.raelithFunction_show_flag = "on"
                setAttrs(update)
            }
        });
    })

    function addRepeatingInfo(options, param) {
        var update = {}
        options.forEach(function(row) {
            var  newbackid = generateRowID();
            var prefix = `repeating_${param}_${newbackid}_`;
            for(var key of Object.keys(row)) {
                update[`${prefix}${key}`] = row[key];
            }
        })
        return update;
    }

    on("clicked:cancelclass", function(eventinfo) {
        setAttrs({tip_confirm_flag: 1}, "silent");
    });

    on('clicked:changebackground', function(eventInfo) {
        setAttrs({"background_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_background:select', function() {
        getAttrs(["repeating_background_button", "repeating_background_text"], (v) => {
			setAttrs({
                backgroundtype: v.repeating_background_button || '',
                backgroundtext: v.repeating_background_text || '',
                background_show_flag: 1
			});
		});
    })

    on('clicked:repeating_background:setting', function() {
        getAttrs(["repeating_background_settingsshowflag"], (v) => {
			setAttrs({
                repeating_background_settingsshowflag: v.repeating_background_settingsshowflag && v.repeating_background_settingsshowflag == '1' ? 0 : 1
			});
		});
    })

    on('clicked:changecyborgPath', function() {
        setAttrs({"cyborgPath_show_flag": "on"}, 'silent');
    });

    on('clicked:repeating_cyborgPath:select', () => {
        getAttrs(["repeating_cyborgPath_button", "repeating_cyborgPath_text"], (v) => {
			setAttrs({
                cyborgPathtype: v.repeating_cyborgPath_button,
                cyborgPathtext: v.repeating_cyborgPath_text,
                cyborgPath_show_flag: 0
			});
		});
    });

    on('clicked:repeating_cyborgPath:setting', function() {
        getAttrs(["repeating_cyborgPath_settingsshowflag"], (v) => {
            setAttrs({
                repeating_cyborgPath_settingsshowflag: v.repeating_cyborgPath_settingsshowflag && v.repeating_cyborgPath_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changestrangerSpecialization', function() {
        setAttrs({"strangerSpecialization_show_flag": "on"}, 'silent');
    });

    on('clicked:repeating_strangerSpecialization:select', () => {
        getAttrs(["repeating_strangerSpecialization_button", "repeating_strangerSpecialization_text"], (v) => {
			setAttrs({
                strangerSpecializationtype: v.repeating_strangerSpecialization_button,
                strangerSpecializationtext: v.repeating_strangerSpecialization_text,
                strangerSpecialization_show_flag: 0
			});
		});
    });

    on('clicked:repeating_strangerSpecialization:setting', function() {
        getAttrs(["repeating_strangerSpecialization_settingsshowflag"], (v) => {
            setAttrs({
                repeating_strangerSpecialization_settingsshowflag: v.repeating_strangerSpecialization_settingsshowflag && v.repeating_strangerSpecialization_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changejuggernautHandicraft', function() {
        setAttrs({"juggernautHandicraft_show_flag": "on"}, 'silent');
    });

    on('clicked:repeating_juggernautHandicraft:select', () => {
        getAttrs(["repeating_juggernautHandicraft_button", "repeating_juggernautHandicraft_text"], (v) => {
			setAttrs({
                juggernautHandicrafttype: v.repeating_juggernautHandicraft_button,
                juggernautHandicrafttext: v.repeating_juggernautHandicraft_text,
                juggernautHandicraft_show_flag: 0
			});
		});
    });

    on('clicked:repeating_juggernautHandicraft:setting', function() {
        getAttrs(["repeating_juggernautHandicraft_settingsshowflag"], (v) => {
            setAttrs({
                repeating_juggernautHandicraft_settingsshowflag: v.repeating_juggernautHandicraft_settingsshowflag && v.repeating_juggernautHandicraft_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changeraelithFunction', function() {
        setAttrs({"raelithFunction_show_flag": "on"}, 'silent');
    });

    on('clicked:repeating_raelithFunction:select', () => {
        getAttrs(["repeating_raelithFunction_button", "repeating_raelithFunction_text"], (v) => {
			setAttrs({
                raelithFunctiontype: v.repeating_raelithFunction_button,
                raelithFunctiontext: v.repeating_raelithFunction_text,
                raelithFunction_show_flag: 0
			});
		});
    });

    on('clicked:repeating_raelithFunction:setting', function() {
        getAttrs(["repeating_raelithFunction_settingsshowflag"], (v) => {
            setAttrs({
                repeating_raelithFunction_settingsshowflag: v.repeating_raelithFunction_settingsshowflag && v.repeating_raelithFunction_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    var setupClass = function(classname) {
        var update = {};
        update['character_class'] = classNames[classname]
        update['comp_name'] = classname
        update['description'] = descriptions[classname]
        update['look_example'] = look[classname]
        update['tip_confirm_flag'] = 1
        update['warning_flag'] = 1
        update['tab-moves'] = classname
        update['filter-' + classname.toLowerCase()] = "on"
        var backgroundUpdate = {}
        if(backgrounds[classname]) {
            backgroundUpdate = addRepeatingInfo(backgrounds[classname].options, 'background')
            if(backgrounds[classname].preInfo) {
                backgroundUpdate.pre_background = backgrounds[classname].preInfo
            }
        }
        var attr = startAttrs[classname]
        var gear = addRepeatingInfo(startGear[classname].options, 'startgear')
        gear.startgear_note_text = startGear[classname].note_text
        gear.startgear_choose_text = startGear[classname].choose_text
        var movesdata =  addRepeatingInfo(moves[classname].filter(m => m.type=='start'), 'moves')
        const upMoves = []
        Object.keys(moves).forEach(c => upMoves.push(...moves[c].filter(m => c !== classname || m.type !== 'start').map(el => ({...el, moveclass: c}))))
        var movesUpgradedata = {}
        if(upMoves.length > 0) movesUpgradedata = addRepeatingInfo(upMoves, 'moves-upgrade') 
        setAttrs({...update, ...backgroundUpdate, ...attr, ...gear, ...movesdata, ...movesUpgradedata});
    };

    on("clicked:expand_look", function() {
        getAttrs(["expand_look"], function(v) {
          setAttrs({
            "expand_look": v["expand_look"] == 1 ? 0 : 1
          });
        });
    });

    on("clicked:changedesciption", function() {
        getAttrs(["changing_desciption"], function(v) {
          setAttrs({
            "changing_desciption": v["changing_desciption"] == 1 ? 0 : 1
          });
        });
    });

    on('clicked:subtractmaxatack', ()=> {
        getAttrs(['atack_max', 'atack'], (v) => {
            let update = {};
            update.atack_max = parseInt(v.atack_max) -1 < 1 ? 1 : parseInt(v.atack_max) - 1
            if(parseInt(v.atack_max) -1 < parseInt(v.atack)) {
                update.atack = update.atack_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxatack', ()=> {
        getAttrs(['atack_max'], (v) => {
            var update = {
                atack_max: parseInt(v.atack_max) + 1 > 5 ? 5 : parseInt(v.atack_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxarmor', ()=> {
        getAttrs(['armor_max', 'armor'], (v) => {
            let update = {};
            update.armor_max = parseInt(v.armor_max) -1 < 0 ? 0 : parseInt(v.armor_max) - 1
            if(parseInt(v.armor_max) -1 < parseInt(v.armor)) {
                update.armor = update.armor_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxarmor', ()=> {
        getAttrs(['armor_max'], (v) => {
            var update = {
                armor_max: parseInt(v.armor_max) + 1 > 5 ? 5 : parseInt(v.armor_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxhp', ()=> {
        getAttrs(['hp_max', 'hp'], (v) => {
            let update = {};
            update.hp_max = parseInt(v.hp_max) -1 < 1 ? 1 : parseInt(v.hp_max) - 1
            if(parseInt(v.hp_max) -1 < parseInt(v.hp)) {
                update.hp = update.hp_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxhp', ()=> {
        getAttrs(['hp_max'], (v) => {
            var update = {
                hp_max: parseInt(v.hp_max) + 1 > 5 ? 5 : parseInt(v.hp_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxhpprobe', ()=> {
      getAttrs(['hpprobe_max', 'hpprobe'], (v) => {
          let update = {};
          update.hpprobe_max = parseInt(v.hpprobe_max) -1 < 1 ? 1 : parseInt(v.hpprobe_max) - 1
          if(parseInt(v.hpprobe_max) -1 < parseInt(v.hpprobe)) {
              update.hpprobe = update.hpprobe_max
          }
          setAttrs(update);
      })
  })

    on('clicked:addmaxhpprobe', ()=> {
        getAttrs(['hpprobe_max'], (v) => {
            var update = {
                hpprobe_max: parseInt(v.hpprobe_max) + 1 > 3 ? 3 : parseInt(v.hpprobe_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxpowerprobe', ()=> {
        getAttrs(['powerprobe_max', 'powerprobe'], (v) => {
            let update = {};
            update.powerprobe_max = parseInt(v.powerprobe_max) -1 < 1 ? 1 : parseInt(v.powerprobe_max) - 1
            if(parseInt(v.powerprobe_max) -1 < parseInt(v.powerprobe)) {
                update.powerprobe = update.powerprobe_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxpowerprobe', ()=> {
        getAttrs(['powerprobe_max'], (v) => {
            var update = {
                powerprobe_max: parseInt(v.powerprobe_max) + 1 > 18 ? 18 : parseInt(v.powerprobe_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxgear', ()=> {
        getAttrs(['gear_max', 'gear'], (v) => {
            let update = {};
            update.gear_max = parseInt(v.gear_max) -1 < 1 ? 1 : parseInt(v.gear_max) - 1
            if(parseInt(v.gear_max) -1 < parseInt(v.gear)) {
                update.gear = update.gear_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxgear', ()=> {
        getAttrs(['gear_max'], (v) => {
            var update = {
                gear_max: parseInt(v.gear_max) + 1 > 10 ? 10 : parseInt(v.gear_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxmoney', ()=> {
        getAttrs(['money_max', 'money'], (v) => {
            let update = {};
            update.money_max = parseInt(v.money_max) -1 < 1 ? 1 : parseInt(v.money_max) - 1
            if(parseInt(v.money_max) -1 < parseInt(v.money)) {
                update.money = update.money_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxmoney', ()=> {
        getAttrs(['money_max'], (v) => {
            var update = {
                money_max: parseInt(v.money_max) + 1 > 5 ? 5 : parseInt(v.money_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxwealth', ()=> {
        getAttrs(['wealth_max', 'wealth'], (v) => {
            let update = {};
            update.wealth_max = parseInt(v.wealth_max) -1 < 0 ? 0 : parseInt(v.wealth_max) - 1
            if(parseInt(v.wealth_max) -1 < parseInt(v.wealth)) {
                update.wealth = update.wealth_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxwealth', ()=> {
        getAttrs(['wealth_max'], (v) => {
            var update = {
                wealth_max: parseInt(v.wealth_max) + 1 > 3 ? 3 : parseInt(v.wealth_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxpowermanofsteel', ()=> {
        getAttrs(['powermanofsteel_max', 'powermanofsteel'], (v) => {
            let update = {};
            update.powermanofsteel_max = parseInt(v.powermanofsteel_max) -1 < 0 ? 0 : parseInt(v.powermanofsteel_max) - 1
            if(parseInt(v.powermanofsteel_max) -1 < parseInt(v.powermanofsteel)) {
                update.powermanofsteel = update.powermanofsteel_max
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxcyborgdishonour', ()=> {
        getAttrs(['cyborgdishonour_max', 'cyborgdishonour'], (v) => {
            let update = {};
            update.cyborgdishonour_max = parseInt(v.cyborgdishonour_max) -1 < 0 ? 0 : parseInt(v.cyborgdishonour_max) - 1
            if(parseInt(v.cyborgdishonour_max) -1 < parseInt(v.cyborgdishonour)) {
                update.cyborgdishonour = update.cyborgdishonour_max
            }
            setAttrs(update);
        })
    })
    
    on('clicked:addmaxcyborgdishonour', ()=> {
        getAttrs(['cyborgdishonour_max'], (v) => {
            var update = {
                cyborgdishonour_max: parseInt(v.cyborgdishonour_max) + 1 > 5 ? 5 : parseInt(v.cyborgdishonour_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxcourierdanger', ()=> {
        getAttrs(['courierdanger_max', 'courierdanger'], (v) => {
            let update = {};
            update.courierdanger_max = parseInt(v.courierdanger_max) -1 < 0 ? 0 : parseInt(v.courierdanger_max) - 1
            if(parseInt(v.courierdanger_max) -1 < parseInt(v.courierdanger)) {
                update.courierdanger = update.courierdanger_max
            }
            setAttrs(update);
        })
    })
    
    on('clicked:addmaxcourierdanger', ()=> {
        getAttrs(['courierdanger_max'], (v) => {
            var update = {
                courierdanger_max: parseInt(v.courierdanger_max) + 1 > 6 ? 6 : parseInt(v.courierdanger_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxstrangerfavor', ()=> {
        getAttrs(['strangerfavor_max', 'strangerfavor'], (v) => {
            let update = {};
            update.strangerfavor_max = parseInt(v.strangerfavor_max) -1 < 0 ? 0 : parseInt(v.strangerfavor_max) - 1
            if(parseInt(v.strangerfavor_max) -1 < parseInt(v.strangerfavor)) {
                update.strangerfavor = update.strangerfavor_max
            }
            setAttrs(update);
        })
    })
    
    on('clicked:addmaxstrangerfavor', ()=> {
        getAttrs(['strangerfavor_max'], (v) => {
            var update = {
                strangerfavor_max: parseInt(v.strangerfavor_max) + 1 > 5 ? 5 : parseInt(v.strangerfavor_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxpowermanofsteel', ()=> {
        getAttrs(['powermanofsteel_max'], (v) => {
            var update = {
                powermanofsteel_max: parseInt(v.powermanofsteel_max) + 1 > 10 ? 10 : parseInt(v.powermanofsteel_max) + 1
            }
            setAttrs(update);
        })
    })

    /* MOVES SECTION START */
    const movesStats = [
        'moveclass',
        'movename_base',
        'movetrigger',
        'move_doroll',
        'movestat_name',
        'movesuccuess',
        'movepartial',
        'movemiss',
        'movedetails',
        'showopt1',
        'opt1name',
        'opt1details',
        'showopt2',
        'opt2name',
        'opt2details',
        'showopt3',
        'opt3name',
        'opt3details',
        'showopt4',
        'opt4name',
        'opt4details',
        'showopt5',
        'opt5name',
        'opt5details',
        'showopt6',
        'opt6name',
        'opt6details',
        'showopt7',
        'opt7name',
        'opt7details',
        'showopt8',
        'opt8name',
        'opt8details',
        'showopt9',
        'opt9name',
        'opt9details',
    ]

    var statnameToStatQuery = function(statname) {
        if (statname == "--") return "0[no stat]";
        if (statname == "Ярость") return "(@{furry})[furry]";
        if (statname == "Контроль") return "(@{controll})[controll]";
        if (statname == "Навык") return "(@{skill})[skill]";
        if (statname == "Репутация") return "(@{reputation})[reputation]";
        if (statname == "Благосостояние") return "(@{money})[money]";
        if (statname == "?") return "@{statmod_query}";
        if (statname == "Связь") return "@{bond_query}";
        return "0[no stat]";
    }

    on("change:repeating_moves:expanddescriptionval", function() {
        getAttrs([
            "repeating_moves_movetrigger",
            "repeating_moves_move_doroll",
            "repeating_moves_movestat_name",
            "repeating_moves_movesuccess",
            "repeating_moves_movepartial",
            "repeating_moves_movemiss",
            "repeating_moves_movedetails",
            "repeating_moves_moveoptional"
        ], function(v) {
            var text = ''
            if(v.repeating_moves_movetrigger) text += `Когда: ${v.repeating_moves_movetrigger}\r\n` 
            if(v.repeating_moves_move_doroll == '1') {
                var stat = `Проверь: ${v.repeating_moves_movestat_name}`
                if(v.repeating_moves_movestat_name == '--') stat = 'Брось 2d6'
                if(v.repeating_moves_movestat_name == '?') stat = 'Проверь нужную харрактеристику'
                text += `${stat}\r\n`
                if(v.repeating_moves_movesuccess) text += `При успехе: ${v.repeating_moves_movesuccess}\r\n`
                if(v.repeating_moves_movepartial) text += `При частичном успехе: ${v.repeating_moves_movepartial}\r\n`
                if(v.repeating_moves_movemiss) text += `При провале: ${v.repeating_moves_movemiss}\r\n`
            }
            if(v.repeating_moves_movedetails) text += `${v.repeating_moves_movedetails}\r\n\r\n`
            if(v.repeating_moves_moveoptional) text += `${v.repeating_moves_moveoptional}`
            setAttrs({
                repeating_moves_movetext: text || ' '
            });
        })
    }) 

    on("change:repeating_moves:movename_base", function() {
        getAttrs(["repeating_moves_movename_base"], function(values) {
            setAttrs({
                repeating_moves_move_name: values.repeating_moves_movename_base
            });
        });
    });

    on("change:repeating_moves:movestat_name", function() {
        getAttrs(["repeating_moves_movestat_name"], function(values) {
            setAttrs({
                repeating_moves_movestat: statnameToStatQuery(values.repeating_moves_movestat_name)
            });
        });
    });

    const moveButtons = ["expanddescription", "expandsettings", "expandoptional"]

    moveButtons.forEach(b => {
        on(`clicked:repeating_moves:${b}`, () => {
            getAttrs(moveButtons.map(s=> `repeating_moves_${s}val`), (v) => {
                var newValue = v[`repeating_moves_${b}val`] == "0" ? "1" : "0";
                var update = moveButtons.reduce((acc, s) => ({...acc, [`repeating_moves_${s}val`]: newValue == "1" ? "0" : v[`repeating_moves_${s}val`]}), {})
                setAttrs({
                    ...update,
                    [`repeating_moves_${b}val`]: newValue
                })
            })
        })
    })

    on("change:repeating_moves:move_doroll", function() {
        getAttrs(["repeating_moves_move_doroll", "repeating_moves_movestat"], function(v) {
            if (v.repeating_moves_move_doroll != "1" && v.repeating_moves_movestat == "@{statmod_query}")
                setAttrs({repeating_moves_movestat: 0});
        });
    });

    on("clicked:expand_upgrade", function() {
        getAttrs(["expand_upgrade"], function(v) {
          setAttrs({
            "expand_upgrade": v["expand_upgrade"] == 1 ? 0 : 1
          });
        });
    });

    on("clicked:repeating_moves-upgrade:addmove", function() {
        getAttrs(movesStats.map(s => `repeating_moves-upgrade_${s}`), (v) => {
            const id = generateRowID()
            const upgrade = {}
            movesStats.forEach(s => {
                upgrade[`repeating_moves_${id}_${s}`]=  v[`repeating_moves-upgrade_${s}`] || ""
            })
            setAttrs(upgrade)
        })
    })

    on("change:repeating_bonds", function(eventInfo) {
        getSectionIDs("repeating_bonds", function(ids) {
            if (ids.length == 0){
                setAttrs({
                    bond_query: "(0)[Other Bond]"
                });
                return;
            }
            
            var attrs = [];
            for(var i=0; i < ids.length; i++) {
                var attr = "repeating_bonds_" + ids[i] + "_bond_simple";
                attrs.push(attr);
            }
            
            getAttrs(attrs, function(v) {
                var bonds = {};
                _.each(v, function(val, attrName) {
                    if (val in bonds){
                        bonds[val] += 1;
                    }else{
                        bonds[val] = 1;
                    }
                });
                
                var query = "?{Связь";
                _.each(bonds, function(count, name) {
                    query = query.concat(`|${name}, (${count})[Bonds with ${name}]`);
                });
                query = query.concat("|Other, (0)[Other Bond]}");
                
                setAttrs({
                    bond_query: query
                });
            });
        });
    });
    
    const opts = ["opt1", "opt2", "opt3", "opt4", "opt5", "opt6"]
    on(opts.map(o => `change:repeating_moves:show${o}`).join(" "), (e) => {
        getAttrs(opts.map(o => `repeating_moves_show${o}`), vals => {
            const source = e.sourceAttribute.split('_').pop().replace('show', '')
            setAttrs({
                repeating_moves_showexpandmoveoptional: _.values(vals).includes("1") ? "1" : "0",
                [`repeating_moves_${source}`]: "0"
            })
        })
    })

    on(opts.map(o => `change:repeating_moves:${o}`).join(" "), (e) => {
        getAttrs([
            ...opts.map(o => `repeating_moves_${o}`),
            ...opts.map(o => `repeating_moves_${o}name`),
            ...opts.map(o => `repeating_moves_${o}details`)
        ], vals => {
            let text = ''
            for(let o of opts)  {
                if(vals[`repeating_moves_${o}`]==="1") {
                    text += `□ ${vals[`repeating_moves_${o}name`]}: ${vals[`repeating_moves_${o}details`]}

`
                }
            }
            setAttrs({
                repeating_moves_moveoptional: text
            })
        })
    })

    /* MOVES SECTION END */

    /* MOVES-UPGRADE SECTION START */
    var statnameToStatQuery = function(statname) {
      if (statname == "--") return "0[no stat]";
      if (statname == "Ярость") return "(@{furry})[furry]";
      if (statname == "Контроль") return "(@{controll})[controll]";
      if (statname == "Навык") return "(@{skill})[skill]";
      if (statname == "Репутация") return "(@{reputation})[reputation]";
      if (statname == "Благосостояние") return "(@{money})[money]";
      if (statname == "?") return "@{statmod_query}";
      if (statname == "Связь") return "@{bond_query}";
      return "0[no stat]";
    }

    on("change:repeating_moves-upgrade:expanddescriptionval", function() {
        getAttrs([
            "repeating_moves-upgrade_movetrigger",
            "repeating_moves-upgrade_move_doroll",
            "repeating_moves-upgrade_movestat_name",
            "repeating_moves-upgrade_movesuccess",
            "repeating_moves-upgrade_movepartial",
            "repeating_moves-upgrade_movemiss",
            "repeating_moves-upgrade_movedetails",
            "repeating_moves-upgrade_moveoptional"
        ], function(v) {
            console.log(v)
            var text = ''
            if(v["repeating_moves-upgrade_movetrigger"]) text += `Когда: ${v["repeating_moves-upgrade_movetrigger"]}\r\n` 
            if(v["repeating_moves-upgrade_move_doroll"] == '1') {
                var stat = `Проверь: ${v["repeating_moves-upgrade_movestat_name"]}`
                if(v["repeating_moves-upgrade_movestat_name"] == '--') stat = 'Брось 2d6'
                if(v["repeating_moves-upgrade_movestat_name"] == '?') stat = 'Проверь нужную харрактеристику'
                text += `${stat}\r\n`
                if(v["repeating_moves-upgrade_movesuccess"]) text += `При успехе: ${v["repeating_moves-upgrade_movesuccess"]}\r\n`
                if(v["repeating_moves-upgrade_movepartial"]) text += `При частичном успехе: ${v["repeating_moves-upgrade_movepartial"]}\r\n`
                if(v["repeating_moves-upgrade_movemiss"]) text += `При провале: ${v["repeating_moves-upgrade_movemiss"]}\r\n`
            }
            if(v["repeating_moves-upgrade_movedetails"]) text += `${v["repeating_moves-upgrade_movedetails"]}\r\n\r\n`
            if(v["repeating_moves-upgrade_moveoptional"]) text += `${v["repeating_moves-upgrade_moveoptional"]}`
            setAttrs({
                "repeating_moves-upgrade_movetext": text || ' '
            });
        })
    }) 

    on("change:repeating_moves-upgrade:movename_base", function() {
        getAttrs(["repeating_moves-upgrade_movename_base"], function(values) {
            setAttrs({
                "repeating_moves-upgrade_move_name": values["repeating_moves-upgrade_movename_base"]
            });
        });
    });

    on("change:repeating_moves-upgrade:movestat_name", function() {
        getAttrs(["repeating_moves-upgrade_movestat_name"], function(values) {
            setAttrs({
                "repeating_moves-upgrade_movestat": statnameToStatQuery(values["repeating_moves-upgrade_movestat_name"])
            });
        });
    });

    moveButtons.forEach(b => {
        on(`clicked:repeating_moves-upgrade:${b}`, () => {
            getAttrs(moveButtons.map(s=> `repeating_moves-upgrade_${s}val`), (v) => {
                var newValue = v[`repeating_moves-upgrade_${b}val`] == "0" ? "1" : "0";
                var update = moveButtons.reduce((acc, s) => ({...acc, [`repeating_moves-upgrade_${s}val`]: newValue == "1" ? "0" : v[`repeating_moves-upgrade_${s}val`]}), {})
                setAttrs({
                    ...update,
                    [`repeating_moves-upgrade_${b}val`]: newValue
                })
            })
        })
    })

    on("change:repeating_moves-upgrade:move_doroll", function() {
        getAttrs(["repeating_moves-upgrade_move_doroll", "repeating_moves-upgrade_movestat"], function(v) {
            if (v["repeating_moves-upgrade_move_doroll"] != "1" && v["repeating_moves-upgrade_movestat"] == "@{statmod_query}")
                setAttrs({"repeating_moves-upgrade_movestat": 0});
        });
    });
    
    on(opts.map(o => `change:repeating_moves-upgrade:show${o}`).join(" "), (e) => {
        getAttrs(opts.map(o => `repeating_moves-upgrade_show${o}`), vals => {
            const source = e.sourceAttribute.split('_').pop().replace('show', '')
            setAttrs({
                "repeating_moves-upgrade_showexpandmoveoptional": _.values(vals).includes("1") ? "1" : "0",
                [`repeating_moves-upgrade_${source}`]: "0"
            })
        })
    })

    on(opts.map(o => `change:repeating_moves-upgrade:${o}`).join(" "), (e) => {
        getAttrs([
            ...opts.map(o => `repeating_moves-upgrade_${o}`),
            ...opts.map(o => `repeating_moves-upgrade_${o}name`),
            ...opts.map(o => `repeating_moves-upgrade_${o}details`)
        ], vals => {
            let text = ''
            for(let o of opts)  {
                if(vals[`repeating_moves-upgrade_${o}`]==="1") {
                    text += `□ ${vals[`repeating_moves-upgrade_${o}name`]}: ${vals[`repeating_moves-upgrade_${o}details`]}

    `
                }
            }
            setAttrs({
                "repeating_moves-upgrade_moveoptional": text
            })
        })
    }) 

    /* MOVES-UPGRADE SECTION END */
    /* STARTGEAR SECTION START */
    on(`clicked:repeating_startgear:get`, function() {
        getAttrs(['repeating_startgear_name', 'repeating_startgear_details', 'repeating_startgear_type'], function(v) {
            if(v.repeating_startgear_type == 'item') {
                var newrowid = generateRowID();
                var newItem = {}
                newItem[`repeating_inventory_${newrowid}_inventory_simple`] = v.repeating_startgear_name;
                newItem[`repeating_inventory_${newrowid}_inventory_details`] = v.repeating_startgear_details;
                setAttrs(newItem);
            } else {
                getAttrs(['notes'], (vv) => {
                    setAttrs({
                        notes: vv.notes += `\n${v.repeating_startgear_name}: ${v.repeating_startgear_details}`
                    })
                })
            }

        });
    });
    /* STARTGEAR SECTION END */
</script>