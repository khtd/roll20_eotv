<div class="container">

    <div class="header-container">
        <img class="logo" src="https://github.com/khtd/roll20_eotv/blob/master/EotV_Logotype_3.png?raw=true">

        <div class="name-container">
            <span class="name-label">Имя</span>
            <input type="text" class="name-input" name="attr_character_name">
        </div>

        <div class="class-container">
            <span class="class-label">Класс</span>
            <input type="hidden" name="attr_comp_name">
            <input type="hidden" name="attr_comp_classmoves">
            <span class="class-span" name="attr_character_class"></span>
            <button type='action' class='change-button class-change-button' name='act_changeclass'>Изменить</button>
        </div>

        <div class="exp-container">
            <strong class="exp-label">EXP.</strong>
            <input type="checkbox" class="exp-box exp-box0" name="attr_exp" value="0" checked="checked">
            <input type="checkbox" class="exp-box exp-box1" name="attr_exp" value="1"><span class="exp-box1"></span>
            <input type="checkbox" class="exp-box exp-box2" name="attr_exp" value="2"><span class="exp-box2"></span>
            <input type="checkbox" class="exp-box exp-box3" name="attr_exp" value="3"><span class="exp-box3"></span>
            <input type="checkbox" class="exp-box exp-box4" name="attr_exp" value="4"><span class="exp-box4"></span>
            <strong class="exp-up-label">Уровень</strong>
            <input type="checkbox" class="exp-box exp-box5" name="attr_exp" value="5"><span class="exp-box5"></span>
         </div>
    </div>

    <div class="navigation-container">
        <div class="nav-tabs">
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page1" checked="checked">
                <span>лист 1</span>
            </label>
            <label class="nav-button">
                <input type="radio"  name="attr_page" value="page2">
                <span>лист 2</span>
            </label>
        </div>
    </div>
    <input type='hidden' class='tabstoggle' name='attr_sheetTab'  value='page1'/>


    <div class="page page1">
        <div class='description'>
            <span name="attr_description"></span>
        </div>

        <input type="checkbox" class="is-raelith-flag" name="attr_isRaelith" value="1" checked="false">
        <div class="background">
            <div class="title">
                <h3><span>ПРОИСХОЖДЕНИЕ</span></h3>
                <button type='action' class='change-button' name='act_changebackground'>p</button>
            </div>

            <input type="checkbox" class="is-cyborg-flag" name="attr_isCyborg" value="1" checked="false">
            <div class="additional-background cyborg-additional">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outAddBackground' value="&{template:info} {{name=@{character_name}}} {{type=Тао Прайм}} {{item=Происхождение}} {{description=Ты родился на Тао. С рождения твоё тело модифицировали кибер-имплантами. Когда общаешься с выходцем с Тао, можешь говорить так, что гайдзины вас не поймут.}}">w</button>
                <span><strong>Тао Прайм:</strong> Ты родился на Тао. С рождения твоё тело модифицировали кибер-имплантами. Когда общаешься с выходцем с Тао, можешь говорить так, что гайдзины вас не поймут.</span>
            </div>

            <input type="checkbox" class="is-shadow-flag" name="attr_isShadow" value="1" checked="false">
            <div class="additional-background shadow-additional">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outAddBackground' value="&{template:info} {{name=@{character_name}}} {{type=Тао (Клоака)}} {{item=Происхождение}} {{description=Ты принадлежишь синдикату Ледяного Дракона. У тебя тоже есть кодекс чести, просто он внутренний — это то, что другие кланы так и не смогли принять. Ты — человек вне системы. Но ты не в одиночестве—иногда ты можешь получить задание. Это значит, что кто-то скоро умрёт.}}">w</button>
                <span><strong>Тао (Клоака):</strong> Ты принадлежишь синдикату Ледяного Дракона. У тебя тоже есть кодекс чести, просто он внутренний — это то, что другие кланы так и не смогли принять. Ты — человек вне системы. Но ты не в одиночестве—иногда ты можешь получить задание. Это значит, что кто-то скоро умрёт.</span>
            </div>
            
            <div class="background-text">
                <button type='roll' class="backgroundOutput infoOutput" name='roll_outBackground' value="&{template:info} {{name=@{character_name}}} {{type=@{backgroundtype}}} {{item=Происхождение}} {{description=@{backgroundtext}}}">w</button>
                <strong><span name="attr_backgroundtype"></span>:</strong><span name="attr_backgroundtext"></span>
            </div>

           
            <input type="checkbox" class="background-show-flag" name="attr_background_show_flag" value="1">
            <div class='background-select'>
                <span class='emptiable' name="attr_pre_background"></span>
                <fieldset class='repeating_background'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>

        </div>

        <input type="checkbox" class="is-cyborg-flag" name="attr_isCyborg" value="1" checked="false">
        <div class='cyborg-additional cyborg-path'>
            <div class="title">
                <h3><span>ПУТЬ</span></h3>
                <button type='action' class='change-button' name='act_changecyborgPath'>p</button><br>
            </div>


            <div class="cyborgPath">
                <button type='roll' class="cyborgPathOutput infoOutput" name='roll_outCyborgPath' value="&{template:info} {{name=@{character_name}}} {{type=@{cyborgPathtype}}} {{item=Путь}} {{description=@{cyborgPathtext}}}">w</button>
                <strong><span name="attr_cyborgPathtype"></span>:</strong><span name="attr_cyborgPathtext"></span>
            </div>

            <input type="checkbox" class="cyborgPath-show-flag" name="attr_cyborgPath_show_flag" value="1" checked="false">
            <div class="cyborgPath-select">
                <span>Выбери мотив, который вынуждает тебя путешествовать:</span>
                <fieldset class='repeating_cyborgPath'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-stranger-flag" name="attr_isStranger" value="1" checked="false">
        <div class='stranger-additional stranger-specialization'>
            <div class="title">
                <h3><span>Специализация</span></h3>
                <button type='action' class='change-button' name='act_changestrangerSpecialization'>p</button><br>
            </div>
            
            <div class="strangerSpecialization">
                <button type='roll' class="strangerSpecializationOutput infoOutput" name='roll_outStrangerSpecialization' value="&{template:info} {{name=@{character_name}}} {{type=@{strangerSpecializationtype}}} {{item=Специализация}} {{description=@{strangerSpecializationtext}}}">w</button>
                <strong><span name="attr_strangerSpecializationtype"></span>:</strong><span name="attr_strangerSpecializationtext"></span>
            </div>

            <input type="checkbox" class="strangerSpecialization-show-flag" name="attr_strangerSpecialization_show_flag" value="1" checked="false">
            <div class="strangerSpecialization-select">
                <span>Это то, чем ты занимаешься в иерархии странников. Выбери 1:</span>
                <fieldset class='repeating_strangerSpecialization'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-juggernaut-flag" name="attr_isJuggernaut" value="1" checked="false">
        <div class='juggernaut-additional juggernaut-handicraft'>
            <div class="title">
                <h3><span>Ремесло</span></h3>
                <button type='action' class='change-button' name='act_changejuggernautHandicraft'>p</button><br>
            </div>
            
            <div class="juggernautHandicraft">
                <button type='roll' class="juggernautHandicraftOutput infoOutput" name='roll_outJuggernautHandicraft' value="&{template:info} {{name=@{character_name}}} {{type=@{juggernautHandicrafttype}}} {{item=Ремесло}} {{description=@{juggernautHandicrafttext}}}">w</button>
                <strong><span name="attr_juggernautHandicrafttype"></span>:</strong><span name="attr_juggernautHandicrafttext"></span>
            </div>

            <input type="checkbox" class="juggernautHandicraft-show-flag" name="attr_juggernautHandicraft_show_flag" value="1" checked="false">
            <div class="juggernautHandicraft-select">
                <span>Какова была твоя роль в племени? Ты можешь брать Усиления только своего Ремесла. Выбери 1:</span>
                <fieldset class='repeating_juggernautHandicraft'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <input type="checkbox" class="is-raelith-flag" name="attr_isRaelith" value="1" checked="false">
        <div class='raelith-additional raelith-function'>
            <div class="title">
                <h3><span>Функция</span></h3>
                <button type='action' class='change-button' name='act_changeraelithFunction'>p</button><br>
            </div>

            <div>
                <span>Машина создавала тебя для определённых задач, и это влияет на твоё поведение. Машина ждёт, что ты будешь исполнять свою функцию. Иногда Машина может напрямую указать, что ей важно. В иных случаях ты можешь строить предположения самостоятельно. </span>
            </div>
            
            <div class="raelithFunction">
                <button type='roll' class="raelithFunctionOutput infoOutput" name='roll_outStrangerFunction' value="&{template:info} {{name=@{character_name}}} {{type=@{raelithFunctiontype}}} {{item=Функция}} {{description=@{raelithFunctiontext}}}">w</button>
                <strong><span name="attr_raelithFunctiontype"></span>:</strong><span name="attr_raelithFunctiontext"></span>
            </div>

            <input type="checkbox" class="raelithFunction-show-flag" name="attr_raelithFunction_show_flag" value="1" checked="false">
            <div class="raelithFunction-select">
                <span>Выбери один вариант:</span>
                <fieldset class='repeating_raelithFunction'>
                    <button type="action"  class="setting" name='act_setting'>y</button>
                    <button type="action" name="act_select" value='@{attr_button}'><span name='attr_button'></span></button>
                    <span name="attr_text"></span>
                    <input type="checkbox" class="show-settings" name="attr_settingsshowflag" value="1" checked='false'>
                    <div>
                        <input type='text'name='attr_button' value='Название'>
                        <textarea name="attr_text">Текст</textarea>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="look">
            <input type="checkbox" class="expand-hidden" name="attr_expand_look" value="1" checked="true">
            <div class="sheet-title">
                <h3><span>ВНЕШНИЙ ВИД</span></h3>
                <button type="action" name="act_expand_look" class="expand-look">
                    <span class="expanded">▼</span>
                    <span class="notexpanded">◀</span>
                </button>
            </div>
            <textarea class="look-example" name="attr_look_example" readonly="true"></textarea>
            <textarea class="look-input" name='attr_look'></textarea>
        </div>
    </div>

    <div class="page page2">
        <div class="attributes">
            <div class='main-attributes'>
                <div class='furry attribute-container'>
                    <span class='attribute-name'>Ярость</span>
                    <input class='attribute-input' name='attr_furry' type='number'>
                </div>
                <div class='controll attribute-container'>
                    <span class='attribute-name'>Контроль</span>
                    <input class='attribute-input' name='attr_controll' type='number'>
                </div>
                <div class='skill attribute-container'>
                    <span class='attribute-name'>Навык</span>
                    <input class='attribute-input' name='attr_skill' type='number'>
                </div>
                <div class='reputation attribute-container'>
                    <span class='attribute-name'>Репутация</span>
                    <input class='attribute-input' name='attr_reputation' type='number'>
                </div>
            </div>

            <div class='sub-attributes'>
                <div class='atack sub-attribute-container'>
                    <span class='atack-lbl'>Атака</span>
                    <input type="checkbox" class="atack-box atack-box0" name="attr_atack" value="0" checked="checked">
                    <input type="checkbox" class="atack-box atack-box1" name="attr_atack" value="1"><span class="atack-box1"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="1">
                    <input type="checkbox" class="atack-box atack-box2" name="attr_atack" value="2"><span class="atack-box2"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="2">
                    <input type="checkbox" class="atack-box atack-box3" name="attr_atack" value="3"><span class="atack-box3"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="3">
                    <input type="checkbox" class="atack-box atack-box4" name="attr_atack" value="4"><span class="atack-box4"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="4">
                    <input type="checkbox" class="atack-box atack-box5" name="attr_atack" value="5"><span class="atack-box5"></span>
                    <input type="checkbox" class ="atack-max" name="attr_atack_max" value="5">
                    <button type="action" class="addatackbutton" name='act_addmaxatack'>&</button>
                    <button type="action" class="sbstrctatackbutton" name='act_subtractmaxatack'>_</button>
                </div>

                <div class='armor sub-attribute-container'>
                    <span class='armor-lbl'>Броня</span>
                    <input type="checkbox" class="armor-box armor-box0" name="attr_armor" value="0" checked="checked">
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="0">
                    <input type="checkbox" class="armor-box armor-box1" name="attr_armor" value="1"><span class="armor-box1"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="1">
                    <input type="checkbox" class="armor-box armor-box2" name="attr_armor" value="2"><span class="armor-box2"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="2">
                    <input type="checkbox" class="armor-box armor-box3" name="attr_armor" value="3"><span class="armor-box3"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="3">
                    <input type="checkbox" class="armor-box armor-box4" name="attr_armor" value="4"><span class="armor-box4"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="4">
                    <input type="checkbox" class="armor-box armor-box5" name="attr_armor" value="5"><span class="armor-box5"></span>
                    <input type="checkbox" class ="armor-max" name="attr_armor_max" value="5">
                    <button type="action" class="addarmorbutton" name='act_addmaxarmor'>&</button>
                    <button type="action" class="sbstrctarmorbutton" name='act_subtractmaxarmor'>_</button>
                </div>

                <div class='hp sub-attribute-container'>
                    <span class='hp-lbl'>Здоровье</span>
                    <input type="checkbox" class="hp-box hp-box0" name="attr_hp" value="0" checked="checked">
                    <input type="checkbox" class="hp-box hp-box1" name="attr_hp" value="1"><span class="hp-box1"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="1">
                    <input type="checkbox" class="hp-box hp-box2" name="attr_hp" value="2"><span class="hp-box2"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="2">
                    <input type="checkbox" class="hp-box hp-box3" name="attr_hp" value="3"><span class="hp-box3"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="3">
                    <input type="checkbox" class="hp-box hp-box4" name="attr_hp" value="4"><span class="hp-box4"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="4">
                    <input type="checkbox" class="hp-box hp-box5" name="attr_hp" value="5"><span class="hp-box5"></span>
                    <input type="checkbox" class ="hp-max" name="attr_hp_max" value="5">
                    <button type="action" class="addhpbutton" name='act_addmaxhp'>&</button>
                    <button type="action" class="sbstrcthpbutton" name='act_subtractmaxhp'>_</button>
                </div>

                <div class='gear sub-attribute-container'>
                    <span class='gear-lbl'>Обеспечение</span>
                    <input type="checkbox" class="gear-box gear-box0" name="attr_gear" value="0" checked="checked">
                    <input type="checkbox" class="gear-box gear-box1" name="attr_gear" value="1"><span class="gear-box1"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="1">
                    <input type="checkbox" class="gear-box gear-box2" name="attr_gear" value="2"><span class="gear-box2"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="2">
                    <input type="checkbox" class="gear-box gear-box3" name="attr_gear" value="3"><span class="gear-box3"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="3">
                    <input type="checkbox" class="gear-box gear-box4" name="attr_gear" value="4"><span class="gear-box4"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="4">
                    <input type="checkbox" class="gear-box gear-box5" name="attr_gear" value="5"><span class="gear-box5"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="5">
                    <input type="checkbox" class="gear-box gear-box6" name="attr_gear" value="6"><span class="gear-box6"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="6">
                    <input type="checkbox" class="gear-box gear-box7" name="attr_gear" value="7"><span class="gear-box7"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="7">
                    <input type="checkbox" class="gear-box gear-box8" name="attr_gear" value="8"><span class="gear-box8"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="8">
                    <input type="checkbox" class="gear-box gear-box9" name="attr_gear" value="9"><span class="gear-box9"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="9">
                    <input type="checkbox" class="gear-box gear-box10" name="attr_gear" value="10"><span class="gear-box10"></span>
                    <input type="checkbox" class ="gear-max" name="attr_gear_max" value="10">
                    <button type="action" class="addgearbutton" name='act_addmaxgear'>&</button>
                    <button type="action" class="sbstrctgearbutton" name='act_subtractmaxgear'>_</button>
                </div>
            </div>

            <div class='fortune'>
                
                <div class='money fortune-container'>
                    <span class='money-lbl'>Деньги</span>
                    <input type="checkbox" class="money-box money-box0" name="attr_money" value="0" checked="checked">
                    <input type="checkbox" class="money-box money-box1" name="attr_money" value="1"><span class="money-box1"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="1">
                    <input type="checkbox" class="money-box money-box2" name="attr_money" value="2"><span class="money-box2"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="2">
                    <input type="checkbox" class="money-box money-box3" name="attr_money" value="3"><span class="money-box3"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="3">
                    <input type="checkbox" class="money-box money-box4" name="attr_money" value="4"><span class="money-box4"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="4">
                    <input type="checkbox" class="money-box money-box5" name="attr_money" value="5"><span class="money-box5"></span>
                    <input type="checkbox" class ="money-max" name="attr_money_max" value="5">
                    <button type="action" class="addmoneybutton" name='act_addmaxmoney'>&</button>
                    <button type="action" class="sbstrctmoneybutton" name='act_subtractmaxmoney'>_</button>
                </div>

                <div class='wealth fortune-container'>
                    <span class='wealth-lbl'>Достаток</span>
                    <input type="checkbox" class="wealth-box wealth-box0" name="attr_wealth" value="0" checked="checked">
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="0">
                    <input type="checkbox" class="wealth-box wealth-box1" name="attr_wealth" value="1"><span class="wealth-box1"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="1">
                    <input type="checkbox" class="wealth-box wealth-box2" name="attr_wealth" value="2"><span class="wealth-box2"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="2">
                    <input type="checkbox" class="wealth-box wealth-box3" name="attr_wealth" value="3"><span class="wealth-box3"></span>
                    <input type="checkbox" class ="wealth-max" name="attr_wealth_max" value="3">
                    <button type="action" class="addwealthbutton" name='act_addmaxwealth'>&</button>
                    <button type="action" class="sbstrctwealthbutton" name='act_subtractmaxwealth'>_</button>
                </div>
            </div>
        </div>

        <div class='inventory'>
            <span class='inventory-label'>Снаряжение</span>
            <fieldset class="repeating_inventory">
                <div class="inventory-main">
                    <input type="text" name="attr_inventory_simple" />
                    <input class="expander expand-inventory" type="checkbox" name="attr_expand_inventory" value="1" title="Expand for additional notes" checked="checked" />
                    <span> </span>
                    <div class="inventory-expansion">
                        <textarea name="attr_inventory_details"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class="bonds">
            <span class='bonds-label'>Связи</span>
            <fieldset class="repeating_bonds">
                <div class="bonds-main">
                    <input type="text" name="attr_bond_simple" />
                    <input class="expander expand-bond" type="checkbox" name="attr_expand_bond" value="1" title="Expand for additional notes" checked="checked" />
                    <span> </span>
                    <div class="bond-expansion">
                        <textarea name="attr_bond_details"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>

        <div class='notes'>
            <span class='notes-label'>Заметки</span>
            <textarea class="notes-input" name='attr_notes'></textarea>
        </div>
    </div>
</div>

<!-- Start welcome -->

<input type="checkbox" class="tip-confirm-flag" name="attr_tip_confirm_flag" value="1">
<div class="class-tip">
	<button type="action" class="cancel-button" name="act_cancelclass">&#128473;</button>
	<h3><span>Выбор буклета</span></h3>
	<p><span>Welcome to the Edge of The Verse Character Sheet!  To get started select class from the choices below:</span></p>
    <div>
        <span>Основные</span><br>
        <button type="action" name="act_noble">Аристократ</button>
        <button type="action" name="act_cyborg">Киборг</button>
        <button type="action" name="act_companion">Компаньонка</button>
        <button type="action" name="act_courier">Курьер</button>
        <button type="action" name="act_mercenary">Наёмник</button>
        <button type="action" name="act_tactician">Тактик</button>
        <button type="action" name="act_daredevil">Сорвиголова</button>
        <button type="action" name="act_stranger">Странник</button>
        <button type="action" name="act_shadow">Тень</button>
        <button type="action" name="act_manofsteel">Броненосец</button>
    </div>
    <div>
        <span>Дополнительные</span><br>
        <button type="action" name="act_bountyhunter">Охотник за головами</button>
        <button type="action" name="act_supernova">Сверхновая</button>
        <button type="action" name="act_cenzor">Цензор</button>
        <button type="action" name="act_engineer">Инженер</button>
        <button type="action" name="act_doctor">Доктор</button>
        <button type="action" name="act_juggernaut">Джаггернаут</button>
        <button type="action" name="act_kinetick">Кинетик</button>
        <button type="action" name="act_digitaldao">Дао Цифры</button>
        <button type="action" name="act_emissary">Эмиссар</button>
        <button type="action" name="act_psychomant">Психомант</button>
        <button type="action" name="act_raelith">Раэлит</button>
    </div>    
</div>

<rolltemplate class="sheet-rolltemplate-info">
    <div class="sheet-templateMain">
        <h2 class="sheet-templateheader">{{name}}</h2>
        <h3 class="sheet-templatesubheader">{{item}}{{#type}} ({{type}}){{/type}}</h3>
        <div class="sheet-templatedescription">
            {{#description}}{{description}}{{/description}}
			{{#allprops() description item type}}<p><strong>{{key}}:</strong> {{value}}</p>{{/allprops() description item type}}
        </div>
    </div>
</rolltemplate>

<!-- type="text/worker" -->
<script type="text/worker">
    var classNames = {
        Noble: 'Аристократ',
        Cyborg: 'Киборг',
        Companion: 'Компаньонка',
        Courier: 'Курьер',
        Mercenary: 'Наёмник',
        Tactician: 'Тактик',
        Daredevil: 'Сорвиголова',
        Stranger: 'Странник',
        Shadow: 'Тень',
        Manofsteel: 'Броненосец',
        Bountyhunter: 'Охотник за головами',
        Supernova: 'Сверхновая',
        Cenzor: 'Цензор',
        Engineer: 'Инженер',
        Doctor: 'Доктор',
        Juggernaut: 'Джаггернаут',
        Kinetick: 'Кинетик',
        DigitalDao: 'Дао Цифры',
        Emissary: 'Эмиссар',
        Psychomant: 'Психомант',
        Raelith: 'Раэлит',
    }

    var descriptions = {
        Noble: `Хотя Федерация и пытается всеми силами оспорить первенство Империи, всё-таки стоит признать, что после Дня Агонии именно последняя сумела по максимуму сохранить свои традиции и устои. Немаловажную роль в этом сыграли аристократы — привилегированный класс дворян, правящих доменами, из которых состоят миры под властью Императрицы. Но для тебя все сложилось иначе. У тебя нет собственного домена, а потому тебе предстоит самостоятельно найти место в этом мире. Но у тебя всё ещё остались честь, происхождение и жажда власти. А галактика — достаточно непредсказуемое место для того, чтобы дерзкий и смелый юноша мог в итоге сорвать куш и вернуться на родину баснословно богатым аристократом`,
        Cyborg: 'В обществе, где всё направлено на развитие личной эффективности на службе Синдикату, биологические процессы признаны отсталыми. Первая имплантация проводится вскоре после рождения, а модульная платформа позволяет затем изменять и настраивать собственное тело в течение всей жизни. Да, киборгов умеют делать и в других уголках галактики, но только на Тао Прайм это возведено в смысл жизни. Этот процесс как-то уживается с жёстким следованием кодексу чести и неукоснительным соблюдением многочисленных заповедей и табу. Не все выдерживают строгость этих правил.',
        Companion: 'Гильдия Компаньонок — официально зарегистрированная организация, члены которой оказывают широкий спектр специфических услуг. Это эскорт высокопоставленных клиентов на светских и официальных мероприятиях, а также организация досуга. Официальная компаньонка — образованный человек, способный вести беседу на большое количество тем, обладает широким кругозором и набором уникальных навыков (включая редкие сексуальные методики). Получив официальный статус, компаньонка обычно отправляется на поиски клиентов, нередко присоединяясь к группе космических авантюристов, торговцев и искателей приключений. Такой союз даёт ей возможность обзавестись большим количеством полезных контактов, а группе, приютившей её — получить отличного специалиста, способного помочь в тяжёлых переговорах.',
        Courier: 'Информация даёт власть. Ради важных сведений, которых нет ни у кого больше, люди готовы убивать и умирать. Поэтому в развитом обществе так высоко ценятся те, кто способен доставить важные данные в любой уголок галактики, невзирая на все риски. Особенно учитывая, что от системы к системе данные идут не мгновенно. Кому ещё под силу передать клиенту такую информацию, которая может изменить расклад сил, раньше, чем об этом узнают конкуренты? Для тебя эта вечная гонка – обычная работа. Имплант в твоей голове стал надёжным сейфом, взлом которого практически невозможен. Практически, потому что есть один способ, но, к сожалению, при его использовании ты умрёшь. Поэтому ты умеешь прятаться, передвигаться незаметно и использовать любую возможность быть на шаг впереди. Однако в этот раз что-то пошло не так. Вскоре после загрузки ты понял, что в твоей голове есть кто-то ещё...',
        Mercenary: 'Сегодня в галактике большие возможности для человека, умеющего, а главное, не боящегося применять оружие. Наёмники работают телохранителями, рейдерами, курьерами, они выполняют поручения частных лиц, организаций и, порой, правительств. Это опасная, но высокооплачиваемая работа. Выбрав путь наёмника, человек становится экспертом в самом разном вооружении. Он уверенно чувствует себя в пешем бою, за пультом орудий космического корабля или за штурвалом ховертанка. Его арсенал (как вооружения, так и спецсредств) позволяет ему браться за любые задания. Часто наемник присоединяется к группе космических авантюристов, торговцев и искателей приключений. Выгода тут обоюдная — группа получает надёжного защитника, а сам наёмник — возможность работать в любом уголке галактики.',
        Tactician: 'Многие считают, что миром правит сила. Что главным становится тот, у кого современнее оружие или внушительнее армия. Тот, кто может нанести больше урона и выдержать больше ранений. Ну что же… те, кто так считает, на самом деле плохо считают. А вот ты действительно видишь ситуацию такой, какая она есть. И в этом твоё главное преимущество. Твои аналитические навыки и умение планировать действия на несколько шагов вперёд — это таланты, которые всегда в цене. Особенно когда дело доходит до операций, связанных с риском. Стратегия и тактика — твой конёк, так что не стоит забывать подходить к каждой миссии с умом. В принципе, именно умение приложить разум там, где это требуется, и выделяет тебя на фоне обычных искателей приключений. А ещё лёгкая улыбка, знаменующая, что всё идёт согласно плану. Ты любишь, когда план удаётся.',
        Daredevil: 'Когда стрелка спидометра переходит в красный сектор, остальные в ужасе сбрасывают газ. Но не ты — ты знаешь, что до сих пор работала лишь половина клапанов в двигателе твоего ховерцикла. Монстра, на котором ты выступаешь в этом заезде, ты собрала сама, от первой и до последней детали. И это единственное существо, которому ты безоговорочно доверяешь. В тебе сочетается жажда скорости и экстремальных нагрузок и вечное стремление выиграть еще пару долей секунды за счёт четкой настройки оборудования и филигранной подгонки деталей. Свою технику ты обслуживаешь сама, и поэтому не надо удивляться, что порой она умеет немного больше, чем должна.',
        Stranger: 'Когда люди пришли в Галактику Пегас, не все из них смогли найти свой дом. Некоторые так и остались скитальцами, бесконечно странствуя по бездонным глубинам космоса и сталкиваясь с тем, что для обычных людей является лишь легендой. Там они нашли то, что назвали Бездной. Своего бога, чей шёпот в головах аколитов цивилизованное человечество считает лишь проявлением подсознания. Иногда к планетам приближались одинокие корабли Странников, или даже их бродячий флот, Перекати-поле. Космические скитальцы охотно торговали с туземцами, но редко приглашали их на свои суда, а на спускающихся на поверхность сородичей смотрели неодобрительно. Однако 5 лет назад Глашатай, духовный лидер Перекати-поля, объявил, что более это не считается чем-то постыдным. Никаких объяснений не последовало, но с тех пор то тут то там всё чаще замечают долговязые фигуры Странников.',
        Shadow: 'Когда утром следователи находят безжизненное тело в наглухо закрытом изнутри помещении — по планете начинают ползти слухи о призраках, которых нельзя увидеть и от которых нельзя скрыться. Казалось бы, какая дикость, в столь продвинутый век. Клан Ледяного Дракона официально был уничтожен остальными синдикатами Тао много лет назад. Однако до сих пор в сети мелькает информация про неожиданного появившегося и уже ликвидированного члена этого клана, теперь точно последнего. И ещё одного. И ещё. Ты и подобные тебе — карающая длань затаившегося Ледяного Дракона. Официально вас не существует, вы растворяетесь в толпе и способны проникнуть в самые охраняемые убежища. Ваш долг — устранять тех, на кого указывает даймё, постепенно приближаясь к тем, из-за чьего предательства пал синдикат. Несмотря на то, что тебя нельзя остановить, тебе всё-таки нужны соратники. Для большинства из них ты будешь всего лишь странным нелюдимым попутчиком, обладающий удивительной технологией невидимости, и только избранные узнают, кто ты на самом деле. Примут ли они тебя или захотят убить?',
        Manofsteel: 'Регулярные войска редко используют боевые экзоскелеты для солдат, однако при выполнении специальных задач они могут быть полезны. В то же время «на гражданке» бойцы в тяжёлой броне остаются популярным средством обеспечения безопасности — мало кто пожелает встретиться лицом к лицу с закованным в керамопласт трёхметровым гигантом, увешанным оружием как небольшой танк. Особенно популярны такие парни среди мародеров — безбашенных сорвиголов, захватывающих космические суда прямо в открытом космосе. Но далеко не все идут в разбойники — риск не вернуться с межзвёздных путей в космосе довольно большой, поэтому на земле тоже хватает наемников. Купить услуги Броненосца довольно просто — затраты на костюм больно кусают бюджет, поэтому он всегда ищет новые способы подзаработать.',
        Bountyhunter: 'Преступник международного класса. Террорист. Нечистоплотный деловой партнёр. Бывшая жена и её любовник. Ты берёшься за любые контракты, неважно, должен ли выжить объект. Зато у тебя практически не бывает простоев — народу в галактике даже после Дня Агонии так много, что проредить ряды совсем не помешает. Но работа охотника — это не только спустить курок, поймав силуэт в перекрестие прицела. Это поиск и обработка информации, общение с информаторами и планирование операции в целом. Это сложная работа — те, кто не умеют её делать, уже давно лежат, запаянные в цинк. А раз ты все ещё в деле — значит, твои навыки не растерялись, глаз остёр, а сеть информаторов не оскудела.',
        Supernova: 'В Свободном Кластере их миллионы. У их появления множество причин: троян в мозговом импланте, передозировка психонаркотиками, стирание личности как гуманная замена заключению или казни, или просто неудачные эффекты мнемопроцедур —технологии манипулирования памятью не редкость в человеческих мирах. В результате появляются люди с искажёнными или потерянными воспоминаниями, не знающие, кто они и откуда, но рьяно ищущие своё место в мире. Стирание настигает их неожиданно: ещё секунду назад они всё помнили, но мгновение спустя началась их новая жизнь. Часть из них оседает где-нибудь в глуши, в одиночестве постигая нового себя. Другие странствуют по рукаву Приора и берутся за самые безумные дела, в надежде найти осколки своего прошлого. Каждый из них мог быть кем угодно. Поэтому их опасаются — никогда не знаешь, что такой человек может вспомнить, чего от него ждать. Этих людей называют Сверхновыми – за то, что они рождаются заново, и обычно очень ярко горят.',
        Cenzor: 'Многие считают их последними рыцарями галактики. Внутри «Цензуры», таинственной космической цитадели этой организации, самые талантливые шпионы, офицеры, агенты и проходимцы получают новую жизнь, новую цель и новые средства. Они становятся цензорами — последней защитой человечества. Стать цензором сложно, быть цензором опасно, но почётно. Твоя власть сильна, но не безгранична. Многие считают вас всего лишь престижным клубом, слишком много о себе возомнившим. И не жди приказов сверху — ты сам ищешь угрозу, достойную твоего внимания — и если ты её нашёл, ты приложишь все силы ради её ликвидации. Какая угроза достойна? Лишь та, что затронет всё человечество. Но ты должен понимать, что твои противники всегда будут идти до последнего, стараясь остановить тебя. И в этом противостоянии ты сможешь рассчитывать лишь на себя и своих соратников. «Цензура» всегда придёт тебе на помощь в критичной ситуации, но чаще всего ты будешь работать один, и тогда тебе потребуются надежные соратники. Однако помни — ты защищаешь человечество, а потому должен приложить все усилия к достижению этой цели. Если ты встанешь на скользкий путь использования своей власти в корыстных целях — твои же братья объявят угрозой уже тебя.',
        Engineer: 'Все современные технологии, все компьютеры, все звездолёты будут бесполезны и даже опасны, если не найдется человека, который может выяснить, где именно отвинтилась гайка. Инженерное дело лишь кажется сложным. Оно само откроет тебе все свои секреты, если ты будешь отдаваться ему беззаветно. А для тебя это никогда не было проблемой. Ты вообще не знаешь ничего увлекательней, нежели лежать под генератором гравитации и пытаться понять, почему он не работает, почему упрямится. Крайне увлекательная головоломка. Механизмы – это просто. Люди гораздо сложнее. Ты знаешь, чего ждать от того или иного устройства, но человек всегда непредсказуем. Неизвестно, как он устроен. Ты никогда их не понимаешь, и потому предпочитаешь общаться с техникой. По крайней мере, пока к людям не придумают инструкций по эксплуатации.',
        Doctor: 'Говорят, во время Золотого века люди не болели, а их раны затягивались сами собой. Кто знает, правда это или вымысел. Если бы так было и сейчас, твоя профессия была бы бесполезна. Однако современный мир далёк от совершенства, так что у тебя есть работа. В некоторых уголках Свободного Кластера можно легко получить травму или подцепить какую-нибудь заразу, а уж отхватить шальную пулю вообще представляется плевым делом. Поэтому люди, знающие, как держать скальпель в руке, всё ещё в цене. Особенно когда не боятся летающих над головой снарядов. Ты предпочитаешь опасные путешествия уютному офису, ведь именно так ты можешь раскрыть все свои таланты в полной мере. А остальные редко выступают против твоей компании. Когда в команде есть доктор, шансы на выживание всех её членов резко увеличиваются.',
        Juggernaut: '270 лет твои предки знали только холод и борьбу с ледяными монстрами, пока однажды посланцы из-за неба не сказали им, что мир несоизмеримо больше. Они поведали, что считали Вальхаллу непригодной для жизни и нашли тут людей случайно. С тех пор прошло более тридцати лет, но твои сородичи не торопятся покидать мёрзлые пустоши. В отличие от тебя. Ты желаешь покорить Ойкумену. В твоём теле живет симбионт – благодаря им ты и твои сородичи и выжили на Вальхалле. Он дарит тебе тепло и увеличивает возможности организма, а ты кормишь его адреналином. Вы оба живёте ради битвы. Таких как ты называют Джагеррнаутами за несокрушимую мощь, которая вам присуща. Тебе в новинку этот мир: мир странных нравов и чудесных устройств. Мир людей, не знающих мощи ледяных пауков и скорости стылых призраков. У них есть больше, чем им нужно, но нет главного – горячего сердца. Но ты покажешь им, что такое настоящий вальхаллец.',
        Kinetick: 'Если вручить перспективную технологию в руки виртуозного мастера и дать ему время с ней освоиться, то можно сотворить немыслимые вещи. Твой инструмент не просто всегда находится в твоих руках – это и есть твои руки. Ты подвергся операции по изменению генома и теперь можешь управлять одной из главных сил Вселенной – гравитацией. Великая мощь под контролем одного человека, имеющего свои планы на её использование. Технология управления гравитацией известна уже несколько веков, однако лишь совсем недавно учёные смогли синтезировать ген, позволяющий человеку манипулировать этим взаимодействием без каких-либо подручных инструментов. Ходят слухи, что открытие произошло благодаря смерти сотни испытуемых, что в деле фигурировал артефакт другой формы жизни. Но кому какое дело? Ценность этого достижения неоспорима. Несомненно, теперь мир изменится.',
        DigitalDao: 'Сегодня информационные сети проникли повсеместно, и практически не осталось цивилизованного уголка, где бы не применялись IT-технологии того или иного уровня. Но с твоей точки зрения эти технологии — каменный век. Даже те, кто называют себя хакерами с большой буквы, вызывают лишь улыбку. Оттуда, где находишься ты, они выглядят детьми. В отличие от обычных людей, ты не используешь приборы и компьютеры, а общаешься с ними на понятном им языке — языке Цифры. И они тебе помогают. Твой мозг перестроен, чтобы ты мог говорить с ними. Легенды называют таких, как ты, технолордами. Кто-то древний сказал, что любая достаточно развитая технология неотличима от магии. Ты — прямое доказательство этого высказывания. Ты манипулируешь кодом на уровне, расположенном глубже нулей и единиц, превращаешь сложные механизмы в верных друзей. Ты способен видеть истину: весь мир — всего лишь физическая форма информации. Той информации, которая требует подлинного служения, взамен даря безграничные возможности.',
        Emissary: 'Когда-то сильные мира сего сражались с помощью чемпионов – прославленных воинов и защитников, сходившихся лицом к лицу на поле боя. Сейчас же им на смену пришли эмиссары. Их битва ведётся не оружием, а влиянием, силой убеждения и деловой хваткой. Именно они распространяют могущество Корпораций по Галактике. Эмиссар – это сотрудник с чрезвычайно широкими полномочиями. Его офис – он сам, то есть любое место, куда он может дотянуться. Его задача – заключать контракты, вербовать полезных людей и ежеминутно доказывать окружающим, что связать себя с данной корпорацией – лучшая судьба, которую можно избрать. Эмиссарами становятся самые талантливые и хваткие, самые ловкие дельцы и самые располагающие к себе ораторы – ведь их успешность зависит только от них. Если эмиссар что-то сделает не так – работодатель легко от него откажется, но эта игра стоит свеч. Корпорация не нуждается в неудачниках – но щедро одаривает эффективных.',
        Psychomant: 'Создать психоманта непросто — требуются годы тренировок, за которые претенденты учатся контролировать сознание и управлять эмоциями. И подробности этой учёбы неизвестны. Всего несколько мест в Свободном Кластере обучает людей, способных читать чужую память и мысли, и они не спешат открывать свои секреты. Кто-то говорит, что дело в геноме, который втихаря меняют в таких школах. Иные считают, надо быть изначально одарённым. А некоторые утверждают, что психомантия — это своего рода религия, и после долгих медитаций тебе откроется Истина. Как бы то ни было, для тебя всё обучение осталось в прошлом. Теперь тебя мучают головные боли, эмоции ты испытываешь совсем не так, как обычные люди, а перенапряжение иногда приводит к кровотечению из носа или ушей… Но одновременно ты понимаешь, что обладаешь властью, доступной немногим. Тебя боятся самые сильные мира сего. И они же жаждут нанять тебя или сделать союзником. Они просто очень не хотят, чтобы такие, как ты, были их врагами.',
        Raelith: 'Сложно представить врага опаснее для человека, чем Машина. В Пограничье с ней не прекращается война, а иногда дроны появляются и в глубине Кластера. Если ты встретишь дрона, то скорее всего умрёшь, а, если тебе не повезёт — тебя живьём доставят на фабрику, где разберут на органы, соединят с инородными элементами, лишат личности и сделают ещё одной частью Машины. Ты — счастливчик. Тебя спасли раньше, чем этот процесс завершился, и вернули в общество. И, пусть тело твоё уже изменилось, но личность сохранилась. По большей части. Пока ещё. Таких, как ты, называют раэлитами. Вас вытаскивают на разных стадиях ассимиляции, посему даже вы друг друга не понимаете. А от «обычных» людей ты отличаешься куда больше. Ты не робот, не мутант, не киборг, но что-то ещё, сплав плоти (своей и чужой), кибернетики и неизвестных технологий. Но не это самое страшное. Ты знаешь, что ты — часть Машины. Ты чувствуешь с ней связь. Иногда она общается с тобой… если это можно назвать общением. Но даже ты не понимаешь, кто она такая, чего хочет и к чему стремится. Ты знаешь, что Машина неведомым образом поддерживает в тебе жизнь, но для этого тебе надо делать то, что нужно ей. Пока ты сохраняешь контроль над собой… но долго ли это продлится? Как скоро ты угаснешь навсегда или станешь ещё одним дроном? И когда окружающим людям надоест твоё присутствие настолько, что они начнут принимать меры?',
    }

    var look = {
        Noble: `Хитрый, надёжный или невинный взгляд
Атлет, рыхлое или красивое тело
Короткие волосы, стильная причёска или дорогая шляпа
Роскошный наряд, мундир или деловой костюм`,
        Cyborg: `Раскосые, «анимешные» или искусственные глаза
Фиолетовые, наращённые или искусственные волосы
Кукольное, роботизированное или крепкое телосложение
Трубки из головы, кибер-конечность или синтокожа`,
        Companion: `Невинные, горящие или озорные глаза
Экзотическая причёска, ухоженные волосы или стильная укладка
Элегантное платье, дорогая одежда или эпатажный наряд
Точёная фигурка, крепкое тело или пышные формы`,
        Courier: `Цепкий, холодный или затравленный взгляд
Стильная, практичная или экзотическая прическа
Шрам, имплант или косметическая правка лица
Стильный, практичный или яркий костюм`,
        Mercenary: `Холодный, отрешенный или злобный взгляд
Шрам, выбитый зуб или порванное ухо
Военный ежик, небрежные волосы или лысый
Гора мускулов, атлет или жилистый`,
        Tactician: `Проницательный, холодный или презрительный взгляд
Военная стрижка, хвост или лысый
Сутулость, протез или сигарета во рту
Крепкий, накачанный или обычный`,
        Daredevil: `Коварный, безумный или любопытный взгляд
Всклокоченные, грязные, или вьющиеся волосы
Опаленная, загрубевшая или бледная кожа
Тощая, долговязая или коротышка`,
        Stranger: `Нездешний, вопрошающий или пронизывающий взгляд
Очень длинные волосы, выбритый узор или лысый
Высокий и худощавый, гигант или миниатюрный
Бледная, синеватая или искусственно окрашенная кожа`,
        Shadow: `Пустой, острый или ледяной взгляд
Капюшон, короткая стрижка или кибернетический имплант
Комбинезон, спортивный костюм или униформа
Гибкое, атлетическое или очень худое телосложение`,
        Manofsteel: `Холодный, цепкий или агрессивный взгляд.
Шрам на щеке, протез руки или протез ноги.
Лысый, армейский ёжик или неопрятные волосы.
Крупное, мускулистое или жилистое телосложение.`,
        Bountyhunter: `Острый, безразличный или презрительный взгляд;
Обычная причёска, военная стрижка или лысый;
Один глаз, кибер-протез или страшный шрам;
Жилистый, накачанный или обычный`,
        Supernova: `Потерянный, холодный или решительный взгляд
Запущенность, аккуратная или экзотичная причёска
Подтянутое телосложение, средняя форма или калека
Ухоженная, обычная или синтетическая кожа`,
        Cenzor: `Холодный, расчетливый или пронзительный взгляд
Крепкое, атлетическое или худощавое телосложение
Короткая стрижка, лысый или что-то экзотическое
Костюм странного покроя, татуировки или заметные шрамы`,
        Engineer: `Рассеянный, озадаченный или неприязненный взгляд
Цветные волосы, собраны в хвост или грязная шевелюра
Худощавая, в форме или миниатюрная
Заметные импланты, въевшиеся пятна или почти цивильно`,
        Doctor: `Проницательный, интеллектуальный или циничный взгляд
Зализанные, искусственные волосы или короткая стрижка
Худощавая, невысокая или спортивная
Морщины, саркастичная ухмылка или размашистые жесты`,
        Juggernaut: `Яростный, дикий или ясный взгляд
Могучие мускулы, худое или гибкое тело
Татуировки, необычные украшения или страшные шрамы
Нечёсаные космы, ирокез или длинная коса`,
        Kinetick: `Расчётливый, дружелюбный или яростный взгляд
Волосы дыбом, аккуратная или синтетическая шевелюра
Атлетическое, обычное или худощавое телосложение
Шрам, заметный киберимплант или искусственная кожа`,
        DigitalDao: `Визор, глазной имплант или отрешенный взгляд 
Лысый, дреды или абсолютный хаос на голове 
Неопрятный, цифровые татуировки или нервные жесты 
Изможденный вид, измененная внешность или непонятный пол`,
        Emissary: `Внимательный, располагающий или колючий взгляд;
Строгая, модная или экстравагантная прическа;
Респектабельный, молодой или необычный внешний вид;
Эффектные жесты, дружелюбная улыбка или аура доверия.`,
        Psychomant: `Пронзительный взгляд, слишком яркие или неестественные глаза
Дикая прическа, стильная укладка или развевающиеся волосы
Пирсинг, ухоженный или непримечательный внешний вид
Резкие жесты, уходящая в себя или располагающее поведение`,
        Raelith: `Искусственные глаза, страдающий или пугающий взгляд
Запущенный, ухоженный или подчёркнуто вызывающий вид
Обычное телосложение, гротескная фигура или меняющееся тело
Звук сервомоторов, металлическое клацанье или гул реактора`,
    }

    var backgrounds = {
        Noble: {
            preInfo: 'Выбери правящий дом, в котором ты рожден:',
            options: [
                {
                    button: 'Дом Адана',
                    text: 'Фехтование входит в обязательную программу обучения Дома. Твой Урон в ближнем бою увеличен на 1.'
                },
                {
                    button: 'Дом Акоста',
                    text: 'Сражаясь один на один в ближнем бою, ты можешь использовать Репутацию вместо Ярости.'
                },
                {
                    button: 'Дом Алуат',
                    text: 'Спокойный дом, склонный к наблюдению. Когда ты успешно Ориентируешься, задай на 1 вопрос больше.'
                },
                {
                    button: 'Дом Анхил',
                    text: 'Ты свой человек в криминальном мире. Потрать 1 Припас и поменяй в своём ID имя и другие данные.'
                },
                {
                    button: 'Дом Астор',
                    text: 'Твой дом баснословно влиятелен. Раз в сессию, когда Договариваешься, получи 10+. Рычаг всё ещё нужен.'
                },
                {
                    button: 'Дом Дега Росса',
                    text: 'Дом понимает в снабжении. Раз в сессию можешь достать любой не очень редкий предмет. Опиши, откуда.'
                },
                {
                    button: 'Малый дом',
                    text: 'Один раз за сессию ты можешь превратить 6— в 7—9 или 7—9 в 10+, если это пойдет на пользу Дому.'
                },
                {
                    button: 'Кастонианская марка',
                    text: 'Бароны и баронессы — самые гордые люди на свете. Когда ты Помогаешь, один раз в сессию ты можешь превратить проверку союзника в 10+.'
                },
                {
                    button: 'Эмираты Эльхали (только для мужчин)',
                    text: 'Ты — клон самого эмира, созданный лучшими биотехнологами. Обычные ранения на тебе заживают меньше, чем за день, а Критическое — за пару дней. В медкапсулах ты лечишься в два раза быстрее, чем другие.'
                },
                {
                    button: 'Тао Прайм (только для женщин)',
                    text: 'Крылатый единорог — синдикат, управляемый исключительно женщинами и обладающий большим флотом. Выбери 1 имплант с третьего листа Киборга. Впиши его в снаряжение.'
                }
            ]
        },
        Cyborg: {
            preInfo: `Выбери синдикат, который тебя вырастил:`,
            options: [
                {
                    button: 'Багровый лотос',
                    text: '«Смерть не является оправданием». Приказание должно быть выполнено несмотря ни на что. Когда ты испускаешь последний вздох, ты можешь заполнить 2 ячейки Бесчестия и сделать бросок успешным (10+).'
                },
                {
                    button: 'Стальной журавль',
                    text: '«Честь превыше Жизни». Под знаменами этого синдиката служат только безупречные. Когда ты поступил достойно, тут же очисти 1 ячейку Бесчестия. Очисти 2 ячейки, если поступил достойно и в соответствии с выбранными догматами.'
                },
                {
                    button: 'Чёрный лис',
                    text: '«Всё имеет свою цену». Пока у тебя есть хотя бы 1 заполненная ячейка Бесчестия, когда ты Сражаешься, то на 10+ можешь выбрать на 1 вариант больше из списка. Проиграв бой, немедленно заполни 1 ячейку Бесчестия.'
                }
            ]
        },
        Companion: {
            preInfo: `Выбери регион галактики, откуда ты родом или где ты проходила обучение:`,
            options: [
                {
                    button: 'Империя',
                    text: 'Твое знание этикета позволяет тебе производить особое впечатление на любом мероприятии. Ты можешь представить своих спутников так, что на их выходки, за исключением серьёзных нарушений, какое-то время будут закрывать глаза.'
                },
                {
                    button: 'Федерация',
                    text: 'У тебя есть доступ к обширной базе знаний ещё со времён обучения. Один раз за игровую сессию, получи +2, когда Получаешь информацию или пользуешься Образованием.'
                },
                {
                    button: 'Клоака',
                    text: 'Дикие нравы миров Клоаки приучили тебя к осторожности. Когда ты спасаешь свою жизнь (или честь), ты игнорируешь первое полученное в бою (или сцене) ранение.'
                },
                {
                    button: 'Пограничье',
                    text: 'Ты много общалась с военными и знаешь, как выглядеть наименее угрожающе. Если у противников есть выбор, они будут атаковать тебя в последнюю очередь.'
                }
            ]
        },
        Courier: {
            preInfo: `Выбери одно:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Твой статус дает тебе дополнительную защиту от твоих преследователей, ведь аристократы очень не любят, когда среди них что-то вынюхивают. Ты получаешь 1 дополнительную ячейку опасности.'
                },
                {
                    button: 'Федерация',
                    text: 'Тотальный контроль Корпораций над всеми сферами жизни научил тебя пользоваться всеми благами общества. Если тебе нужен специалист определённого профиля, и у тебя есть доступ к информационной сети, проверь Репутацию. На 10+ ты знаешь, где его искать. На 7—9 он может потребовать повышенную плату или ответную услугу.'
                },
                {
                    button: 'Клоака',
                    text: 'Миры, полные беззакония, где алчность часто заставляет пренебречь нормами морали, научили тебя выживать. Когда Игнорируешь угрозу, можешь 1 раз превратить 6— в 7—9.'
                },
                {
                    button: 'Пограничье',
                    text: 'Тебе нужно было работать прямо посреди боевых действий. В бою игнорируй первое полученное ранение.'
                }
            ]
        },  
        Mercenary: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'После службы в войсках у тебя осталось особе оружие. Создавая свое любимое оружие, ты можешь выбрать его тип еще и из таких вариантов: Ионный излучатель или Плазменная винтовка'
                },
                {
                    button: 'Федерация',
                    text: 'Профессионал не смиряется с поражениями. Один раз за сессию ты можешь перебросить любую проверку и выбрать лучший результат — при этом не важно, твою или чужую. Объясни, как ты смог повлиять на результат.'
                },
                {
                    button: 'Клоака',
                    text: 'Твоё оружие не самого лучшего качества, поскольку собрано из запчастей. Зато ты можешь выбрать 1 дополнительный аксессуар для него.'
                },
                {
                    button: 'Пограничье',
                    text: 'Стреляй первым — так тебя учили. В начале боя ты наносишь одному противнику одно ранение автоматически.'
                }
            ]
        },
        Tactician: {
            preInfo: `Выбери свой род занятий, нынешний или прошлый:`,
            options: [
            {
                    button: 'Военный офицер',
                    text: 'Штаб всегда нуждается в тактиках. Ты прошёл множество боёв, и тебе до сих пор мерещатся тактические карты. Ты можешь менять тактики во время боя, но не более одной за действие.'
                },
                {
                    button: 'Безопасник',
                    text: 'Ты отработал немало времени в силах правопорядка или частной охранной конторе. Когда Договариваешься с любыми силовыми структурами, получи +1.'
                },
                {
                    button: 'Детектив',
                    text: 'Тебе хотелось работать с людьми и не зависеть от приказов начальства. Если ты задаёшь людям вопросы, а их ответы используешь при планировании операции, получи на 1 фишку больше, применяя ход Всё по плану.'
                },
                {
                    button: 'Интеллектуал',
                    text: 'Аналитический ум — мощнейший инструмент, позволяющий заниматься практически чем угодно. Ты используешь свой талант для своего же блага. Один раз за сессию можешь увеличить любую проверку Контроля на 1 категорию (с 6— до 7—9 или с 7—9 до 10+)'
                }
            ]
        },
        Daredevil: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Ты — настоящая знаменитость. Раз в сессию можешь спросить невраждебного персонажа, не узнает ли он тебя. За твой автограф он окажет тебе небольшую услугу.'
                },
                {
                    button: 'Федерация',
                    text: 'У тебя всегда был доступ к уникальным деталям и амуниции. Выбери еще 1 элемент из стартового снаряжения.'
                },
                {
                    button: 'Клоака',
                    text: 'Твое долгое и успешное участие в экстремальных гонках дает о себе знать. Выбери еще 1 спецсредство, установленное на твоем транспорте.'
                },
                {
                    button: 'Пограничье',
                    text: 'Ты — что? Зачем ты ездишь на этом? Ты вообще в курсе, что это… дрон Машины? Ты можешь выбрать следующее шасси для своего транспорта: Шагающий дрон'
                }
            ]
        },
        Stranger: {
            preInfo: `Выбери своё происхождение:`,
            options: [
            {
                    button: 'Перекати-поле',
                    text: 'Любое найденное или купленное тобой б/у оборудование после установки будет работать как новое, если оно вообще способно работать.'
                },
                {
                    button: 'Одиночка',
                    text: 'При подлёте к планете или крупному обитаемому объекту, проверь Репутацию. На 7—9 здесь есть твой знакомый, на 10+ вы доверяете друг другу. Это не значит, что вы встречались лично.'
                }
            ]
        },
        Shadow: {
            preInfo: `Выбери своё прошлое:`,
            options: [
            {
                    button: 'Дитя клана',
                    text: 'Тебя с рождения растили воином Ледяного Дракона. Ты прекрасно знаешь свой клан — а вот с остальным миром могут возникнуть сложности.'
                },
                {
                    button: 'Перебежчик',
                    text: 'В твоём прошлом — другой синдикат Тао, покинутый ради правды Ледяного Дракона. У тебя осталось много врагов среди недавних соратников.'
                },
                {
                    button: 'Чужак',
                    text: 'Когда-то тебе не было известно ничего о Ледяном Драконе — пока тебя не завербовали. Теперь ты в клане, но многие соратники не доверяют тебе до сих пор.'
                },
            ]
        },
        Manofsteel:  {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Аристократам важно, чтобы экзоскелет обеспечивал им безопасность в любой ситуации. Когда ты Защищаешь, считай 6— как 7—9.'
                },
                {
                    button: 'Федерация',
                    text: 'Твое соединение с экзоскелетом происходит с помощью нейроимпланта — просто, рационально, эффективно. Один раз в сессию ты можешь перебросить любую проверку, кроме Репутации, если находишься в экзоскелете.'
                },
                {
                    button: 'Клоака',
                    text: 'Зачем тратить миллионы на уникальную разработку, если можно модернизировать портовой погрузчик. Не выбирай каркас экзоскелета, получи вместо него: Погрузчик'
                },
                {
                    button: 'Пограничье',
                    text: 'Постоянная война заставила тебя встроить в оружие резервный механизм срабатывания. Выбери оружие. Один раз в бой его выстрел не тратит батарею.'
                }
            ]
        },
        Bountyhunter: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Чтобы достать аристократов, надо знать больше, чем обычно. Когда используешь ход Ищейка, при успехе выбери на 1 вариант больше.'
                },
                {
                    button: 'Федерация',
                    text: 'За время своей работы одно ты понял чётко — всегда должна быть запасная обойма. Один раз в сессию восстанови до двух своих припасов или припасов одного из соратников.'
                },
                {
                    button: 'Клоака',
                    text: 'Неприметность — залог выживания. Раз в сессию ты можешь сказать, что человек, который с тобой общался, не запомнил тебя и не сможет опознать.'
                },
                {
                    button: 'Пограничье',
                    text: 'Позади множество боёв, научивших тебя выживать. Получи ещё 1 ячейку ранения.'
                }
            ]
        },
        Supernova: {
            preInfo: `Ты не помнишь, откуда ты родом, но ты помнишь то место, где началась новая жизнь. Что было после этого – на твой выбор:`,
            options: [
            {
                    button: 'Заброшенная станция',
                    text: 'Тяжело было жить в одиночестве, пока тебя не подобрал корабль. Когда Ориентируешься, задай на 1 вопрос больше, даже на 6—.'
                },
                {
                    button: 'Трущобы планеты',
                    text: 'Перед тобой лежал труп. Выбраться из этого ада оказалось непросто, но теперь ты умеешь убивать. Получи +1 к урону.'
                },
                {
                    button: 'Крупный корабль во время аварии',
                    text: 'Твоя помощь оказалась кстати. Когда Чинишь или разбираешь, выбери на 1 вариант больше при успехе.'
                },
                {
                    button: 'Зона отдыха элитного квартала',
                    text: 'О тебе позаботились и научили общаться с людьми. Поговорив несколько минут с человеком, ты можешь понять, если он был в чём-то не искренним.'
                },
                {
                    button: 'Рядом с рушащимся зданием Корпорации',
                    text: 'У тебя в кармане оказался страховой полис. Когда получаешь критическое ранение, получи фишку прибыли и талон на бесплатную бан-ку колы (не более раза в сессию).'
                }
            ]
        },
        Cenzor: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Ты попал на Цензуру, потому что разбираешься в людях. После общения с NPC больше 10 минут можешь задать Ведущему 1 вопрос о нём из списка Ориентируешься.'
                },
                {
                    button: 'Федерация',
                    text: 'Ты умеешь играть по законам Корпораций. Один раз в сессию моментально восстанови свои Припасы до 2.'
                },
                {
                    button: 'Клоака',
                    text: 'Жизнь научила тебе действовать быстро. Ты начинаешь любое длительное действие, уже имея 1 фишку.'
                },
                {
                    button: 'Пограничье',
                    text: 'В твоём мире нельзя промахиваться. Когда ты сражаешься, один раз в сессию ты можешь перекинуть 1 проверку Характеристики.'
                }
            ]
        },
        Engineer: {
            preInfo: `Выбери регион галактики, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Худшие собеседники из людей – аристократы. Тебе приходилось много с ними общаться, и поэтому на твоём зонде есть дополнительная утилита. Проверь Навык. На 7—9 Ведущий скажет, как собеседник к тебе относится, а на 10+ — с какой вероятностью он врёт.'
                },
                {
                    button: 'Федерация',
                    text: 'Ты умеешь делать качественные вещи. Во время первой игровой сессии ты можешь в любой момент вписать одно сконструированное тобой оборудование уже как часть твоего снаряжения.'
                },
                {
                    button: 'Клоака',
                    text: 'Твой зонд собран так, чтобы приносить пользу в самых разных ситуациях. Выбери ему два типа, а не один.'
                },
                {
                    button: 'Пограничье',
                    text: 'Дополнительная огневая мощь не бывает лишней. При нанесении урона ты можешь тратить Припасы и получать +1 к Урону за каждый.'
                }
            ]
        },
        Doctor: {
            preInfo: `Выбери своё происхождение:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Аристократы — самые капризные люди на свете. Один раз в сессию ты можешь сделать проверну Верного диагноза успешной (10+).'
                },
                {
                    button: 'Федерация',
                    text: 'Ты — врач крупной сети клиник или была им. Прибыв в новое место, проверь Навык. На 7—9 здесь есть кто-то из твоих прежних пациентов. На 10+ он также будет гореть желанием отплатить тебе за помощь.'
                },
                {
                    button: 'Клоака',
                    text: 'Жизнь научила тебя полагаться только на себя — получи +1 Припас.'
                },
                {
                    button: 'Пограничье',
                    text: 'Боевые раны — твоя специализация. В конце боя выбери 1 соратника — он тут же излечивает 1 ранение (даже критическое).'
                }
            ]
        },
        Juggernaut: {
            options: [
                { 
                    button: 'Вальхалла',
                    text: `Под твоей кожей извивается симбионт, который вживляют всем детям суровой ледяной планеты. Он старается мгновенно лечить полученные тобой раны. Ты получаешь Защиту 1.`,
                }
            ]
        },
        Kinetick: {
            preInfo: `Выбери место, откуда ты родом:`,
            options: [
            {
                    button: 'Империя',
                    text: 'Один из Домов отдал целое состояние, чтобы сделать тебя инструментом своей мести и удовлетворения стремлений. Операция была произведена с особым старанием: один раз при проверке Гравигена можешь превратить 6— в 7—9.'
                },
                {
                    button: 'Федерация',
                    text: 'Твою операцию провела могущественная Корпорация. С их технологиями можно позволить себе больше: Тебе не нужны свободные руки для активации умений, достаточно просто смотреть в нужную точку.'
                },
                {
                    button: 'Клоака',
                    text: 'Клоака: Непростая дорога привела тебя к обретению этих способностей. Зато ты умеешь импровизировать: раз в сессию ты можешь заменить любую проверку броском Гравигена, если сумеешь объяснить, что именно ты делаешь.'
                },
                {
                    button: 'Пограничье',
                    text: 'Абсолют выбирает на роль нового могучего оружия только самых стойких. У тебя +1 ячейка Ранения.'
                }
            ]
        },
        DigitalDao: {
            preInfo: `Выбери одно:`,
            options: [
            {
                    button: 'Верный сын',
                    text: 'Ты пользуешься покровительством старших братьев. Тебе прочат большое будущее, но соответствовать их ожиданиям и выполнять приказы не всегда легко.'
                },
                {
                    button: 'Бегущий от прошлого',
                    text: 'Ты оставил свою предыдущую жизнь, приняв Дао. Но твое прошлое не хочет тебя отпускать, как старая головная боль, и тебе приходится разбираться с ним (быть может, ты известная личность, или имеешь обязательства или назойливых близких).'
                },
                {
                    button: 'Белая ворона',
                    text: 'Ты вынужден был принять Дао не по собственному желанию, или не все были согласны с твоим появлением. Тебе не всегда просто в обществе своих братьев. Но что поделать?..'
                },
                {
                    button: 'Потерявший память',
                    text: 'После Ритуала Соединения ты не помнишь всей своей прошлой жизни. Это неудобно! Время от времени ты получаешь самые неожиданные приветы оттуда, и не все из них приятные.'
                }
            ]
        },
        Emissary: {
            preInfo: `Выбери свою Корпорацию Федерации (или иную):`,
            options: [
            {
                    button: 'Ершалаим',
                    text: 'Ты можешь потратить 1 фишку Прибыли, когда Договариваешься. Считай это полным успехом (10+), и ответная услуга не потребуется. Рычаг тоже не нужен.'
                },
                {
                    button: 'Магадон',
                    text: 'Генетические модификации дают о себе знать: у тебя +1 ячейка Ранения.'
                },
                {
                    button: 'Висдегри',
                    text: 'У тебя есть личный транспорт. Выбери 2: скоростной (+1, когда скорость имеет значение), герметичный (работает в вакууме и под водой), двухместный (+1 пассажир) или грузовой (огромный багажник). Реши, что это.'
                },
                {
                    button: 'Юнити',
                    text: 'Самое лучшее оборудование современности. Выбери ещё 2 элемента снаряжения из списка.'
                },
                {
                    button: 'Иная корпорация',
                    text: 'Малая в Федерации или за её пределами. Ты – специалист в своей сфере. Выбери одну характеристику. Раз в сессию ты можешь сделать любой её бросок успешным (10+), а если получаешь 12+, то обретаешь дополнительные благоприятные последствия, если это уместно.'
                }
            ]
        },
        Psychomant: {
            preInfo: `Выбери регион галактики, откуда ты родом или где прошло твоё обучение:`,
            options: [
            {
                    button: 'Империя',
                    text: 'В мире дворцовых интриг нужно уметь распознавать людей. Пообщавшись с человеком 10 минут, проверь Репутацию: на 7—9 узнай, какую эмоцию он испытывает чаще всего, а какую — реже всего. На 10+ узнай и то, и другое.'
                },
                {
                    button: 'Федерация',
                    text: 'В корпоративном секторе даже эмоции нужно уметь испытывать быстро. Раз в сессию моментально получи одну любую эмоциональную связь с соратником.'
                },
                {
                    button: 'Клоака',
                    text: 'Слишком много врагов, чтобы тратить время и силы. Ты можешь продублировать действие способности на вторую цель, но получи 1 ранение.'
                },
                {
                    button: 'Пограничье',
                    text: 'Психомантами становятся самые стойкие. У тебя на 1 ранение больше. Ранения, полученные в результате применения способностей, через час после получения начинают лечиться сами (по 1 в час).'
                }
            ]
        },
    }
    
    var special = {
        Cyborg: {
            cyborgPath: [
                {
                    button: 'Буси',
                    text: 'Ты — воин сёгуна, преумножающий свою славу и честь синдиката. Твоя цель — показать себя с лучшей стороны и на фоне гайдзинов продемонстрировать превосходство Тао.'
                },
                {
                    button: 'Ронин',
                    text: 'Ты совершил ошибку и покрыл себя позором (или тебя подставили). Ты изгнан из синдиката и скитаешься по Галактике в надежде восстановить свою честь, найти новый дом или умереть достойно.'
                }
            ]
        },
        Stranger: {
            strangerSpecialization: [ 
                {
                    button: 'Слышащий',
                    text: 'Ты – проводник слова Бездны среди Странников, ты много с Ней беседуешь и поясняешь Её волю аколитам. У тебя +1 к максимуму Благосклонности Бездны, и ты в начале нового приключения имеешь одну Благосклонность (иные не имеют ни одной).'
                },
                {
                    button: 'Оберегающий',
                    text: 'В космосе неоткуда ждать помощи, потому надо действовать быстро. У тебя молниеносная реакция, не раз помогавшая экипажу корабля. Наносишь +1 урон.'
                },
                {
                    button: 'Сохраняющий',
                    text: 'В бесконечных странствиях самое важное – держать оборудование в порядке. Когда Чинишь или разбираешь, на 7—9 выбираешь 2.'
                }
            ]
        },
        Juggernaut: {
            juggernautHandicraft: [ 
                {
                    button: 'Воин',
                    text: 'В твоём суровом мире больше всего ценится сила. Слабый никогда не станет вождём. Для достижения тобой новых побед симбионт увеличивает силу и выносливость. Ты значительно больше обычного человека.'
                },
                {
                    button: 'Охотник',
                    text: 'Добыть пищу на Вальхалле непросто. Чтобы выжить, тебе надо быть стремительнее ледяного ветра. Поэтому симбионт увеличивает твою скорость и ловкость. Ты силь-\но меньше собратьев-воинов, но куда быстрее.'
                }
            ]
        },
        Raelith: {
            raelithFunction: [ 
                {
                    button: 'Разрушитель',
                    text: 'От тебя требуется время от времени уничтожать то, что важно для людей. Какие-либо предметы, объекты, цели, намерения, стремления, идеи.'
                },
                {
                    button: 'Разведчик',
                    text: 'От тебя требуется время от времени узнавать то, что важно для людей, и мысленно отправлять эту информацию Машине.'
                }
            ]
        },
    }

    var startAttrs = {
        Noble: {
            atack_max: 1,
            armor_max: 0,
            hp_max: 4,
            gear_max: 2,
            money_max: 3,
            wealth_max: 0
        },
        Cyborg: {
            atack_max: 3,
            armor_max: 1,
            hp_max: 5,
            gear_max: 2,
            money_max: 2,
            wealth_max: 0
        },
        Companion: {},
        Courier: {},
        Mercenary: {},
        Tactician: {},
        Daredevil: {},
        Stranger: {},
        Shadow: {},
        Manofsteel: {},
        Bountyhunter: {},
        Supernova: {},
        Cenzor: {},
        Engineer: {},
        Doctor: {},
        Juggernaut: {},
        Kinetick: {},
        DigitalDao: {},
        Emissary: {},
        Psychomant: {},
        Raelith: {},
    }
    on("sheet:opened", function() {
        getAttrs(["character_class"], function(v) {
            update = {};
            if (v.character_class == null || v.character_class == "") {
                update["tip_confirm_flag"] = "0";
            } else {
                update["tip_confirm_flag"] = "1";
            }
            setAttrs(update);
        });
    });

    on("change:page", function() {
        getAttrs(["page"], function(v) {
            setAttrs({sheetTab:v.page});
        });
    });

    on("clicked:changeclass", function() {
        getSectionIDs("repeating_background", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow("repeating_background_" + idarray[i]);
            }
         });
         getSectionIDs("repeating_cyborgPath", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow("repeating_cyborgPath_" + idarray[i]);
            }
         });
         getSectionIDs("repeating_strangerSpecialization", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow("repeating_strangerSpecialization_" + idarray[i]);
            }
         });
         getSectionIDs("repeating_juggernautHandicraft", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow("repeating_juggernautHandicraft_" + idarray[i]);
            }
         });
         getSectionIDs("repeating_raelithFunction", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
              removeRepeatingRow("repeating_raelithFunction_" + idarray[i]);
            }
         });
        setAttrs({
            tip_confirm_flag: 0,
            description: ' ',
            backgroundtype: ' ',
            backgroundtext: ' ',
            cyborgPath_show_flag: 1,
            cyborgPathtype: ' ',
            cyborgPathtext: ' ',
            strangerSpecializationtype: ' ',
            strangerSpecializationtext: ' ',
            strangerSpecialization_show_flag: 1,
            juggernautHandicrafttype: ' ',
            juggernautHandicrafttext: ' ',
            juggernautHandicraft_show_flag: 1,
            raelithFunctiontype: ' ',
            raelithFunctiontext: ' ',
            raelithFunction_show_flag: 1,
            look_example: ' ',
            character_class: ' ',
            comp_name: ' ',
            "background_show_flag": 0,
            "pre_background": ' ',
            isCyborg: 1,
            isShadow: 1,
            isStranger: 1,
            isJuggernaut: 1,
            isRaelith: 1
        })
    })

    on("clicked:noble", function(eventinfo) {
        setupClass("Noble");
    });

    on("clicked:cyborg", function(eventinfo) {
        var update = addRepeatingInfo(special.Cyborg.cyborgPath, 'cyborgPath')
        update.isCyborg = 0;
        update.cyborgPath_show_flag = 0
        setAttrs(update, undefined, function() {setupClass("Cyborg")})
    });

    on("clicked:companion", () => {
        setupClass('Companion');
    });
    on("clicked:courier", () => {
        setupClass('Courier');
    });
    on("clicked:mercenary", () => {
        setupClass('Mercenary');
    });
    on("clicked:tactician", () => {
        setupClass('Tactician');
    });
    on("clicked:daredevil", () => {
        setupClass('Daredevil');
    });
    on("clicked:stranger", () => {
        var update = addRepeatingInfo(special.Stranger.strangerSpecialization, 'strangerSpecialization')
        update.isStranger = 0;
        update.strangerSpecialization_show_flag = 0
        setAttrs(update, undefined, function() {setupClass("Stranger")})
    });
    on("clicked:shadow", () => {
        var update = {};
        update.isShadow = 0;
        setAttrs(update, undefined, function() {setupClass("Shadow")});
    });
    on("clicked:manofsteel", () => {
        setupClass('Manofsteel');
    });
    on("clicked:bountyhunter", () => {
        setupClass('Bountyhunter');
    });
    on("clicked:supernova", () => {
        setupClass('Supernova');
    });
    on("clicked:cenzor", () => {
        setupClass('Cenzor');
    });
    on("clicked:engineer", () => {
        setupClass('Engineer');
    });
    on("clicked:doctor", () => {
        setupClass('Doctor');
    });
    on("clicked:juggernaut", () => {
        var update = addRepeatingInfo(special.Juggernaut.juggernautHandicraft, 'juggernautHandicraft')
        update.isJuggernaut = 0;
        update.juggernautHandicraft_show_flag = 0
        setAttrs(update, undefined, function() {setupClass("Juggernaut")})
    });
    on("clicked:kinetick", () => {
        setupClass('Kinetick');
    });
    on("clicked:digitaldao", () => {
        setupClass('DigitalDao');
    });
    on("clicked:emissary", () => {
        setupClass('Emissary');
    });
    on("clicked:psychomant", () => {
        setupClass('Psychomant');
    });
    on("clicked:raelith", () => {
        var update = addRepeatingInfo(special.Raelith.raelithFunction, 'raelithFunction')
        update.isRaelith = 0;
        update.raelithFunction_show_flag = 0
        setAttrs(update, undefined, function() {setupClass("Raelith")})
    });

    var addRepeatingInfo = function(options, param) {
        var update = {}
        options.forEach(function(row) {
            var  newbackid = generateRowID();
            var prefix = `repeating_${param}_${newbackid}_`;
            update[`${prefix}text`] = row.text;
            update[`${prefix}button`] = row.button;
        })
        return update;
    }

    on("clicked:cancelclass", function(eventinfo) {
        setAttrs({tip_confirm_flag: 1}, "silent");
    });

    on('clicked:changebackground', function(eventInfo) {
        setAttrs({"background_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_background:select', function() {
        getAttrs(["repeating_background_button", "repeating_background_text"], (v) => {
			setAttrs({
                backgroundtype: v.repeating_background_button || '',
                backgroundtext: v.repeating_background_text || '',
                background_show_flag: 1
			});
		});
    })

    on('clicked:repeating_background:setting', function() {
        getAttrs(["repeating_background_settingsshowflag"], (v) => {
            console.log(v.repeating_background_settingsshowflag == 1)
			setAttrs({
                repeating_background_settingsshowflag: v.repeating_background_settingsshowflag && v.repeating_background_settingsshowflag == '1' ? 0 : 1
			});
		});
    })

    on('clicked:changecyborgPath', function() {
        setAttrs({"cyborgPath_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_cyborgPath:select', () => {
        getAttrs(["repeating_cyborgPath_button", "repeating_cyborgPath_text"], (v) => {
			setAttrs({
                cyborgPathtype: v.repeating_cyborgPath_button,
                cyborgPathtext: v.repeating_cyborgPath_text,
                cyborgPath_show_flag: 1
			});
		});
    });

    on('clicked:repeating_cyborgPath:setting', function() {
        getAttrs(["repeating_cyborgPath_settingsshowflag"], (v) => {
            console.log(v.repeating_cyborgPath_settingsshowflag == 1)
            setAttrs({
                repeating_cyborgPath_settingsshowflag: v.repeating_cyborgPath_settingsshowflag && v.repeating_cyborgPath_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changestrangerSpecialization', function() {
        setAttrs({"strangerSpecialization_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_strangerSpecialization:select', () => {
        getAttrs(["repeating_strangerSpecialization_button", "repeating_strangerSpecialization_text"], (v) => {
			setAttrs({
                strangerSpecializationtype: v.repeating_strangerSpecialization_button,
                strangerSpecializationtext: v.repeating_strangerSpecialization_text,
                strangerSpecialization_show_flag: 1
			});
		});
    });

    on('clicked:repeating_strangerSpecialization:setting', function() {
        getAttrs(["repeating_strangerSpecialization_settingsshowflag"], (v) => {
            console.log(v.repeating_strangerSpecialization_settingsshowflag == 1)
            setAttrs({
                repeating_strangerSpecialization_settingsshowflag: v.repeating_strangerSpecialization_settingsshowflag && v.repeating_strangerSpecialization_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changejuggernautHandicraft', function() {
        setAttrs({"juggernautHandicraft_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_juggernautHandicraft:select', () => {
        getAttrs(["repeating_juggernautHandicraft_button", "repeating_juggernautHandicraft_text"], (v) => {
			setAttrs({
                juggernautHandicrafttype: v.repeating_juggernautHandicraft_button,
                juggernautHandicrafttext: v.repeating_juggernautHandicraft_text,
                juggernautHandicraft_show_flag: 1
			});
		});
    });

    on('clicked:repeating_juggernautHandicraft:setting', function() {
        getAttrs(["repeating_juggernautHandicraft_settingsshowflag"], (v) => {
            console.log(v.repeating_juggernautHandicraft_settingsshowflag == 1)
            setAttrs({
                repeating_juggernautHandicraft_settingsshowflag: v.repeating_juggernautHandicraft_settingsshowflag && v.repeating_juggernautHandicraft_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    on('clicked:changeraelithFunction', function() {
        setAttrs({"raelithFunction_show_flag": 0}, 'silent');
    });

    on('clicked:repeating_raelithFunction:select', () => {
        getAttrs(["repeating_raelithFunction_button", "repeating_raelithFunction_text"], (v) => {
			setAttrs({
                raelithFunctiontype: v.repeating_raelithFunction_button,
                raelithFunctiontext: v.repeating_raelithFunction_text,
                raelithFunction_show_flag: 1
			});
		});
    });

    on('clicked:repeating_raelithFunction:setting', function() {
        getAttrs(["repeating_raelithFunction_settingsshowflag"], (v) => {
            console.log(v.repeating_raelithFunction_settingsshowflag == 1)
            setAttrs({
                repeating_raelithFunction_settingsshowflag: v.repeating_raelithFunction_settingsshowflag && v.repeating_raelithFunction_settingsshowflag == '1' ? 0 : 1
            });
        });
    })

    var setupClass = function(classname) {
        var update = {};
        update['character_class'] = classNames[classname]
        update['comp_name'] = classname
        update['description'] = descriptions[classname]
        update['look_example'] = look[classname]
        update['tip_confirm_flag'] = 1
        var backgroundUpdate = {}
        if(backgrounds[classname]) {
            backgroundUpdate = addRepeatingInfo(backgrounds[classname].options, 'background')
            if(backgrounds[classname].preInfo) {
                backgroundUpdate.pre_background = backgrounds[classname].preInfo
            }
        }
        var attr = startAttrs[classname]
        setAttrs({...update, ...backgroundUpdate, ...attr});
    };

    on("clicked:expand_look", function() {
        getAttrs(["expand_look"], function(v) {
          setAttrs({
            "expand_look": v["expand_look"] == 1 ? 0 : 1
          });
        });
    });

    on('clicked:subtractmaxatack', ()=> {
        getAttrs(['atack_max', 'atack'], (v) => {
            let update = {};
            update.atack_max = parseInt(v.atack_max) -1 < 1 ? 1 : parseInt(v.atack_max) - 1
            if(parseInt(v.atack_max) -1 < parseInt(v.atack)) {
                update.atack = update.atack_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxatack', ()=> {
        getAttrs(['atack_max'], (v) => {
            var update = {
                atack_max: parseInt(v.atack_max) + 1 > 5 ? 5 : parseInt(v.atack_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxarmor', ()=> {
        getAttrs(['armor_max', 'armor'], (v) => {
            let update = {};
            update.armor_max = parseInt(v.armor_max) -1 < 0 ? 0 : parseInt(v.armor_max) - 1
            if(parseInt(v.armor_max) -1 < parseInt(v.armor)) {
                update.armor = update.armor_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxarmor', ()=> {
        getAttrs(['armor_max'], (v) => {
            var update = {
                armor_max: parseInt(v.armor_max) + 1 > 5 ? 5 : parseInt(v.armor_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxhp', ()=> {
        getAttrs(['hp_max', 'hp'], (v) => {
            let update = {};
            update.hp_max = parseInt(v.hp_max) -1 < 1 ? 1 : parseInt(v.hp_max) - 1
            if(parseInt(v.hp_max) -1 < parseInt(v.hp)) {
                update.hp = update.hp_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxhp', ()=> {
        getAttrs(['hp_max'], (v) => {
            var update = {
                hp_max: parseInt(v.hp_max) + 1 > 5 ? 5 : parseInt(v.hp_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxgear', ()=> {
        getAttrs(['gear_max', 'gear'], (v) => {
            let update = {};
            update.gear_max = parseInt(v.gear_max) -1 < 1 ? 1 : parseInt(v.gear_max) - 1
            if(parseInt(v.gear_max) -1 < parseInt(v.gear)) {
                update.gear = update.gear_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxgear', ()=> {
        getAttrs(['gear_max'], (v) => {
            var update = {
                gear_max: parseInt(v.gear_max) + 1 > 10 ? 10 : parseInt(v.gear_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxmoney', ()=> {
        getAttrs(['money_max', 'money'], (v) => {
            let update = {};
            update.money_max = parseInt(v.money_max) -1 < 1 ? 1 : parseInt(v.money_max) - 1
            if(parseInt(v.money_max) -1 < parseInt(v.money)) {
                update.money = update.money_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxmoney', ()=> {
        getAttrs(['money_max'], (v) => {
            var update = {
                money_max: parseInt(v.money_max) + 1 > 5 ? 5 : parseInt(v.money_max) + 1
            }
            setAttrs(update);
        })
    })

    on('clicked:subtractmaxwealth', ()=> {
        getAttrs(['wealth_max', 'wealth'], (v) => {
            let update = {};
            update.wealth_max = parseInt(v.wealth_max) -1 < 0 ? 0 : parseInt(v.wealth_max) - 1
            if(parseInt(v.wealth_max) -1 < parseInt(v.wealth)) {
                update.wealth = update.wealth_max
            }
            setAttrs(update);
        })
    })

    on('clicked:addmaxwealth', ()=> {
        getAttrs(['wealth_max'], (v) => {
            var update = {
                wealth_max: parseInt(v.wealth_max) + 1 > 3 ? 3 : parseInt(v.wealth_max) + 1
            }
            setAttrs(update);
        })
    })

</script>